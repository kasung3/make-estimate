(()=>{var e={};e.id=3171,e.ids=[3171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44930:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(32914),s(87369),s(71363);var r=s(36576),a=s(72007),n=s(21818),i=s.n(n),l=s(88897),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["billing",{children:["success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,32914)),"/home/ubuntu/make_estimate/nextjs_space/app/billing/success/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,87369)),"/home/ubuntu/make_estimate/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/make_estimate/nextjs_space/app/billing/success/page.tsx"],u="/billing/success/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/billing/success/page",pathname:"/billing/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81514:(e,t,s)=>{Promise.resolve().then(s.bind(s,16225))},47242:(e,t,s)=>{Promise.resolve().then(s.bind(s,46618)),Promise.resolve().then(s.bind(s,48768))},87133:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,84114,23)),Promise.resolve().then(s.t.bind(s,28866,23)),Promise.resolve().then(s.t.bind(s,31324,23)),Promise.resolve().then(s.t.bind(s,83567,23)),Promise.resolve().then(s.t.bind(s,55996,23)),Promise.resolve().then(s.t.bind(s,10050,23))},16225:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(62901),a=s(24383),n=s(84374),i=s(84700),l=s(62392),o=s(10333),c=s(558);let d=(0,s(71945).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var u=s(35825),p=s(49),m=s(27878),x=s(23803);function h(){(0,n.useRouter)();let e=(0,n.useSearchParams)(),{data:t,status:s}=(0,i.useSession)()||{},h=e.get("session_id"),[f,g]=(0,a.useState)("verifying"),[v,b]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(0);return(0,a.useRef)(null),(0,a.useCallback)(async()=>{if(!h){j("No checkout session ID provided. Please return to pricing and try again."),g("error");return}try{let e=await fetch(`/api/stripe/checkout-session?session_id=${encodeURIComponent(h)}`),t=await e.json();if(!e.ok){j(t.error||"Failed to verify checkout session"),g("error");return}b(t),g("activating"),t.sessionId}catch(e){console.error("Session verification error:",e),j("Failed to verify your payment. Please check your billing status."),g("error")}},[h]),(0,a.useCallback)(async()=>{try{let e=await fetch("/api/billing/status"),t=await e.json();if(!e.ok)return!1;if("active"===t.status||"trialing"===t.status||t.hasActiveSubscription)return!0;return!1}catch(e){return console.error("Billing status poll error:",e),!1}},[]),r.jsx("div",{className:"min-h-screen gradient-hero flex items-center justify-center p-4",children:(0,r.jsxs)(x.Zb,{className:"w-full max-w-md shadow-xl border border-purple-100/50",children:[(0,r.jsxs)(x.Ol,{className:"text-center",children:[r.jsx(x.ll,{className:"text-2xl font-bold gradient-text",children:"Payment Status"}),r.jsx(x.SZ,{children:"error"===f?"There was an issue with your payment":"Processing your subscription"})]}),r.jsx(x.aY,{children:(()=>{if("loading"===s)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[r.jsx(o.Z,{className:"w-12 h-12 animate-spin text-purple-500"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]});switch(f){case"verifying":return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[r.jsx(o.Z,{className:"w-12 h-12 animate-spin text-purple-500"}),r.jsx("p",{className:"text-lg font-medium",children:"Verifying your payment..."}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we confirm your transaction."})]});case"activating":return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(c.Z,{className:"w-16 h-16 text-green-500"}),r.jsx(o.Z,{className:"w-6 h-6 animate-spin text-purple-500 absolute -bottom-1 -right-1"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-medium text-green-600",children:"Payment received!"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Activating your subscription..."})]}),v?.planKey&&r.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-xl border border-purple-100",children:(0,r.jsxs)("p",{className:"text-sm text-purple-700",children:[r.jsx("span",{className:"font-medium",children:"Plan:"})," ",v.planKey.charAt(0).toUpperCase()+v.planKey.slice(1),v.interval&&` (${"year"===v.interval?"Annual":"Monthly"})`]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(d,{className:"w-3 h-3 animate-spin"}),(0,r.jsxs)("span",{children:["Checking status... (",w,"/",15,")"]})]})]});case"success":return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(c.Z,{className:"w-10 h-10 text-green-600"})}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold text-green-600",children:"Subscription Active!"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Redirecting to dashboard..."})]}),r.jsx(o.Z,{className:"w-5 h-5 animate-spin text-purple-500"})]});case"error":return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx(u.Z,{className:"w-10 h-10 text-red-600"})}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-medium text-red-600",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-md",children:y})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-4",children:[r.jsx(l.default,{href:"/pricing",children:r.jsx(m.z,{variant:"outline",children:"View Pricing"})}),r.jsx(l.default,{href:"/app/settings",children:(0,r.jsxs)(m.z,{children:["Check Billing Status",r.jsx(p.Z,{className:"w-4 h-4 ml-2"})]})})]})]})}})()})]})})}s(39350)},46618:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i});var r=s(62901),a=s(84700),n=s(39350);function i({children:e}){return(0,r.jsxs)(a.SessionProvider,{children:[e,r.jsx(n.x7,{position:"top-right"})]})}},48768:(e,t,s)=>{"use strict";s.d(t,{MetaPixelProvider:()=>d});var r=s(62901),a=s(24383),n=s(84374),i=s(4990),l=s(74317);let o=(0,l.mO)(),c=(0,l.kR)();function d({children:e}){(0,n.usePathname)(),(0,n.useSearchParams)(),(0,a.useRef)(!1),(0,a.useRef)(null);let[t,s]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[o&&c&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{id:"meta-pixel",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:`
                !function(f,b,e,v,n,t,s)
                {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
                n.callMethod.apply(n,arguments):n.queue.push(arguments)};
                if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
                n.queue=[];t=b.createElement(e);t.async=!0;
                t.src=v;s=b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t,s)}(window, document,'script',
                'https://connect.facebook.net/en_US/fbevents.js');
                fbq('init', '${c}');
                fbq('track', 'PageView');
              `}}),r.jsx("noscript",{children:r.jsx("img",{height:"1",width:"1",style:{display:"none"},src:`https://www.facebook.com/tr?id=${c}&ev=PageView&noscript=1`,alt:""})})]}),e]})}},27878:(e,t,s)=>{"use strict";s.d(t,{d:()=>o,z:()=>c});var r=s(62901),a=s(24383),n=s(42049),i=s(47279),l=s(68637);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gradient-to-r from-purple-500 to-lavender-500 text-white shadow-md hover:shadow-lg hover:from-purple-600 hover:to-lavender-600 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-purple-200 bg-white text-purple-700 hover:bg-purple-50 hover:border-purple-300 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"text-foreground hover:bg-purple-100/50 hover:text-purple-700 active:scale-[0.98]",link:"text-purple-600 underline-offset-4 hover:underline hover:text-purple-700",success:"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-sm hover:from-emerald-600 hover:to-green-600 active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},c)=>{let d=a?n.g7:"button";return r.jsx(d,{className:(0,l.cn)(o({variant:t,size:s,className:e})),ref:c,...i})});c.displayName="Button"},23803:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>o});var r=s(62901),a=s(24383),n=s(68637);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("rounded-2xl border border-purple-100/50 bg-white shadow-card transition-all duration-200","hover:shadow-card-hover",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,n.cn)("text-xl font-semibold leading-none tracking-tight text-foreground",e),...t}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},74317:(e,t,s)=>{"use strict";function r(){return!0}function a(){return"2738592306503525"}function n(...e){}function i(e,t){}function l(e,t){}s.d(t,{OD:()=>i,PR:()=>l,kR:()=>a,mO:()=>r})},68637:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(84330),a=s(77189);function n(...e){return(0,a.m6)((0,r.W)(e))}},49:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},35825:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},558:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},10333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(71945).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},32914:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/app/billing/success/page.tsx#default`)},87369:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,dynamic:()=>d,metadata:()=>u});var r=s(83537),a=s(57416),n=s.n(a),i=s(3995);s(26148);var l=s(88895);let o=(0,l.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/auth-provider.tsx#AuthProvider`),c=(0,l.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/meta-pixel-provider.tsx#MetaPixelProvider`);(0,l.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/meta-pixel-provider.tsx#default`);let d="force-dynamic",u={title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",icons:{icon:"/favicon.svg",shortcut:"/favicon.svg"},openGraph:{title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",images:["/og-image.png"]},metadataBase:new URL(process.env.NEXTAUTH_URL||"http://localhost:3000")};function p({children:e}){return(0,r.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[r.jsx("head",{children:r.jsx("script",{src:"https://apps.abacus.ai/chatllm/appllm-lib.js"})}),r.jsx("body",{className:n().className,children:r.jsx(o,{children:r.jsx(i.Suspense,{fallback:null,children:r.jsx(c,{children:e})})})})]})}},26148:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4372,5410,1263,2392],()=>s(44930));module.exports=r})();