(()=>{var e={};e.id=4308,e.ids=[4308],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},86715:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d}),a(83292),a(87369),a(71363);var t=a(36576),l=a(72007),r=a(21818),i=a.n(r),n=a(88897),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["app",{children:["glorand",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,83292)),"/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,87369)),"/home/ubuntu/make_estimate/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"],m="/app/glorand/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/app/glorand/page",pathname:"/app/glorand",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61548:(e,s,a)=>{Promise.resolve().then(a.bind(a,88565))},88565:(e,s,a)=>{"use strict";a.d(s,{GlorandAdminClient:()=>ec});var t=a(62901),l=a(24383),r=a(22270),i=a(27878),n=a(250),c=a(82657),d=a(23803),o=a(72388),m=a(65923),x=a(18832),h=a(47279),p=a(42594),u=a(68637);let j=x.fC;x.xz,x.x8;let g=x.h_,v=l.forwardRef(({className:e,...s},a)=>t.jsx(x.aV,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));v.displayName=x.aV.displayName;let y=(0,h.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=l.forwardRef(({side:e="right",className:s,children:a,...l},r)=>(0,t.jsxs)(g,{children:[t.jsx(v,{}),(0,t.jsxs)(x.VY,{ref:r,className:(0,u.cn)(y({side:e}),s),...l,children:[a,(0,t.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(p.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=x.VY.displayName;let N=({className:e,...s})=>t.jsx("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});N.displayName="SheetHeader";let b=l.forwardRef(({className:e,...s},a)=>t.jsx(x.Dx,{ref:a,className:(0,u.cn)("text-lg font-semibold text-foreground",e),...s}));b.displayName=x.Dx.displayName;let w=l.forwardRef(({className:e,...s},a)=>t.jsx(x.dk,{ref:a,className:(0,u.cn)("text-sm text-muted-foreground",e),...s}));w.displayName=x.dk.displayName;var C=a(31606),k=a(84227),P=a(99311),Z=a(44928),S=a(66843),A=a(1320),M=a(6731),z=a(79357),F=a(91046),U=a(10333),E=a(71945);let T=(0,E.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var B=a(75811),D=a(32614),_=a(76021),L=a(91334),q=a(96527),R=a(60004),O=a(19918),I=a(97718);let $=(0,E.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var Q=a(53275),V=a(85453),G=a(6e4),K=a(76244);let H=(0,E.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var W=a(83898);let J=(0,E.Z)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]),Y=(0,E.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var X=a(71028),ee=a(21680);let es=(0,E.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ea=(0,E.Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),et=(0,E.Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),el=(0,E.Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var er=a(39350),ei=a(27221),en=a(16098);function ec({adminEmail:e}){let[s,a]=(0,l.useState)("users"),[x,h]=(0,l.useState)([]),[u,g]=(0,l.useState)([]),[v,y]=(0,l.useState)([]),[E,ea]=(0,l.useState)([]),[et,el]=(0,l.useState)(!0),[ec,eo]=(0,l.useState)(!1),[em,ex]=(0,l.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[eh,ep]=(0,l.useState)(null),[eu,ej]=(0,l.useState)(!1),[eg,ev]=(0,l.useState)({name:"",priceMonthlyUsdCents:0,priceAnnualUsdCents:"",boqLimitPerPeriod:"",boqTemplatesLimit:"",coverTemplatesLimit:"",features:[],isMostPopular:!1,sortOrder:0,active:!0}),[ey,ef]=(0,l.useState)(""),[eN,eb]=(0,l.useState)(!1),[ew,eC]=(0,l.useState)(null),[ek,eP]=(0,l.useState)(null),[eZ,eS]=(0,l.useState)(""),[eA,eM]=(0,l.useState)(""),[ez,eF]=(0,l.useState)(""),[eU,eE]=(0,l.useState)(""),[eT,eB]=(0,l.useState)(""),[eD,e_]=(0,l.useState)(""),[eL,eq]=(0,l.useState)("newest"),[eR,eO]=(0,l.useState)(null),[eI,e$]=(0,l.useState)(null),[eQ,eV]=(0,l.useState)(!1),[eG,eK]=(0,l.useState)(!1),[eH,eW]=(0,l.useState)(""),[eJ,eY]=(0,l.useState)(""),[eX,e0]=(0,l.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[e1,e2]=(0,l.useState)(!1),[e4,e3]=(0,l.useState)(null),[e5,e8]=(0,l.useState)(null),[e6,e7]=(0,l.useState)(!1),[e9,se]=(0,l.useState)(!1),[ss,sa]=(0,l.useState)(!1),[st,sl]=(0,l.useState)(""),[sr,si]=(0,l.useState)(!1),[sn,sc]=(0,l.useState)(!1),[sd,so]=(0,l.useState)(""),[sm,sx]=(0,l.useState)(!1),[sh,sp]=(0,l.useState)(""),[su,sj]=(0,l.useState)(!1),[sg,sv]=(0,l.useState)(!1),[sy,sf]=(0,l.useState)(null),[sN,sb]=(0,l.useState)(""),[sw,sC]=(0,l.useState)(!0),[sk,sP]=(0,l.useState)(!1),[sZ,sS]=(0,l.useState)(null),[sA,sM]=(0,l.useState)(""),[sz,sF]=(0,l.useState)(!1),[sU,sE]=(0,l.useState)(null),[sT,sB]=(0,l.useState)("business"),[sD,s_]=(0,l.useState)(""),[sL,sq]=(0,l.useState)(""),[sR,sO]=(0,l.useState)(!1),[sI,s$]=(0,l.useState)(!1),[sQ,sV]=(0,l.useState)({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),[sG,sK]=(0,l.useState)(!1),sH=async()=>{el(!0);try{let e=new URLSearchParams({page:em.page.toString(),limit:em.limit.toString(),sortBy:eL});ez&&e.set("query",ez),eU&&e.set("plan",eU),eT&&e.set("status",eT),eD&&e.set("blocked",eD);let s=await fetch(`/api/admin/users?${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();h(a.users||[]),ex(a.pagination)}catch(e){er.ZP.error("Failed to load users")}finally{el(!1)}},sW=async()=>{el(!0);try{let e=await fetch("/api/admin/coupons");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();g(s.coupons||[])}catch(e){er.ZP.error("Failed to load coupons")}finally{el(!1)}},sJ=async()=>{e2(!0);try{let e=new URLSearchParams({page:eX.page.toString(),limit:eX.limit.toString()});eJ&&e.set("query",eJ);let s=await fetch(`/api/admin/companies?${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();y(a.companies||[]),e0(a.pagination)}catch(e){er.ZP.error("Failed to load companies")}finally{e2(!1)}},sY=async e=>{e7(!0);try{let s=await fetch(`/api/admin/companies/${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();e8(a)}catch(e){er.ZP.error("Failed to load company details")}finally{e7(!1)}},sX=e=>{e3(e),se(!0),sY(e.id)},s0=()=>{se(!1),e3(null),e8(null),sc(!1),so("")},s1=async()=>{if(e4&&sd.trim())try{if(!(await fetch(`/api/admin/companies/${e4.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:sd.trim()})})).ok)throw Error("Failed to update");er.ZP.success("Company name updated"),sc(!1),sJ(),sY(e4.id)}catch(e){er.ZP.error("Failed to update company name")}},s2=e=>{e3(e),sl(""),sa(!0)},s4=async()=>{if(e4&&"DELETE"===st){si(!0);try{if(!(await fetch(`/api/admin/companies/${e4.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete");er.ZP.success("Company deleted successfully"),sa(!1),s0(),sJ()}catch(e){er.ZP.error("Failed to delete company")}finally{si(!1)}}},s3=async()=>{if(eR&&"DELETE"===sh){sj(!0);try{let e=await fetch(`/api/admin/users/${eR.id}`,{method:"DELETE"}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to delete");er.ZP.success(s.message||"User deleted successfully"),sx(!1),ac(),sH()}catch(e){er.ZP.error(e.message||"Failed to delete user")}finally{sj(!1)}}},s5=async()=>{eo(!0);try{let e=await fetch("/api/admin/plans");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();ea(s||[])}catch(e){er.ZP.error("Failed to load billing plans")}finally{eo(!1)}},s8=e=>{ep(e),ev({name:e.name,priceMonthlyUsdCents:e.priceMonthlyUsdCents,priceAnnualUsdCents:e.priceAnnualUsdCents??"",boqLimitPerPeriod:e.boqLimitPerPeriod??"",boqTemplatesLimit:e.boqTemplatesLimit??"",coverTemplatesLimit:e.coverTemplatesLimit??"",features:e.features||[],isMostPopular:e.isMostPopular||!1,sortOrder:e.sortOrder,active:e.active}),ef(""),ej(!0)},s6=async()=>{if(eh){eb(!0);try{let e=await fetch(`/api/admin/plans/${eh.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:eg.name,priceMonthlyUsdCents:eg.priceMonthlyUsdCents,priceAnnualUsdCents:""===eg.priceAnnualUsdCents?null:Number(eg.priceAnnualUsdCents),boqLimitPerPeriod:""===eg.boqLimitPerPeriod?null:Number(eg.boqLimitPerPeriod),boqTemplatesLimit:""===eg.boqTemplatesLimit?null:Number(eg.boqTemplatesLimit),coverTemplatesLimit:""===eg.coverTemplatesLimit?null:Number(eg.coverTemplatesLimit),features:eg.features,isMostPopular:eg.isMostPopular,sortOrder:eg.sortOrder,active:eg.active})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update plan")}er.ZP.success("Plan updated successfully");let s=eh.priceMonthlyUsdCents!==eg.priceMonthlyUsdCents,a=(eh.priceAnnualUsdCents??"")!==eg.priceAnnualUsdCents;(s||a)&&er.ZP.success("New Stripe price(s) created for updated amounts",{duration:5e3}),ej(!1),s5()}catch(e){er.ZP.error(e.message||"Failed to update plan")}finally{eb(!1)}}},s7=()=>{ey.trim()&&(ev(e=>({...e,features:[...e.features,ey.trim()]})),ef(""))},s9=e=>{ev(s=>({...s,features:s.features.filter((s,a)=>a!==e)}))},ae=e=>{eC(e)},as=(e,s)=>{if(e.preventDefault(),null===ew||ew===s)return;let a=[...eg.features],t=a[ew];a.splice(ew,1),a.splice(s,0,t),ev(e=>({...e,features:a})),eC(s)},aa=()=>{eC(null)},at=e=>{eP(e),eS(eg.features[e])},al=()=>{if(null===ek)return;let e=eZ.trim();e&&ev(s=>({...s,features:s.features.map((s,a)=>a===ek?e:s)})),eP(null),eS("")},ar=()=>{eP(null),eS("")},ai=async e=>{eV(!0);try{let s=await fetch(`/api/admin/users/${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();e$(a)}catch(e){er.ZP.error("Failed to load user details")}finally{eV(!1)}},an=e=>{eO(e),eK(!0),ai(e.id)},ac=()=>{eK(!1),eO(null),e$(null)},ad=(e,s,a,t)=>{sf({type:e,id:s,name:a,isBlocked:t}),sb(""),sC(!0),sv(!0)},ao=async()=>{if(sy)try{let e="user"===sy.type?`/api/admin/users/${sy.id}/${sy.isBlocked?"unblock":"block"}`:`/api/admin/companies/${sy.id}/${sy.isBlocked?"unblock":"block"}`;if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockReason:sy.isBlocked?void 0:sN,cancelSubscription:sy.isBlocked?void 0:sw})})).ok)throw Error("Failed to update");er.ZP.success(sy.isBlocked?"Unblocked successfully":"Blocked successfully"),sv(!1),"user"===sy.type?sH():sJ(),eR&&ai(eR.id),e4&&"company"===sy.type&&sY(e4.id)}catch(e){er.ZP.error("Failed to update block status")}},am=e=>{sS(e),sM(""),sP(!0)},ax=async e=>{if(sZ)try{let s=await fetch(`/api/admin/users/${sZ.id}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");"generate_link"===e&&a.resetLink&&sM(a.resetLink),er.ZP.success(a.message),sH(),eR&&ai(eR.id)}catch(e){er.ZP.error(e.message||"Failed to process password reset")}},ah=e=>{navigator.clipboard.writeText(e),er.ZP.success("Copied to clipboard")},ap=(e,s,a)=>{sE({companyId:e,companyName:s,hasGrant:a}),sB("business"),s_(""),sq(""),sF(!0)},au=async()=>{if(sU){sO(!0);try{let e=sU.hasGrant?`/api/admin/companies/${sU.companyId}/revoke-free-forever`:`/api/admin/companies/${sU.companyId}/grant-free-forever`,s={plan:sT};!sU.hasGrant&&sD&&(s.expiresAt=new Date(sD).toISOString()),!sU.hasGrant&&sL&&(s.notes=sL);let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(!a.ok)throw Error(t.error||"Failed");er.ZP.success(t.message),sF(!1),sH(),sJ(),eR&&ai(eR.id),e4&&e4.id===sU.companyId&&sY(e4.id)}catch(e){er.ZP.error(e.message||"Failed to update access")}finally{sO(!1)}}},aj=async e=>{if(confirm("Are you sure you want to remove the coupon/discount from this company?"))try{let s=await fetch(`/api/admin/companies/${e}/remove-coupon`,{method:"POST",headers:{"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");er.ZP.success(a.message),sH(),eR&&ai(eR.id)}catch(e){er.ZP.error(e.message||"Failed to remove coupon")}},ag=async()=>{if(!sQ.code.trim()){er.ZP.error("Coupon code is required");return}sK(!0);try{let e=await fetch("/api/admin/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:sQ.code,type:sQ.type,trialDays:"trial_days"===sQ.type?sQ.trialDays:void 0,allowedPlans:sQ.allowedPlans.length>0?sQ.allowedPlans:void 0,maxRedemptions:sQ.maxRedemptions?parseInt(sQ.maxRedemptions):void 0,expiresAt:sQ.expiresAt||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create");er.ZP.success("Coupon created!"),s$(!1),sV({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),sW()}catch(e){er.ZP.error(e.message||"Failed to create coupon")}finally{sK(!1)}},av=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!e.active})})).ok)throw Error("Failed to update");er.ZP.success(e.active?"Coupon disabled":"Coupon enabled"),sW()}catch(e){er.ZP.error("Failed to update coupon")}},ay=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({archived:!0,active:!1})})).ok)throw Error("Failed to archive");er.ZP.success("Coupon archived"),sW()}catch(e){er.ZP.error("Failed to archive coupon")}},af=async e=>{if(e.currentRedemptions>0){er.ZP.error("Cannot delete used coupons. Archive instead.");return}if(confirm(`Delete coupon "${e.code}"? This cannot be undone.`))try{let s=await fetch(`/api/admin/coupons/${e.id}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete")}er.ZP.success("Coupon deleted"),sW()}catch(e){er.ZP.error(e.message||"Failed to delete coupon")}},aN=u.filter(e=>!e.archived),ab=u.filter(e=>e.archived),aw=e=>{let s=e.billing;return s?"admin_grant"===s.accessOverride||"free_forever"===s.accessOverride?(0,t.jsxs)(C.C,{className:"text-xs bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}):"business"===s.planKey?t.jsx(C.C,{className:"text-xs bg-blue-100 text-blue-800",children:"Business"}):"starter"===s.planKey?t.jsx(C.C,{className:"text-xs bg-green-100 text-green-800",children:"Starter"}):t.jsx(C.C,{variant:"outline",className:"text-xs",children:"No Plan"}):t.jsx(C.C,{variant:"outline",className:"text-xs",children:"No Plan"})},aC=e=>e?t.jsx(C.C,{className:`text-xs ${{active:"bg-green-100 text-green-800",trialing:"bg-yellow-100 text-yellow-800",past_due:"bg-red-100 text-red-800",canceled:"bg-gray-100 text-gray-800",incomplete:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e}):t.jsx(C.C,{variant:"outline",className:"text-xs",children:"None"});return t.jsx(r.AppLayout,{children:(0,t.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(Z.Z,{className:"h-8 w-8 text-primary"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Platform Admin"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Logged in as ",e]})]})]}),(0,t.jsxs)(k.mQ,{value:s,onValueChange:a,children:[(0,t.jsxs)(k.dr,{className:"mb-6",children:[(0,t.jsxs)(k.SP,{value:"users",className:"gap-2",children:[t.jsx(S.Z,{className:"h-4 w-4"})," Users"]}),(0,t.jsxs)(k.SP,{value:"companies",className:"gap-2",children:[t.jsx(A.Z,{className:"h-4 w-4"})," Companies"]}),(0,t.jsxs)(k.SP,{value:"coupons",className:"gap-2",children:[t.jsx(M.Z,{className:"h-4 w-4"})," Coupons"]}),(0,t.jsxs)(k.SP,{value:"plans",className:"gap-2",children:[t.jsx(z.Z,{className:"h-4 w-4"})," Plans"]})]}),t.jsx(k.nU,{value:"users",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[t.jsx(d.ll,{children:"User Management"}),t.jsx(d.SZ,{children:"Search and manage all platform users"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx(F.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(n.I,{placeholder:"Search by name, email, company name, or phone...",value:eA,onChange:e=>{eM(e.target.value),ex(e=>({...e,page:1}))},className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(o.Ph,{value:eU,onValueChange:e=>{eE(e),ex(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Plan"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All Plans"}),t.jsx(o.Ql,{value:"business",children:"Business"}),t.jsx(o.Ql,{value:"starter",children:"Starter"}),t.jsx(o.Ql,{value:"free_forever",children:"Admin Grant"}),t.jsx(o.Ql,{value:"none",children:"No Plan"})]})]}),(0,t.jsxs)(o.Ph,{value:eT,onValueChange:e=>{eB(e),ex(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Status"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All Status"}),t.jsx(o.Ql,{value:"active",children:"Active"}),t.jsx(o.Ql,{value:"trialing",children:"Trialing"}),t.jsx(o.Ql,{value:"past_due",children:"Past Due"}),t.jsx(o.Ql,{value:"canceled",children:"Canceled"}),t.jsx(o.Ql,{value:"none",children:"None"})]})]}),(0,t.jsxs)(o.Ph,{value:eD,onValueChange:e=>{e_(e),ex(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Blocked"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All"}),t.jsx(o.Ql,{value:"blocked",children:"Blocked"}),t.jsx(o.Ql,{value:"unblocked",children:"Unblocked"})]})]}),(0,t.jsxs)(o.Ph,{value:eL,onValueChange:eq,children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Sort"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"newest",children:"Newest"}),t.jsx(o.Ql,{value:"oldest",children:"Oldest"}),t.jsx(o.Ql,{value:"name",children:"Name"}),t.jsx(o.Ql,{value:"email",children:"Email"})]})]})]})]}),et?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(U.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===x.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No users found"}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"space-y-3",children:x.map(e=>t.jsx("div",{className:`p-4 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors ${e.deletedAt?"bg-gray-100 border-gray-300 opacity-70":e.isBlocked||e.company?.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,onClick:()=>an(e),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:`font-medium truncate ${e.deletedAt?"line-through text-muted-foreground":""}`,children:e.email}),e.deletedAt&&t.jsx(C.C,{variant:"secondary",className:"text-xs bg-gray-200",children:"Deleted"}),!e.deletedAt&&e.isBlocked&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.company?.isBlocked&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Company Blocked"}),aw(e),aC(e.billing?.status||null),e.billing?.currentCouponCode&&(0,t.jsxs)(C.C,{variant:"outline",className:"text-xs bg-yellow-50",children:[t.jsx(T,{className:"w-3 h-3 mr-1"}),e.billing.currentCouponCode]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[t.jsx("span",{children:e.fullName||e.name||"No name"}),t.jsx("span",{children:e.company?.name||"No company"}),e.country&&(0,t.jsxs)("span",{children:[t.jsx(B.Z,{className:"inline h-3 w-3 mr-1"}),e.country]}),e.phone&&(0,t.jsxs)("span",{children:[t.jsx(D.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]}),(0,t.jsxs)("span",{children:[t.jsx(_.Z,{className:"inline h-3 w-3 mr-1"}),"Joined ",(0,ei.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]})]}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),an(e)},children:t.jsx(L.Z,{className:"h-4 w-4"})})]})},e.id))}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(em.page-1)*em.limit+1," to"," ",Math.min(em.page*em.limit,em.totalCount)," of"," ",em.totalCount," users"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ex(e=>({...e,page:e.page-1})),disabled:em.page<=1,children:t.jsx(q.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",em.page," of ",em.totalPages]}),t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ex(e=>({...e,page:e.page+1})),disabled:em.page>=em.totalPages,children:t.jsx(R.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),t.jsx(k.nU,{value:"companies",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Companies"}),(0,t.jsxs)("div",{className:"text-sm font-normal text-muted-foreground",children:[eX.totalCount," total"]})]}),t.jsx(d.SZ,{children:"Manage company accounts, billing, and access"})]}),(0,t.jsxs)(d.aY,{children:[t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(F.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(n.I,{placeholder:"Search by company name or admin email...",value:eH,onChange:e=>{eW(e.target.value),e0(e=>({...e,page:1}))},className:"pl-9"})]})}),e1?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(U.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===v.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:eH?"No companies match your search":"No companies found"}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"space-y-3",children:v.map(e=>t.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors hover:bg-muted/50 ${e.isBlocked?"bg-red-50 border-red-200 hover:bg-red-100/50":"bg-white"} ${e.deletedAt?"opacity-60":""}`,onClick:()=>sX(e),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-medium",children:e.name}),e.deletedAt&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Deleted"}),e.isBlocked&&!e.deletedAt&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.billing?.accessOverride&&(0,t.jsxs)(C.C,{className:"text-xs bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}),e.billing?.planKey&&t.jsx(C.C,{variant:"secondary",className:"text-xs capitalize",children:e.billing.planKey}),e.billing?.status&&"active"!==e.billing.status&&t.jsx(C.C,{variant:"outline",className:"text-xs capitalize",children:e.billing.status})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-3 gap-y-1",children:[e.adminEmail&&(0,t.jsxs)("span",{children:[t.jsx(O.Z,{className:"inline h-3 w-3 mr-1"}),e.adminEmail]}),(0,t.jsxs)("span",{children:[e._count.memberships," member",1!==e._count.memberships?"s":""]}),(0,t.jsxs)("span",{children:[e._count.boqs," BOQ",1!==e._count.boqs?"s":""]}),(0,t.jsxs)("span",{children:[t.jsx(_.Z,{className:"inline h-3 w-3 mr-1"}),(0,ei.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]}),e.isBlocked&&e.blockReason&&(0,t.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Reason: ",e.blockReason]})]}),t.jsx("div",{className:"flex items-center gap-2 ml-4 flex-shrink-0",children:t.jsx(i.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),sX(e)},children:t.jsx(L.Z,{className:"h-4 w-4"})})})]})},e.id))}),eX.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(eX.page-1)*eX.limit+1," to"," ",Math.min(eX.page*eX.limit,eX.totalCount)," of"," ",eX.totalCount," companies"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>e0(e=>({...e,page:e.page-1})),disabled:eX.page<=1,children:t.jsx(q.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",eX.page," of ",eX.totalPages]}),t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>e0(e=>({...e,page:e.page+1})),disabled:eX.page>=eX.totalPages,children:t.jsx(R.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),t.jsx(k.nU,{value:"coupons",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[t.jsx(d.ll,{children:"Promo Codes / Coupons"}),(0,t.jsxs)(i.z,{onClick:()=>s$(!0),size:"sm",children:[t.jsx(I.Z,{className:"h-4 w-4 mr-2"})," Create Coupon"]})]}),t.jsx(d.aY,{children:et?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(U.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.jsx("div",{className:"space-y-6",children:0===aN.length&&0===ab.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No coupons created yet"}):(0,t.jsxs)(t.Fragment,{children:[aN.length>0&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Active Coupons"}),t.jsx("div",{className:"space-y-3",children:aN.map(e=>t.jsx(ed,{coupon:e,onToggle:()=>av(e),onArchive:()=>ay(e),onDelete:()=>af(e)},e.id))})]}),ab.length>0&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Archived Coupons"}),t.jsx("div",{className:"space-y-3 opacity-60",children:ab.map(e=>t.jsx(ed,{coupon:e,onToggle:()=>{},onArchive:()=>{},onDelete:()=>af(e),isArchived:!0},e.id))})]})]})})})]})}),t.jsx(k.nU,{value:"plans",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-5 w-5"})," Billing Plans"]}),t.jsx(d.SZ,{children:"Manage pricing, quotas, and features. Price changes auto-create new Stripe prices."})]}),t.jsx(d.aY,{children:ec?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(U.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===E.length?t.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No billing plans found. Run the seed script to create plans."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(e=>(0,t.jsxs)("div",{className:`p-6 rounded-xl border-2 ${e.active?"bg-white":"bg-gray-50 opacity-75"} ${e.isMostPopular?"border-primary":"border-gray-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold",children:e.name}),e.isMostPopular&&t.jsx(C.C,{className:"bg-primary text-white",children:"Most Popular"}),!e.active&&t.jsx(C.C,{variant:"secondary",children:"Inactive"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Key: ",t.jsx("code",{className:"bg-gray-100 px-1 rounded",children:e.planKey}),"per_seat"===e.seatModel&&t.jsx(C.C,{variant:"outline",className:"ml-2 text-xs",children:"Per Seat"})]})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>s8(e),className:"gap-1",children:[t.jsx(Q.Z,{className:"h-3 w-3"})," Edit"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold",children:["$",(e.priceMonthlyUsdCents/100).toFixed(0),t.jsx("span",{className:"text-lg font-normal text-muted-foreground",children:"/mo"}),"per_seat"===e.seatModel&&t.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/user"})]}),e.priceAnnualUsdCents&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",(e.priceAnnualUsdCents/100).toFixed(0),"/year","per_seat"===e.seatModel&&"/user"]})]}),(0,t.jsxs)("div",{className:"mb-4 text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQ Limit:"}),t.jsx("span",{className:null===e.boqLimitPerPeriod?"text-green-600 font-medium":"",children:null===e.boqLimitPerPeriod?"Unlimited":`${e.boqLimitPerPeriod}/period`})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQ Templates:"}),t.jsx("span",{className:null===e.boqTemplatesLimit?"text-green-600 font-medium":"",children:null===e.boqTemplatesLimit?"Unlimited":e.boqTemplatesLimit})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Cover Templates:"}),t.jsx("span",{className:null===e.coverTemplatesLimit?"text-green-600 font-medium":"",children:null===e.coverTemplatesLimit?"Unlimited":e.coverTemplatesLimit})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Features:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(e.features||[]).slice(0,5).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx(V.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:e})]},s)),(e.features||[]).length>5&&(0,t.jsxs)("li",{className:"text-xs text-muted-foreground",children:["+",(e.features||[]).length-5," more..."]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{children:["Stripe Product: ",e.stripeProductId||"Not configured"]}),(0,t.jsxs)("div",{children:["Monthly Price ID: ",e.stripePriceIdMonthly||"Not configured"]}),(0,t.jsxs)("div",{children:["Annual Price ID: ",e.stripePriceIdAnnual||"Not configured"]}),(0,t.jsxs)("div",{children:["Sort Order: ",e.sortOrder]}),e.priceHistory&&e.priceHistory.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("span",{className:"font-medium",children:"Price History:"}),t.jsx("ul",{className:"ml-2",children:e.priceHistory.slice(0,3).map(e=>(0,t.jsxs)("li",{children:["$",(e.amountCents/100).toFixed(0)," (",e.interval,") - ",(0,ei.WU)(new Date(e.createdAt),"MMM d, yyyy"),e.isCurrent&&t.jsx(C.C,{className:"ml-1 text-xs",variant:"outline",children:"Current"})]},e.id))})]})]})]},e.id))})})]})})]}),t.jsx(m.Vq,{open:eu,onOpenChange:ej,children:(0,t.jsxs)(m.cZ,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{children:["Edit Plan: ",eh?.name]}),t.jsx(m.Be,{children:"Update pricing, quotas, and features. Price changes will create a new Stripe price."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Name"}),t.jsx(n.I,{value:eg.name,onChange:e=>ev(s=>({...s,name:e.target.value})),placeholder:"Plan name"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Monthly Price (USD cents)"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(n.I,{type:"number",value:eg.priceMonthlyUsdCents,onChange:e=>ev(s=>({...s,priceMonthlyUsdCents:parseInt(e.target.value)||0})),placeholder:"1900"})}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",(eg.priceMonthlyUsdCents/100).toFixed(2),"/mo"]})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Annual Price (USD cents)"}),t.jsx(n.I,{type:"number",value:eg.priceAnnualUsdCents,onChange:e=>ev(s=>({...s,priceAnnualUsdCents:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"Leave empty if no annual"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",eg.priceAnnualUsdCents?(Number(eg.priceAnnualUsdCents)/100).toFixed(2):"0.00","/yr"]})]})]}),eh&&(eh.priceMonthlyUsdCents!==eg.priceMonthlyUsdCents||(eh.priceAnnualUsdCents??"")!==eg.priceAnnualUsdCents)&&t.jsx("p",{className:"text-xs text-amber-600",children:"⚠️ Changing price will create new Stripe price(s). Existing subscribers keep their current price."}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"BOQ Limit/Period"}),t.jsx(n.I,{type:"number",value:eg.boqLimitPerPeriod,onChange:e=>ev(s=>({...s,boqLimitPerPeriod:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"BOQ Templates"}),t.jsx(n.I,{type:"number",value:eg.boqTemplatesLimit,onChange:e=>ev(s=>({...s,boqTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Cover Templates"}),t.jsx(n.I,{type:"number",value:eg.coverTemplatesLimit,onChange:e=>ev(s=>({...s,coverTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Sort Order"}),t.jsx(n.I,{type:"number",value:eg.sortOrder,onChange:e=>ev(s=>({...s,sortOrder:parseInt(e.target.value)||0}))})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(en.X,{id:"plan-active",checked:eg.active,onCheckedChange:e=>ev(s=>({...s,active:!0===e}))}),t.jsx(c._,{htmlFor:"plan-active",children:"Active (visible on pricing)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(en.X,{id:"plan-popular",checked:eg.isMostPopular,onCheckedChange:e=>ev(s=>({...s,isMostPopular:!0===e}))}),t.jsx(c._,{htmlFor:"plan-popular",children:"Most Popular badge"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{children:["Features ",t.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(drag to reorder, click to edit)"})]}),(0,t.jsxs)("div",{className:"space-y-1 mt-2",children:[eg.features.map((e,s)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>ae(s),onDragOver:e=>as(e,s),onDragEnd:aa,className:`flex items-center gap-2 group ${ew===s?"opacity-50 bg-primary/10":""}`,children:[t.jsx("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:t.jsx(G.Z,{className:"h-4 w-4"})}),ek===s?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx(n.I,{value:eZ,onChange:e=>eS(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),al()),"Escape"===e.key&&ar()},autoFocus:!0,className:"h-8 text-sm"}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",onClick:al,children:t.jsx(V.Z,{className:"h-4 w-4 text-green-600"})}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",onClick:ar,children:t.jsx(p.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>at(s),children:e}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>s9(s),children:t.jsx(p.Z,{className:"h-4 w-4"})})]})]},s)),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-4"})," ",t.jsx(n.I,{value:ey,onChange:e=>ef(e.target.value),placeholder:"Add a feature...",onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),s7()),className:"flex-1"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:s7,children:t.jsx(I.Z,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>ej(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:s6,disabled:eN,children:[eN?t.jsx(U.Z,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]})]})}),t.jsx(j,{open:eG,onOpenChange:eK,children:(0,t.jsxs)(f,{className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,t.jsxs)(N,{children:[t.jsx(b,{children:"User Details"}),t.jsx(w,{children:eR?.email})]}),eQ?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(U.Z,{className:"h-6 w-6 animate-spin"})}):eI?(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(S.Z,{className:"h-4 w-4"})," Profile"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eI.user.fullName||eI.user.name||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",eI.user.email]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Phone:"})," ",eI.user.phone||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Country:"})," ",eI.user.country||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Joined:"})," ",(0,ei.WU)(new Date(eI.user.createdAt),"MMM d, yyyy")]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Last Login:"})," ",eI.user.lastLoginAt?(0,ei.WU)(new Date(eI.user.lastLoginAt),"MMM d, yyyy HH:mm"):"Never"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eI.user.isBlocked?t.jsx(C.C,{variant:"destructive",children:"Blocked"}):t.jsx(C.C,{variant:"outline",children:"Active"})]})]}),eI.user.blockReason&&(0,t.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",eI.user.blockReason]})]}),eI.company&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(A.Z,{className:"h-4 w-4"})," Company"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eI.company.name]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Members:"})," ",eI.company.memberCount]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQs:"})," ",eI.company.boqCount]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eI.company.isBlocked?t.jsx(C.C,{variant:"destructive",children:"Blocked"}):t.jsx(C.C,{variant:"outline",children:"Active"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(K.Z,{className:"h-4 w-4"})," Billing"]}),eI.billing?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),eI.billing.accessOverride?(0,t.jsxs)(C.C,{className:"bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",eI.billing.overridePlan||"business",")"]}):t.jsx(C.C,{variant:"secondary",className:"capitalize",children:eI.billing.planKey||"None"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),aC(eI.billing.status)]}),eI.billing.stripeCustomerId&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",t.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eI.billing.stripeCustomerId})]}),eI.billing.stripeSubscriptionId&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Stripe Subscription:"})," ",t.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eI.billing.stripeSubscriptionId})]}),eI.billing.currentCouponCode&&(0,t.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Active Coupon:"}),(0,t.jsxs)(C.C,{variant:"outline",className:"bg-yellow-50",children:[t.jsx(T,{className:"w-3 h-3 mr-1"}),eI.billing.currentCouponCode]}),(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>aj(eI.company.id),children:[t.jsx(p.Z,{className:"h-3 w-3"})," Remove"]})]}),eI.billing.currentPeriodEnd&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,ei.WU)(new Date(eI.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing information"})]}),eI.invoices.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(H,{className:"h-4 w-4"})," Payment History"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:eI.invoices.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)," ",e.currency.toUpperCase()]}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{className:"text-muted-foreground",children:(0,ei.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(C.C,{variant:"outline",className:"text-xs capitalize",children:e.status}),e.hostedInvoiceUrl&&t.jsx("a",{href:e.hostedInvoiceUrl,target:"_blank",rel:"noopener noreferrer",children:t.jsx(W.Z,{className:"h-3 w-3 text-muted-foreground"})})]})]},e.id))})]}),eI.couponRedemptions.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(T,{className:"h-4 w-4"})," Coupon History"]}),t.jsx("div",{className:"space-y-2",children:eI.couponRedemptions.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.couponCode}),t.jsx("span",{className:"ml-2 text-muted-foreground",children:"free_forever"===e.couponType?"Free Forever":"Trial"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:(0,ei.WU)(new Date(e.redeemedAt),"MMM d, yyyy")}),e.revokedAt&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[t.jsx("h3",{className:"font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.jsx(i.z,{variant:eI.user.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("user",eI.user.id,eI.user.email,eI.user.isBlocked),children:eI.user.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(J,{className:"h-4 w-4 mr-2"})," Unblock User"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block User"]})}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>am(eR),children:[t.jsx(Y,{className:"h-4 w-4 mr-2"})," Password Reset"]}),eI.company&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>ap(eI.company.id,eI.company.name,!!eI.billing?.accessOverride),children:[t.jsx(P.Z,{className:"h-4 w-4 mr-2"}),eI.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),t.jsx(i.z,{variant:eI.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("company",eI.company.id,eI.company.name,eI.company.isBlocked),children:eI.company.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(J,{className:"h-4 w-4 mr-2"})," Unblock Company"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block Company"]})})]})]}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t border-red-200",children:[t.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Danger Zone"}),(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>{sp(""),sx(!0)},disabled:!!eI.user.deletedAt,children:[t.jsx(X.Z,{className:"h-4 w-4 mr-2"}),eI.user.deletedAt?"User Deleted":"Delete User"]}),eI.user.deletedAt&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Deleted on ",(0,ei.WU)(new Date(eI.user.deletedAt),"MMM d, yyyy")]})]})]})]}):null]})}),t.jsx(j,{open:e9,onOpenChange:se,children:(0,t.jsxs)(f,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,t.jsxs)(N,{children:[t.jsx(b,{children:"Company Details"}),t.jsx(w,{children:e4?.name})]}),e6?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(U.Z,{className:"h-6 w-6 animate-spin"})}):e5?(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(A.Z,{className:"h-4 w-4"})," Company Info"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Name:"}),sn?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(n.I,{value:sd,onChange:e=>so(e.target.value),className:"h-8"}),t.jsx(i.z,{size:"sm",onClick:s1,children:t.jsx(V.Z,{className:"h-4 w-4"})}),t.jsx(i.z,{size:"sm",variant:"ghost",onClick:()=>sc(!1),children:t.jsx(p.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"font-medium",children:e5.company.name}),t.jsx(i.z,{size:"sm",variant:"ghost",onClick:()=>{so(e5.company.name),sc(!0)},children:t.jsx(Q.Z,{className:"h-3 w-3"})})]})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",(0,ei.WU)(new Date(e5.company.createdAt),"MMM d, yyyy HH:mm")]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Currency:"})," ",e5.company.currencySymbol]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e5.company.deletedAt?t.jsx(C.C,{variant:"destructive",children:"Deleted"}):e5.company.isBlocked?t.jsx(C.C,{variant:"destructive",children:"Blocked"}):t.jsx(C.C,{variant:"outline",children:"Active"})]})]}),e5.company.blockReason&&(0,t.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",e5.company.blockReason]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(K.Z,{className:"h-4 w-4"})," Billing"]}),e5.billing?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),e5.billing.accessOverride?(0,t.jsxs)(C.C,{className:"bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",e5.billing.overridePlan||"business",")"]}):t.jsx(C.C,{variant:"secondary",className:"capitalize",children:e5.billing.planKey||"free"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),aC(e5.billing.status)]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Interval:"})," ",e5.billing.billingInterval||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Seats:"})," ",e5.billing.seatQuantity||1]}),e5.billing.stripeCustomerId&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",t.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:e5.billing.stripeCustomerId})]}),e5.billing.currentPeriodEnd&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,ei.WU)(new Date(e5.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing record"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(H,{className:"h-4 w-4"})," Usage"]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.boqsThisPeriod}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"BOQs this period"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.totalBoqs}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Total BOQs"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.totalCustomers}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Customers"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.boqTemplates}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"BOQ Templates"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.coverTemplates}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Cover Templates"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold",children:e5.usage.activeMembersCount}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Members"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(S.Z,{className:"h-4 w-4"})," Members (",e5.members.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e5.members.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border ${e.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:e.fullName||e.email}),t.jsx(C.C,{variant:"ADMIN"===e.role?"default":"secondary",className:"text-xs",children:e.role}),!e.isActive&&t.jsx(C.C,{variant:"outline",className:"text-xs",children:"Inactive"}),e.isBlocked&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground flex flex-wrap gap-x-3 gap-y-1 mt-1",children:[t.jsx("span",{children:e.email}),e.country&&(0,t.jsxs)("span",{children:[t.jsx(B.Z,{className:"inline h-3 w-3 mr-1"}),e.country]}),e.phone&&(0,t.jsxs)("span",{children:[t.jsx(D.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]})]})]}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>{let s=x.find(s=>s.id===e.id);s?(s0(),an(s)):er.ZP.error("User not in current view. Search for them in Users tab.")},children:t.jsx(L.Z,{className:"h-4 w-4"})})]},e.id))})]}),e5.grants.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(P.Z,{className:"h-4 w-4"})," Access Grants"]}),t.jsx("div",{className:"space-y-2",children:e5.grants.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx(C.C,{variant:"outline",className:"mr-2",children:e.grantType}),e.planKey&&t.jsx("span",{className:"capitalize",children:e.planKey})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.endsAt&&(0,t.jsxs)("span",{children:["Expires: ",(0,ei.WU)(new Date(e.endsAt),"MMM d, yyyy")]}),e.revokedAt&&t.jsx(C.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),e5.billing?.invoices&&e5.billing.invoices.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(z.Z,{className:"h-4 w-4"})," Recent Invoices"]}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e5.billing.invoices.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)]}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{className:"text-muted-foreground",children:(0,ei.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),t.jsx(C.C,{variant:"outline",className:"text-xs capitalize",children:e.status})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[t.jsx("h3",{className:"font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>ap(e5.company.id,e5.company.name,!!e5.billing?.accessOverride),children:[t.jsx(P.Z,{className:"h-4 w-4 mr-2"}),e5.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),t.jsx(i.z,{variant:e5.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("company",e5.company.id,e5.company.name,e5.company.isBlocked),children:e5.company.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(J,{className:"h-4 w-4 mr-2"})," Unblock"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block"]})}),!e5.company.deletedAt&&(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>s2(e4),children:[t.jsx(X.Z,{className:"h-4 w-4 mr-2"})," Delete Company"]})]})]})]}):null]})}),t.jsx(m.Vq,{open:ss,onOpenChange:sa,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2 text-red-600",children:[t.jsx(X.Z,{className:"h-5 w-5"}),"Delete Company"]}),(0,t.jsxs)(m.Be,{children:['This action will permanently disable access for all members of "',e4?.name,'".']})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm",children:[t.jsx("p",{className:"font-medium text-red-800 mb-2",children:"Warning: This action is destructive"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-red-700 space-y-1",children:[t.jsx("li",{children:"All members will lose access immediately"}),t.jsx("li",{children:"Active Stripe subscription will be canceled"}),t.jsx("li",{children:"Company data will be archived (soft delete)"}),t.jsx("li",{children:"BOQs and templates will be preserved but inaccessible"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"deleteConfirm",className:"text-sm font-medium",children:["Type ",t.jsx("span",{className:"font-mono font-bold text-red-600",children:"DELETE"})," to confirm"]}),t.jsx(n.I,{id:"deleteConfirm",value:st,onChange:e=>sl(e.target.value),placeholder:"DELETE",className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>sa(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{variant:"destructive",onClick:s4,disabled:"DELETE"!==st||sr,children:[sr&&t.jsx(U.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete Company"]})]})]})}),t.jsx(m.Vq,{open:sm,onOpenChange:sx,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2 text-red-600",children:[t.jsx(X.Z,{className:"h-5 w-5"}),"Delete User"]}),(0,t.jsxs)(m.Be,{children:['This will disable login and access for "',eR?.email,'".']})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm",children:[t.jsx("p",{className:"font-medium text-red-800 mb-2",children:"Impact of deleting this user"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-red-700 space-y-1",children:[t.jsx("li",{children:"User will not be able to log in"}),t.jsx("li",{children:"All company memberships will be deactivated"}),t.jsx("li",{children:"Their created BOQs and templates will remain intact"}),t.jsx("li",{children:"This is a soft delete - data is preserved for recovery"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"deleteUserConfirm",className:"text-sm font-medium",children:["Type ",t.jsx("span",{className:"font-mono font-bold text-red-600",children:"DELETE"})," to confirm"]}),t.jsx(n.I,{id:"deleteUserConfirm",value:sh,onChange:e=>sp(e.target.value),placeholder:"DELETE",className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>sx(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{variant:"destructive",onClick:s3,disabled:"DELETE"!==sh||su,children:[su&&t.jsx(U.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete User"]})]})]})}),t.jsx(m.Vq,{open:sg,onOpenChange:sv,children:(0,t.jsxs)(m.cZ,{children:[t.jsx(m.fK,{children:(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(ee.Z,{className:"h-5 w-5 text-yellow-500"}),sy?.isBlocked?"Unblock":"Block"," ",sy?.type==="company"?"Company":"User"]})}),(0,t.jsxs)("div",{className:"py-4",children:[t.jsx("p",{className:"text-muted-foreground mb-4",children:sy?.isBlocked?`Are you sure you want to unblock "${sy?.name}"?`:`Are you sure you want to block "${sy?.name}"? They will lose access to all /app/* pages.`}),!sy?.isBlocked&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"blockReason",children:"Block Reason (optional)"}),t.jsx(n.I,{id:"blockReason",value:sN,onChange:e=>sb(e.target.value),placeholder:"e.g., Abuse, Non-payment",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(en.X,{id:"cancelSub",checked:sw,onCheckedChange:e=>sC(e)}),t.jsx(c._,{htmlFor:"cancelSub",className:"font-normal cursor-pointer",children:"Cancel Stripe subscription immediately"})]})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>sv(!1),children:"Cancel"}),t.jsx(i.z,{variant:sy?.isBlocked?"default":"destructive",onClick:ao,children:sy?.isBlocked?"Unblock":"Block"})]})]})}),t.jsx(m.Vq,{open:sk,onOpenChange:sP,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-5 w-5"})," Password Reset Options"]}),t.jsx(m.Be,{children:"For security, passwords cannot be viewed. Use these options to help the user reset their password."})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm font-medium mb-2",children:["User: ",sZ?.email]}),sZ?.forcePasswordReset&&t.jsx(C.C,{variant:"outline",className:"text-yellow-700 bg-yellow-50",children:"Force Reset Enabled"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>ax("generate_link"),children:[t.jsx(es,{className:"h-4 w-4 mr-2"})," Generate Reset Link"]}),sA&&(0,t.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-sm",children:[t.jsx("p",{className:"text-green-800 mb-2",children:"Reset link generated:"}),t.jsx("code",{className:"block text-xs bg-white p-2 rounded break-all",children:sA}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>ah(sA),children:[t.jsx(es,{className:"h-3 w-3 mr-2"})," Copy"]})]}),t.jsx(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>ax(sZ?.forcePasswordReset?"clear_force_reset":"force_reset"),children:sZ?.forcePasswordReset?(0,t.jsxs)(t.Fragment,{children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"})," Clear Force Reset Flag"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(ee.Z,{className:"h-4 w-4 mr-2"})," Force Reset on Next Login"]})})]})]}),t.jsx(m.cN,{children:t.jsx(i.z,{variant:"outline",onClick:()=>sP(!1),children:"Close"})})]})}),t.jsx(m.Vq,{open:sz,onOpenChange:sF,children:(0,t.jsxs)(m.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(P.Z,{className:"h-5 w-5 text-purple-500"}),sU?.hasGrant?"Revoke":"Grant"," Admin Access"]}),t.jsx(m.Be,{children:sU?.hasGrant?"Remove admin-granted access for this company.":"Grant admin access to bypass subscription requirements."})]}),t.jsx("div",{className:"py-4",children:sU?.hasGrant?t.jsx("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-sm",children:[(0,t.jsxs)("p",{className:"text-amber-800",children:["Revoking access for ",t.jsx("strong",{children:sU?.companyName})," will:"]}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-amber-700 mt-2 space-y-1",children:[t.jsx("li",{children:"Remove admin-granted plan access"}),t.jsx("li",{children:"Company will fall back to Free plan or existing subscription"}),t.jsx("li",{children:"No data will be deleted"})]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg text-sm",children:(0,t.jsxs)("p",{className:"text-purple-800",children:["Granting access to ",t.jsx("strong",{children:sU?.companyName})," will override any existing subscription."]})}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"freeForeverPlan",children:"Plan Level"}),(0,t.jsxs)(o.Ph,{value:sT,onValueChange:e=>sB(e),children:[t.jsx(o.i4,{className:"mt-1",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"business",children:"Business (Unlimited BOQs, Team Features)"}),t.jsx(o.Ql,{value:"advance",children:"Advance (50 BOQs/month)"}),t.jsx(o.Ql,{value:"starter",children:"Starter (10 BOQs/month)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"grantExpiresAt",children:["Expiry Date ",t.jsx("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),t.jsx(n.I,{id:"grantExpiresAt",type:"datetime-local",value:sD,onChange:e=>s_(e.target.value),className:"mt-1"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty for permanent access. If set, access expires automatically."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"grantNotes",children:["Notes ",t.jsx("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),t.jsx(n.I,{id:"grantNotes",value:sL,onChange:e=>sq(e.target.value),placeholder:"e.g., Early adopter, Partnership deal",className:"mt-1"})]})]})}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>sF(!1),disabled:sR,children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:au,disabled:sR,children:[sR&&t.jsx(U.Z,{className:"h-4 w-4 mr-2 animate-spin"}),sU?.hasGrant?"Revoke Access":"Grant Access"]})]})]})}),t.jsx(m.Vq,{open:sI,onOpenChange:s$,children:(0,t.jsxs)(m.cZ,{children:[t.jsx(m.fK,{children:t.jsx(m.$N,{children:"Create New Coupon"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"code",children:"Coupon Code"}),t.jsx(n.I,{id:"code",value:sQ.code,onChange:e=>sV(s=>({...s,code:e.target.value.toUpperCase()})),placeholder:"e.g., TRIAL14, FREEFOREVER",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"type",children:"Coupon Type"}),(0,t.jsxs)(o.Ph,{value:sQ.type,onValueChange:e=>sV(s=>({...s,type:e})),children:[t.jsx(o.i4,{className:"mt-1",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"trial_days",children:"Trial Days"}),t.jsx(o.Ql,{value:"free_forever",children:"Free Forever"})]})]})]}),"trial_days"===sQ.type&&(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"trialDays",children:"Trial Days"}),t.jsx(n.I,{id:"trialDays",type:"number",min:"1",max:"365",value:sQ.trialDays,onChange:e=>sV(s=>({...s,trialDays:parseInt(e.target.value)||14})),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Allowed Plans (optional)"}),(0,t.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(en.X,{checked:sQ.allowedPlans.includes("starter"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"starter"]:s.allowedPlans.filter(e=>"starter"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Starter"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(en.X,{checked:sQ.allowedPlans.includes("advance"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"advance"]:s.allowedPlans.filter(e=>"advance"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Advance"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(en.X,{checked:sQ.allowedPlans.includes("business"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"business"]:s.allowedPlans.filter(e=>"business"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Business"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave unchecked for all plans"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"maxRedemptions",children:"Max Redemptions (optional)"}),t.jsx(n.I,{id:"maxRedemptions",type:"number",min:"1",value:sQ.maxRedemptions,onChange:e=>sV(s=>({...s,maxRedemptions:e.target.value})),placeholder:"Leave empty for unlimited",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),t.jsx(n.I,{id:"expiresAt",type:"date",value:sQ.expiresAt,onChange:e=>sV(s=>({...s,expiresAt:e.target.value})),className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>s$(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:ag,disabled:sG,children:[sG&&t.jsx(U.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Coupon"]})]})]})})]})})}function ed({coupon:e,onToggle:s,onArchive:a,onDelete:l,isArchived:r=!1}){return(0,t.jsxs)("div",{className:"p-4 rounded-lg border bg-white flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.code}),t.jsx(C.C,{variant:"free_forever"===e.type?"default":"secondary",className:"text-xs",children:"free_forever"===e.type?"Free Forever":`${e.trialDays} Day Trial`}),!e.active&&!r&&t.jsx(C.C,{variant:"outline",className:"text-xs",children:"Disabled"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.allowedPlans.length>0?`For ${e.allowedPlans.map(e=>"starter"===e?"Starter":"advance"===e?"Advance":"Business").join(", ")}`:"All plans"," ","• Used ",e.currentRedemptions,e.maxRedemptions?`/${e.maxRedemptions}`:""," times",e.expiresAt&&` • Expires ${(0,ei.WU)(new Date(e.expiresAt),"MMM d, yyyy")}`]})]}),!r&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{variant:"ghost",size:"sm",onClick:s,title:e.active?"Disable":"Enable",children:e.active?t.jsx(ea,{className:"h-5 w-5 text-green-600"}):t.jsx(et,{className:"h-5 w-5 text-muted-foreground"})}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:a,title:"Archive",children:t.jsx(el,{className:"h-4 w-4 text-muted-foreground"})}),0===e.currentRedemptions&&t.jsx(i.z,{variant:"ghost",size:"sm",onClick:l,title:"Delete",children:t.jsx(X.Z,{className:"h-4 w-4 text-red-500"})})]}),r&&0===e.currentRedemptions&&t.jsx(i.z,{variant:"ghost",size:"sm",onClick:l,title:"Delete",children:t.jsx(X.Z,{className:"h-4 w-4 text-red-500"})})]})}},31606:(e,s,a)=>{"use strict";a.d(s,{C:()=>n});var t=a(62901);a(24383);var l=a(47279),r=a(68637);let i=(0,l.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gradient-to-r from-purple-500 to-lavender-500 text-white",secondary:"border-transparent bg-purple-100 text-purple-700 hover:bg-purple-200",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border-purple-200 text-purple-700 bg-white",success:"border-transparent bg-emerald-100 text-emerald-700",warning:"border-transparent bg-amber-100 text-amber-700"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return t.jsx("div",{className:(0,r.cn)(i({variant:s}),e),...a})}},84227:(e,s,a)=>{"use strict";a.d(s,{SP:()=>d,dr:()=>c,mQ:()=>n,nU:()=>o});var t=a(62901),l=a(24383),r=a(61380),i=a(68637);let n=r.fC,c=l.forwardRef(({className:e,...s},a)=>t.jsx(r.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=r.aV.displayName;let d=l.forwardRef(({className:e,...s},a)=>t.jsx(r.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=r.xz.displayName;let o=l.forwardRef(({className:e,...s},a)=>t.jsx(r.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=r.VY.displayName},76244:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},99311:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},79357:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},83898:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},91334:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},75811:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},6e4:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},19918:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},32614:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},91046:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},21680:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},83292:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o,dynamic:()=>d});var t=a(83537),l=a(57978),r=a(86023),i=a(15438),n=a(90391);let c=(0,a(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/_components/glorand-admin-client.tsx#GlorandAdminClient`),d="force-dynamic";async function o(){let e=await (0,l.getServerSession)(r.L);e?.user||(0,i.redirect)("/login");let s=e.user.email;return(0,n.Mz)(s)||(0,i.redirect)("/app/dashboard"),t.jsx(c,{adminEmail:s})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[4372,7329,5990,5410,1263,2392,4866,5083,7463,7221,3153,391,9845,4297],()=>a(86715));module.exports=t})();