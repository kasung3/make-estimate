(()=>{var e={};e.id=4308,e.ids=[4308],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},86715:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d}),t(83292),t(83336),t(71363);var a=t(36576),r=t(72007),n=t(21818),l=t.n(n),i=t(88897),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["app",{children:["glorand",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,83292)),"/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,83336)),"/home/ubuntu/make_estimate/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"],m="/app/glorand/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/glorand/page",pathname:"/app/glorand",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61548:(e,s,t)=>{Promise.resolve().then(t.bind(t,88565))},88565:(e,s,t)=>{"use strict";t.d(s,{GlorandAdminClient:()=>el});var a=t(62901),r=t(24383),n=t(22270),l=t(27878),i=t(250),c=t(82657),d=t(23803),o=t(72388),m=t(65923),u=t(18832),x=t(47279),p=t(42594),h=t(68637);let j=u.fC;u.xz,u.x8;let f=u.h_,g=r.forwardRef(({className:e,...s},t)=>a.jsx(u.aV,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));g.displayName=u.aV.displayName;let y=(0,x.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),v=r.forwardRef(({side:e="right",className:s,children:t,...r},n)=>(0,a.jsxs)(f,{children:[a.jsx(g,{}),(0,a.jsxs)(u.VY,{ref:n,className:(0,h.cn)(y({side:e}),s),...r,children:[t,(0,a.jsxs)(u.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(p.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));v.displayName=u.VY.displayName;let N=({className:e,...s})=>a.jsx("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});N.displayName="SheetHeader";let b=r.forwardRef(({className:e,...s},t)=>a.jsx(u.Dx,{ref:t,className:(0,h.cn)("text-lg font-semibold text-foreground",e),...s}));b.displayName=u.Dx.displayName;let w=r.forwardRef(({className:e,...s},t)=>a.jsx(u.dk,{ref:t,className:(0,h.cn)("text-sm text-muted-foreground",e),...s}));w.displayName=u.dk.displayName;var k=t(31606),C=t(5102),P=t(99311),S=t(44928),Z=t(66843),M=t(1320),_=t(6731),R=t(79357),A=t(91046),F=t(10333),O=t(71945);let U=(0,O.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var T=t(32614),E=t(76021),z=t(91334),B=t(96527),L=t(60004);let q=(0,O.Z)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);var D=t(97718);let I=(0,O.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var $=t(53275),Q=t(85453),V=t(6e4),G=t(76244);let K=(0,O.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var H=t(83898);let W=(0,O.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var X=t(21680);let J=(0,O.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Y=(0,O.Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),ee=(0,O.Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),es=(0,O.Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var et=t(71028),ea=t(39350),er=t(27221),en=t(16098);function el({adminEmail:e}){let[s,t]=(0,r.useState)("users"),[u,x]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[O,Y]=(0,r.useState)([]),[ee,es]=(0,r.useState)(!0),[et,el]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[eo,em]=(0,r.useState)(null),[eu,ex]=(0,r.useState)(!1),[ep,eh]=(0,r.useState)({name:"",priceMonthlyUsdCents:0,priceAnnualUsdCents:"",boqLimitPerPeriod:"",boqTemplatesLimit:"",coverTemplatesLimit:"",features:[],isMostPopular:!1,sortOrder:0,active:!0}),[ej,ef]=(0,r.useState)(""),[eg,ey]=(0,r.useState)(!1),[ev,eN]=(0,r.useState)(null),[eb,ew]=(0,r.useState)(null),[ek,eC]=(0,r.useState)(""),[eP,eS]=(0,r.useState)(""),[eZ,eM]=(0,r.useState)(""),[e_,eR]=(0,r.useState)(""),[eA,eF]=(0,r.useState)(""),[eO,eU]=(0,r.useState)(""),[eT,eE]=(0,r.useState)("newest"),[ez,eB]=(0,r.useState)(null),[eL,eq]=(0,r.useState)(null),[eD,eI]=(0,r.useState)(!1),[e$,eQ]=(0,r.useState)(!1),[eV,eG]=(0,r.useState)(!1),[eK,eH]=(0,r.useState)(null),[eW,eX]=(0,r.useState)(""),[eJ,eY]=(0,r.useState)(!0),[e0,e1]=(0,r.useState)(!1),[e2,e4]=(0,r.useState)(null),[e3,e5]=(0,r.useState)(""),[e8,e6]=(0,r.useState)(!1),[e7,e9]=(0,r.useState)(null),[se,ss]=(0,r.useState)("business"),[st,sa]=(0,r.useState)(!1),[sr,sn]=(0,r.useState)({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),[sl,si]=(0,r.useState)(!1),sc=async()=>{es(!0);try{let e=new URLSearchParams({page:ec.page.toString(),limit:ec.limit.toString(),sortBy:eT});eZ&&e.set("query",eZ),e_&&e.set("plan",e_),eA&&e.set("status",eA),eO&&e.set("blocked",eO);let s=await fetch(`/api/admin/users?${e}`);if(!s.ok)throw Error("Failed to fetch");let t=await s.json();x(t.users||[]),ed(t.pagination)}catch(e){ea.ZP.error("Failed to load users")}finally{es(!1)}},sd=async()=>{es(!0);try{let e=await fetch("/api/admin/coupons");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();f(s.coupons||[])}catch(e){ea.ZP.error("Failed to load coupons")}finally{es(!1)}},so=async()=>{es(!0);try{let e=await fetch("/api/admin/accounts?type=companies");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();y(s.companies||[])}catch(e){ea.ZP.error("Failed to load companies")}finally{es(!1)}},sm=async()=>{el(!0);try{let e=await fetch("/api/admin/plans");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();Y(s||[])}catch(e){ea.ZP.error("Failed to load billing plans")}finally{el(!1)}},su=e=>{em(e),eh({name:e.name,priceMonthlyUsdCents:e.priceMonthlyUsdCents,priceAnnualUsdCents:e.priceAnnualUsdCents??"",boqLimitPerPeriod:e.boqLimitPerPeriod??"",boqTemplatesLimit:e.boqTemplatesLimit??"",coverTemplatesLimit:e.coverTemplatesLimit??"",features:e.features||[],isMostPopular:e.isMostPopular||!1,sortOrder:e.sortOrder,active:e.active}),ef(""),ex(!0)},sx=async()=>{if(eo){ey(!0);try{let e=await fetch(`/api/admin/plans/${eo.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ep.name,priceMonthlyUsdCents:ep.priceMonthlyUsdCents,priceAnnualUsdCents:""===ep.priceAnnualUsdCents?null:Number(ep.priceAnnualUsdCents),boqLimitPerPeriod:""===ep.boqLimitPerPeriod?null:Number(ep.boqLimitPerPeriod),boqTemplatesLimit:""===ep.boqTemplatesLimit?null:Number(ep.boqTemplatesLimit),coverTemplatesLimit:""===ep.coverTemplatesLimit?null:Number(ep.coverTemplatesLimit),features:ep.features,isMostPopular:ep.isMostPopular,sortOrder:ep.sortOrder,active:ep.active})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update plan")}ea.ZP.success("Plan updated successfully");let s=eo.priceMonthlyUsdCents!==ep.priceMonthlyUsdCents,t=(eo.priceAnnualUsdCents??"")!==ep.priceAnnualUsdCents;(s||t)&&ea.ZP.success("New Stripe price(s) created for updated amounts",{duration:5e3}),ex(!1),sm()}catch(e){ea.ZP.error(e.message||"Failed to update plan")}finally{ey(!1)}}},sp=()=>{ej.trim()&&(eh(e=>({...e,features:[...e.features,ej.trim()]})),ef(""))},sh=e=>{eh(s=>({...s,features:s.features.filter((s,t)=>t!==e)}))},sj=e=>{eN(e)},sf=(e,s)=>{if(e.preventDefault(),null===ev||ev===s)return;let t=[...ep.features],a=t[ev];t.splice(ev,1),t.splice(s,0,a),eh(e=>({...e,features:t})),eN(s)},sg=()=>{eN(null)},sy=e=>{ew(e),eC(ep.features[e])},sv=()=>{if(null===eb)return;let e=ek.trim();e&&eh(s=>({...s,features:s.features.map((s,t)=>t===eb?e:s)})),ew(null),eC("")},sN=()=>{ew(null),eC("")},sb=async e=>{eI(!0);try{let s=await fetch(`/api/admin/users/${e}`);if(!s.ok)throw Error("Failed to fetch");let t=await s.json();eq(t)}catch(e){ea.ZP.error("Failed to load user details")}finally{eI(!1)}},sw=e=>{eB(e),eQ(!0),sb(e.id)},sk=(e,s,t,a)=>{eH({type:e,id:s,name:t,isBlocked:a}),eX(""),eY(!0),eG(!0)},sC=async()=>{if(eK)try{let e="user"===eK.type?`/api/admin/users/${eK.id}/${eK.isBlocked?"unblock":"block"}`:`/api/admin/companies/${eK.id}/${eK.isBlocked?"unblock":"block"}`;if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockReason:eK.isBlocked?void 0:eW,cancelSubscription:eK.isBlocked?void 0:eJ})})).ok)throw Error("Failed to update");ea.ZP.success(eK.isBlocked?"Unblocked successfully":"Blocked successfully"),eG(!1),"user"===eK.type?sc():so(),ez&&sb(ez.id)}catch(e){ea.ZP.error("Failed to update block status")}},sP=e=>{e4(e),e5(""),e1(!0)},sS=async e=>{if(e2)try{let s=await fetch(`/api/admin/users/${e2.id}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed");"generate_link"===e&&t.resetLink&&e5(t.resetLink),ea.ZP.success(t.message),sc(),ez&&sb(ez.id)}catch(e){ea.ZP.error(e.message||"Failed to process password reset")}},sZ=e=>{navigator.clipboard.writeText(e),ea.ZP.success("Copied to clipboard")},sM=(e,s,t)=>{e9({companyId:e,companyName:s,hasGrant:t}),ss("business"),e6(!0)},s_=async()=>{if(e7)try{let e=e7.hasGrant?`/api/admin/companies/${e7.companyId}/revoke-free-forever`:`/api/admin/companies/${e7.companyId}/grant-free-forever`,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:se})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed");ea.ZP.success(t.message),e6(!1),sc(),so(),ez&&sb(ez.id)}catch(e){ea.ZP.error(e.message||"Failed to update free access")}},sR=async e=>{if(confirm("Are you sure you want to remove the coupon/discount from this company?"))try{let s=await fetch(`/api/admin/companies/${e}/remove-coupon`,{method:"POST",headers:{"Content-Type":"application/json"}}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed");ea.ZP.success(t.message),sc(),ez&&sb(ez.id)}catch(e){ea.ZP.error(e.message||"Failed to remove coupon")}},sA=async()=>{if(!sr.code.trim()){ea.ZP.error("Coupon code is required");return}si(!0);try{let e=await fetch("/api/admin/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:sr.code,type:sr.type,trialDays:"trial_days"===sr.type?sr.trialDays:void 0,allowedPlans:sr.allowedPlans.length>0?sr.allowedPlans:void 0,maxRedemptions:sr.maxRedemptions?parseInt(sr.maxRedemptions):void 0,expiresAt:sr.expiresAt||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create");ea.ZP.success("Coupon created!"),sa(!1),sn({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),sd()}catch(e){ea.ZP.error(e.message||"Failed to create coupon")}finally{si(!1)}},sF=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!e.active})})).ok)throw Error("Failed to update");ea.ZP.success(e.active?"Coupon disabled":"Coupon enabled"),sd()}catch(e){ea.ZP.error("Failed to update coupon")}},sO=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({archived:!0,active:!1})})).ok)throw Error("Failed to archive");ea.ZP.success("Coupon archived"),sd()}catch(e){ea.ZP.error("Failed to archive coupon")}},sU=async e=>{if(e.currentRedemptions>0){ea.ZP.error("Cannot delete used coupons. Archive instead.");return}if(confirm(`Delete coupon "${e.code}"? This cannot be undone.`))try{let s=await fetch(`/api/admin/coupons/${e.id}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete")}ea.ZP.success("Coupon deleted"),sd()}catch(e){ea.ZP.error(e.message||"Failed to delete coupon")}},sT=h.filter(e=>!e.archived),sE=h.filter(e=>e.archived),sz=e=>{let s=e.billing;return s?"admin_grant"===s.accessOverride||"free_forever"===s.accessOverride?(0,a.jsxs)(k.C,{className:"text-xs bg-purple-100 text-purple-800",children:[a.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}):"business"===s.planKey?a.jsx(k.C,{className:"text-xs bg-blue-100 text-blue-800",children:"Business"}):"starter"===s.planKey?a.jsx(k.C,{className:"text-xs bg-green-100 text-green-800",children:"Starter"}):a.jsx(k.C,{variant:"outline",className:"text-xs",children:"No Plan"}):a.jsx(k.C,{variant:"outline",className:"text-xs",children:"No Plan"})},sB=e=>e?a.jsx(k.C,{className:`text-xs ${{active:"bg-green-100 text-green-800",trialing:"bg-yellow-100 text-yellow-800",past_due:"bg-red-100 text-red-800",canceled:"bg-gray-100 text-gray-800",incomplete:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e}):a.jsx(k.C,{variant:"outline",className:"text-xs",children:"None"});return a.jsx(n.AppLayout,{children:(0,a.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(S.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Platform Admin"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Logged in as ",e]})]})]}),(0,a.jsxs)(C.mQ,{value:s,onValueChange:t,children:[(0,a.jsxs)(C.dr,{className:"mb-6",children:[(0,a.jsxs)(C.SP,{value:"users",className:"gap-2",children:[a.jsx(Z.Z,{className:"h-4 w-4"})," Users"]}),(0,a.jsxs)(C.SP,{value:"companies",className:"gap-2",children:[a.jsx(M.Z,{className:"h-4 w-4"})," Companies"]}),(0,a.jsxs)(C.SP,{value:"coupons",className:"gap-2",children:[a.jsx(_.Z,{className:"h-4 w-4"})," Coupons"]}),(0,a.jsxs)(C.SP,{value:"plans",className:"gap-2",children:[a.jsx(R.Z,{className:"h-4 w-4"})," Plans"]})]}),a.jsx(C.nU,{value:"users",children:(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[a.jsx(d.ll,{children:"User Management"}),a.jsx(d.SZ,{children:"Search and manage all platform users"})]}),(0,a.jsxs)(d.aY,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(A.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(i.I,{placeholder:"Search by name, email, company name, or phone...",value:eP,onChange:e=>{eS(e.target.value),ed(e=>({...e,page:1}))},className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(o.Ph,{value:e_,onValueChange:e=>{eR(e),ed(e=>({...e,page:1}))},children:[a.jsx(o.i4,{className:"w-[130px]",children:a.jsx(o.ki,{placeholder:"Plan"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All Plans"}),a.jsx(o.Ql,{value:"business",children:"Business"}),a.jsx(o.Ql,{value:"starter",children:"Starter"}),a.jsx(o.Ql,{value:"free_forever",children:"Admin Grant"}),a.jsx(o.Ql,{value:"none",children:"No Plan"})]})]}),(0,a.jsxs)(o.Ph,{value:eA,onValueChange:e=>{eF(e),ed(e=>({...e,page:1}))},children:[a.jsx(o.i4,{className:"w-[130px]",children:a.jsx(o.ki,{placeholder:"Status"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All Status"}),a.jsx(o.Ql,{value:"active",children:"Active"}),a.jsx(o.Ql,{value:"trialing",children:"Trialing"}),a.jsx(o.Ql,{value:"past_due",children:"Past Due"}),a.jsx(o.Ql,{value:"canceled",children:"Canceled"}),a.jsx(o.Ql,{value:"none",children:"None"})]})]}),(0,a.jsxs)(o.Ph,{value:eO,onValueChange:e=>{eU(e),ed(e=>({...e,page:1}))},children:[a.jsx(o.i4,{className:"w-[130px]",children:a.jsx(o.ki,{placeholder:"Blocked"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All"}),a.jsx(o.Ql,{value:"blocked",children:"Blocked"}),a.jsx(o.Ql,{value:"unblocked",children:"Unblocked"})]})]}),(0,a.jsxs)(o.Ph,{value:eT,onValueChange:eE,children:[a.jsx(o.i4,{className:"w-[130px]",children:a.jsx(o.ki,{placeholder:"Sort"})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"newest",children:"Newest"}),a.jsx(o.Ql,{value:"oldest",children:"Oldest"}),a.jsx(o.Ql,{value:"name",children:"Name"}),a.jsx(o.Ql,{value:"email",children:"Email"})]})]})]})]}),ee?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(F.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===u.length?a.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No users found"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:u.map(e=>a.jsx("div",{className:`p-4 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors ${e.isBlocked||e.company?.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,onClick:()=>sw(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-medium truncate",children:e.email}),e.isBlocked&&a.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.company?.isBlocked&&a.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Company Blocked"}),sz(e),sB(e.billing?.status||null),e.billing?.currentCouponCode&&(0,a.jsxs)(k.C,{variant:"outline",className:"text-xs bg-yellow-50",children:[a.jsx(U,{className:"w-3 h-3 mr-1"}),e.billing.currentCouponCode]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[a.jsx("span",{children:e.fullName||e.name||"No name"}),a.jsx("span",{children:e.company?.name||"No company"}),e.phone&&(0,a.jsxs)("span",{children:[a.jsx(T.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]}),(0,a.jsxs)("span",{children:[a.jsx(E.Z,{className:"inline h-3 w-3 mr-1"}),"Joined ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]})]}),a.jsx(l.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),sw(e)},children:a.jsx(z.Z,{className:"h-4 w-4"})})]})},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(ec.page-1)*ec.limit+1," to"," ",Math.min(ec.page*ec.limit,ec.totalCount)," of"," ",ec.totalCount," users"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>ed(e=>({...e,page:e.page-1})),disabled:ec.page<=1,children:a.jsx(B.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm",children:["Page ",ec.page," of ",ec.totalPages]}),a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>ed(e=>({...e,page:e.page+1})),disabled:ec.page>=ec.totalPages,children:a.jsx(L.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),a.jsx(C.nU,{value:"companies",children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"Companies"})}),a.jsx(d.aY,{children:ee?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(F.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===g.length?a.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No companies found"}):a.jsx("div",{className:"space-y-3",children:g.map(e=>a.jsx("div",{className:`p-4 rounded-lg border ${e.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:e.name}),e.isBlocked&&a.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.billing?.accessOverride&&(0,a.jsxs)(k.C,{className:"text-xs bg-purple-100 text-purple-800",children:[a.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}),e.billing?.planKey&&a.jsx(k.C,{variant:"secondary",className:"text-xs capitalize",children:e.billing.planKey})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e._count.memberships," member",1!==e._count.memberships?"s":""," •"," ",e._count.boqs," BOQ",1!==e._count.boqs?"s":""," •"," ","Created ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]}),e.isBlocked&&e.blockReason&&(0,a.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Reason: ",e.blockReason]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>sM(e.id,e.name,!!e.billing?.accessOverride),children:[a.jsx(P.Z,{className:"h-4 w-4 mr-2"}),e.billing?.accessOverride?"Revoke":"Grant Free"]}),a.jsx(l.z,{variant:e.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("company",e.id,e.name,e.isBlocked),children:e.isBlocked?(0,a.jsxs)(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"})," Unblock"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S.Z,{className:"h-4 w-4 mr-2"})," Block"]})})]})]})},e.id))})})]})}),a.jsx(C.nU,{value:"coupons",children:(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[a.jsx(d.ll,{children:"Promo Codes / Coupons"}),(0,a.jsxs)(l.z,{onClick:()=>sa(!0),size:"sm",children:[a.jsx(D.Z,{className:"h-4 w-4 mr-2"})," Create Coupon"]})]}),a.jsx(d.aY,{children:ee?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(F.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):a.jsx("div",{className:"space-y-6",children:0===sT.length&&0===sE.length?a.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No coupons created yet"}):(0,a.jsxs)(a.Fragment,{children:[sT.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Active Coupons"}),a.jsx("div",{className:"space-y-3",children:sT.map(e=>a.jsx(ei,{coupon:e,onToggle:()=>sF(e),onArchive:()=>sO(e),onDelete:()=>sU(e)},e.id))})]}),sE.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Archived Coupons"}),a.jsx("div",{className:"space-y-3 opacity-60",children:sE.map(e=>a.jsx(ei,{coupon:e,onToggle:()=>{},onArchive:()=>{},onDelete:()=>sU(e),isArchived:!0},e.id))})]})]})})})]})}),a.jsx(C.nU,{value:"plans",children:(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[a.jsx(I,{className:"h-5 w-5"})," Billing Plans"]}),a.jsx(d.SZ,{children:"Manage pricing, quotas, and features. Price changes auto-create new Stripe prices."})]}),a.jsx(d.aY,{children:et?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(F.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===O.length?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No billing plans found. Run the seed script to create plans."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(e=>(0,a.jsxs)("div",{className:`p-6 rounded-xl border-2 ${e.active?"bg-white":"bg-gray-50 opacity-75"} ${e.isMostPopular?"border-primary":"border-gray-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-xl font-bold",children:e.name}),e.isMostPopular&&a.jsx(k.C,{className:"bg-primary text-white",children:"Most Popular"}),!e.active&&a.jsx(k.C,{variant:"secondary",children:"Inactive"})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Key: ",a.jsx("code",{className:"bg-gray-100 px-1 rounded",children:e.planKey}),"per_seat"===e.seatModel&&a.jsx(k.C,{variant:"outline",className:"ml-2 text-xs",children:"Per Seat"})]})]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>su(e),className:"gap-1",children:[a.jsx($.Z,{className:"h-3 w-3"})," Edit"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold",children:["$",(e.priceMonthlyUsdCents/100).toFixed(0),a.jsx("span",{className:"text-lg font-normal text-muted-foreground",children:"/mo"}),"per_seat"===e.seatModel&&a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/user"})]}),e.priceAnnualUsdCents&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",(e.priceAnnualUsdCents/100).toFixed(0),"/year","per_seat"===e.seatModel&&"/user"]})]}),(0,a.jsxs)("div",{className:"mb-4 text-sm space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"BOQ Limit:"}),a.jsx("span",{className:null===e.boqLimitPerPeriod?"text-green-600 font-medium":"",children:null===e.boqLimitPerPeriod?"Unlimited":`${e.boqLimitPerPeriod}/period`})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"BOQ Templates:"}),a.jsx("span",{className:null===e.boqTemplatesLimit?"text-green-600 font-medium":"",children:null===e.boqTemplatesLimit?"Unlimited":e.boqTemplatesLimit})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Cover Templates:"}),a.jsx("span",{className:null===e.coverTemplatesLimit?"text-green-600 font-medium":"",children:null===e.coverTemplatesLimit?"Unlimited":e.coverTemplatesLimit})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Features:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(e.features||[]).slice(0,5).map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Q.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:e})]},s)),(e.features||[]).length>5&&(0,a.jsxs)("li",{className:"text-xs text-muted-foreground",children:["+",(e.features||[]).length-5," more..."]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t text-xs text-muted-foreground space-y-1",children:[(0,a.jsxs)("div",{children:["Stripe Product: ",e.stripeProductId||"Not configured"]}),(0,a.jsxs)("div",{children:["Monthly Price ID: ",e.stripePriceIdMonthly||"Not configured"]}),(0,a.jsxs)("div",{children:["Annual Price ID: ",e.stripePriceIdAnnual||"Not configured"]}),(0,a.jsxs)("div",{children:["Sort Order: ",e.sortOrder]}),e.priceHistory&&e.priceHistory.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[a.jsx("span",{className:"font-medium",children:"Price History:"}),a.jsx("ul",{className:"ml-2",children:e.priceHistory.slice(0,3).map(e=>(0,a.jsxs)("li",{children:["$",(e.amountCents/100).toFixed(0)," (",e.interval,") - ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy"),e.isCurrent&&a.jsx(k.C,{className:"ml-1 text-xs",variant:"outline",children:"Current"})]},e.id))})]})]})]},e.id))})})]})})]}),a.jsx(m.Vq,{open:eu,onOpenChange:ex,children:(0,a.jsxs)(m.cZ,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsxs)(m.$N,{children:["Edit Plan: ",eo?.name]}),a.jsx(m.Be,{children:"Update pricing, quotas, and features. Price changes will create a new Stripe price."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Name"}),a.jsx(i.I,{value:ep.name,onChange:e=>eh(s=>({...s,name:e.target.value})),placeholder:"Plan name"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Monthly Price (USD cents)"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(i.I,{type:"number",value:ep.priceMonthlyUsdCents,onChange:e=>eh(s=>({...s,priceMonthlyUsdCents:parseInt(e.target.value)||0})),placeholder:"1900"})}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",(ep.priceMonthlyUsdCents/100).toFixed(2),"/mo"]})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Annual Price (USD cents)"}),a.jsx(i.I,{type:"number",value:ep.priceAnnualUsdCents,onChange:e=>eh(s=>({...s,priceAnnualUsdCents:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"Leave empty if no annual"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",ep.priceAnnualUsdCents?(Number(ep.priceAnnualUsdCents)/100).toFixed(2):"0.00","/yr"]})]})]}),eo&&(eo.priceMonthlyUsdCents!==ep.priceMonthlyUsdCents||(eo.priceAnnualUsdCents??"")!==ep.priceAnnualUsdCents)&&a.jsx("p",{className:"text-xs text-amber-600",children:"⚠️ Changing price will create new Stripe price(s). Existing subscribers keep their current price."}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"BOQ Limit/Period"}),a.jsx(i.I,{type:"number",value:ep.boqLimitPerPeriod,onChange:e=>eh(s=>({...s,boqLimitPerPeriod:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"BOQ Templates"}),a.jsx(i.I,{type:"number",value:ep.boqTemplatesLimit,onChange:e=>eh(s=>({...s,boqTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Cover Templates"}),a.jsx(i.I,{type:"number",value:ep.coverTemplatesLimit,onChange:e=>eh(s=>({...s,coverTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Sort Order"}),a.jsx(i.I,{type:"number",value:ep.sortOrder,onChange:e=>eh(s=>({...s,sortOrder:parseInt(e.target.value)||0}))})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(en.X,{id:"plan-active",checked:ep.active,onCheckedChange:e=>eh(s=>({...s,active:!0===e}))}),a.jsx(c._,{htmlFor:"plan-active",children:"Active (visible on pricing)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(en.X,{id:"plan-popular",checked:ep.isMostPopular,onCheckedChange:e=>eh(s=>({...s,isMostPopular:!0===e}))}),a.jsx(c._,{htmlFor:"plan-popular",children:"Most Popular badge"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(c._,{children:["Features ",a.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(drag to reorder, click to edit)"})]}),(0,a.jsxs)("div",{className:"space-y-1 mt-2",children:[ep.features.map((e,s)=>(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>sj(s),onDragOver:e=>sf(e,s),onDragEnd:sg,className:`flex items-center gap-2 group ${ev===s?"opacity-50 bg-primary/10":""}`,children:[a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:a.jsx(V.Z,{className:"h-4 w-4"})}),eb===s?(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[a.jsx(i.I,{value:ek,onChange:e=>eC(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),sv()),"Escape"===e.key&&sN()},autoFocus:!0,className:"h-8 text-sm"}),a.jsx(l.z,{type:"button",variant:"ghost",size:"sm",onClick:sv,children:a.jsx(Q.Z,{className:"h-4 w-4 text-green-600"})}),a.jsx(l.z,{type:"button",variant:"ghost",size:"sm",onClick:sN,children:a.jsx(p.Z,{className:"h-4 w-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>sy(s),children:e}),a.jsx(l.z,{type:"button",variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>sh(s),children:a.jsx(p.Z,{className:"h-4 w-4"})})]})]},s)),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-4"})," ",a.jsx(i.I,{value:ej,onChange:e=>ef(e.target.value),placeholder:"Add a feature...",onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),sp()),className:"flex-1"}),a.jsx(l.z,{type:"button",variant:"outline",size:"sm",onClick:sp,children:a.jsx(D.Z,{className:"h-4 w-4"})})]})]})]})]}),(0,a.jsxs)(m.cN,{children:[a.jsx(l.z,{variant:"outline",onClick:()=>ex(!1),children:"Cancel"}),(0,a.jsxs)(l.z,{onClick:sx,disabled:eg,children:[eg?a.jsx(F.Z,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]})]})}),a.jsx(j,{open:e$,onOpenChange:eQ,children:(0,a.jsxs)(v,{className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,a.jsxs)(N,{children:[a.jsx(b,{children:"User Details"}),a.jsx(w,{children:ez?.email})]}),eD?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(F.Z,{className:"h-6 w-6 animate-spin"})}):eL?(0,a.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(Z.Z,{className:"h-4 w-4"})," Profile"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eL.user.fullName||eL.user.name||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",eL.user.email]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Phone:"})," ",eL.user.phone||"-"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Joined:"})," ",(0,er.WU)(new Date(eL.user.createdAt),"MMM d, yyyy")]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Login:"})," ",eL.user.lastLoginAt?(0,er.WU)(new Date(eL.user.lastLoginAt),"MMM d, yyyy HH:mm"):"Never"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eL.user.isBlocked?a.jsx(k.C,{variant:"destructive",children:"Blocked"}):a.jsx(k.C,{variant:"outline",children:"Active"})]})]}),eL.user.blockReason&&(0,a.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",eL.user.blockReason]})]}),eL.company&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(M.Z,{className:"h-4 w-4"})," Company"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eL.company.name]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Members:"})," ",eL.company.memberCount]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"BOQs:"})," ",eL.company.boqCount]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eL.company.isBlocked?a.jsx(k.C,{variant:"destructive",children:"Blocked"}):a.jsx(k.C,{variant:"outline",children:"Active"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(G.Z,{className:"h-4 w-4"})," Billing"]}),eL.billing?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),eL.billing.accessOverride?(0,a.jsxs)(k.C,{className:"bg-purple-100 text-purple-800",children:[a.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",eL.billing.overridePlan||"business",")"]}):a.jsx(k.C,{variant:"secondary",className:"capitalize",children:eL.billing.planKey||"None"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Status:"}),sB(eL.billing.status)]}),eL.billing.stripeCustomerId&&(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",a.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eL.billing.stripeCustomerId})]}),eL.billing.stripeSubscriptionId&&(0,a.jsxs)("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Stripe Subscription:"})," ",a.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eL.billing.stripeSubscriptionId})]}),eL.billing.currentCouponCode&&(0,a.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Active Coupon:"}),(0,a.jsxs)(k.C,{variant:"outline",className:"bg-yellow-50",children:[a.jsx(U,{className:"w-3 h-3 mr-1"}),eL.billing.currentCouponCode]}),(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>sR(eL.company.id),children:[a.jsx(p.Z,{className:"h-3 w-3"})," Remove"]})]}),eL.billing.currentPeriodEnd&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,er.WU)(new Date(eL.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing information"})]}),eL.invoices.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(K,{className:"h-4 w-4"})," Payment History"]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:eL.invoices.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)," ",e.currency.toUpperCase()]}),a.jsx("span",{className:"mx-2",children:"•"}),a.jsx("span",{className:"text-muted-foreground",children:(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(k.C,{variant:"outline",className:"text-xs capitalize",children:e.status}),e.hostedInvoiceUrl&&a.jsx("a",{href:e.hostedInvoiceUrl,target:"_blank",rel:"noopener noreferrer",children:a.jsx(H.Z,{className:"h-3 w-3 text-muted-foreground"})})]})]},e.id))})]}),eL.couponRedemptions.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(U,{className:"h-4 w-4"})," Coupon History"]}),a.jsx("div",{className:"space-y-2",children:eL.couponRedemptions.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.couponCode}),a.jsx("span",{className:"ml-2 text-muted-foreground",children:"free_forever"===e.couponType?"Free Forever":"Trial"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:(0,er.WU)(new Date(e.redeemedAt),"MMM d, yyyy")}),e.revokedAt&&a.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[a.jsx("h3",{className:"font-semibold",children:"Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx(l.z,{variant:eL.user.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("user",eL.user.id,eL.user.email,eL.user.isBlocked),children:eL.user.isBlocked?(0,a.jsxs)(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"})," Unblock User"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S.Z,{className:"h-4 w-4 mr-2"})," Block User"]})}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>sP(ez),children:[a.jsx(W,{className:"h-4 w-4 mr-2"})," Password Reset"]}),eL.company&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>sM(eL.company.id,eL.company.name,!!eL.billing?.accessOverride),children:[a.jsx(P.Z,{className:"h-4 w-4 mr-2"}),eL.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),a.jsx(l.z,{variant:eL.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("company",eL.company.id,eL.company.name,eL.company.isBlocked),children:eL.company.isBlocked?(0,a.jsxs)(a.Fragment,{children:[a.jsx(q,{className:"h-4 w-4 mr-2"})," Unblock Company"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S.Z,{className:"h-4 w-4 mr-2"})," Block Company"]})})]})]})]})]}):null]})}),a.jsx(m.Vq,{open:eV,onOpenChange:eG,children:(0,a.jsxs)(m.cZ,{children:[a.jsx(m.fK,{children:(0,a.jsxs)(m.$N,{className:"flex items-center gap-2",children:[a.jsx(X.Z,{className:"h-5 w-5 text-yellow-500"}),eK?.isBlocked?"Unblock":"Block"," ",eK?.type==="company"?"Company":"User"]})}),(0,a.jsxs)("div",{className:"py-4",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:eK?.isBlocked?`Are you sure you want to unblock "${eK?.name}"?`:`Are you sure you want to block "${eK?.name}"? They will lose access to all /app/* pages.`}),!eK?.isBlocked&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"blockReason",children:"Block Reason (optional)"}),a.jsx(i.I,{id:"blockReason",value:eW,onChange:e=>eX(e.target.value),placeholder:"e.g., Abuse, Non-payment",className:"mt-1"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(en.X,{id:"cancelSub",checked:eJ,onCheckedChange:e=>eY(e)}),a.jsx(c._,{htmlFor:"cancelSub",className:"font-normal cursor-pointer",children:"Cancel Stripe subscription immediately"})]})]})]}),(0,a.jsxs)(m.cN,{children:[a.jsx(l.z,{variant:"outline",onClick:()=>eG(!1),children:"Cancel"}),a.jsx(l.z,{variant:eK?.isBlocked?"default":"destructive",onClick:sC,children:eK?.isBlocked?"Unblock":"Block"})]})]})}),a.jsx(m.Vq,{open:e0,onOpenChange:e1,children:(0,a.jsxs)(m.cZ,{children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsxs)(m.$N,{className:"flex items-center gap-2",children:[a.jsx(W,{className:"h-5 w-5"})," Password Reset Options"]}),a.jsx(m.Be,{children:"For security, passwords cannot be viewed. Use these options to help the user reset their password."})]}),(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium mb-2",children:["User: ",e2?.email]}),e2?.forcePasswordReset&&a.jsx(k.C,{variant:"outline",className:"text-yellow-700 bg-yellow-50",children:"Force Reset Enabled"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-start",onClick:()=>sS("generate_link"),children:[a.jsx(J,{className:"h-4 w-4 mr-2"})," Generate Reset Link"]}),e3&&(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-sm",children:[a.jsx("p",{className:"text-green-800 mb-2",children:"Reset link generated:"}),a.jsx("code",{className:"block text-xs bg-white p-2 rounded break-all",children:e3}),(0,a.jsxs)(l.z,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>sZ(e3),children:[a.jsx(J,{className:"h-3 w-3 mr-2"})," Copy"]})]}),a.jsx(l.z,{variant:"outline",className:"w-full justify-start",onClick:()=>sS(e2?.forcePasswordReset?"clear_force_reset":"force_reset"),children:e2?.forcePasswordReset?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"})," Clear Force Reset Flag"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(X.Z,{className:"h-4 w-4 mr-2"})," Force Reset on Next Login"]})})]})]}),a.jsx(m.cN,{children:a.jsx(l.z,{variant:"outline",onClick:()=>e1(!1),children:"Close"})})]})}),a.jsx(m.Vq,{open:e8,onOpenChange:e6,children:(0,a.jsxs)(m.cZ,{children:[a.jsx(m.fK,{children:(0,a.jsxs)(m.$N,{className:"flex items-center gap-2",children:[a.jsx(P.Z,{className:"h-5 w-5 text-purple-500"}),e7?.hasGrant?"Revoke":"Grant"," Free Access"]})}),a.jsx("div",{className:"py-4",children:e7?.hasGrant?(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Are you sure you want to revoke free access for ",a.jsx("strong",{children:e7?.companyName}),"? They will need to subscribe to regain access."]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Grant free access to ",a.jsx("strong",{children:e7?.companyName}),". This will override any existing subscription."]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"freeForeverPlan",children:"Access Level"}),(0,a.jsxs)(o.Ph,{value:se,onValueChange:e=>ss(e),children:[a.jsx(o.i4,{className:"mt-1",children:a.jsx(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"business",children:"Business (Unlimited BOQs)"}),a.jsx(o.Ql,{value:"starter",children:"Starter (10 BOQs/month)"})]})]})]})]})}),(0,a.jsxs)(m.cN,{children:[a.jsx(l.z,{variant:"outline",onClick:()=>e6(!1),children:"Cancel"}),a.jsx(l.z,{onClick:s_,children:e7?.hasGrant?"Revoke Access":"Grant Free Access"})]})]})}),a.jsx(m.Vq,{open:st,onOpenChange:sa,children:(0,a.jsxs)(m.cZ,{children:[a.jsx(m.fK,{children:a.jsx(m.$N,{children:"Create New Coupon"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"code",children:"Coupon Code"}),a.jsx(i.I,{id:"code",value:sr.code,onChange:e=>sn(s=>({...s,code:e.target.value.toUpperCase()})),placeholder:"e.g., TRIAL14, FREEFOREVER",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"type",children:"Coupon Type"}),(0,a.jsxs)(o.Ph,{value:sr.type,onValueChange:e=>sn(s=>({...s,type:e})),children:[a.jsx(o.i4,{className:"mt-1",children:a.jsx(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"trial_days",children:"Trial Days"}),a.jsx(o.Ql,{value:"free_forever",children:"Free Forever"})]})]})]}),"trial_days"===sr.type&&(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"trialDays",children:"Trial Days"}),a.jsx(i.I,{id:"trialDays",type:"number",min:"1",max:"365",value:sr.trialDays,onChange:e=>sn(s=>({...s,trialDays:parseInt(e.target.value)||14})),className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{children:"Allowed Plans (optional)"}),(0,a.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(en.X,{checked:sr.allowedPlans.includes("starter"),onCheckedChange:e=>{sn(s=>({...s,allowedPlans:e?[...s.allowedPlans,"starter"]:s.allowedPlans.filter(e=>"starter"!==e)}))}}),a.jsx("span",{className:"text-sm",children:"Starter"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(en.X,{checked:sr.allowedPlans.includes("advance"),onCheckedChange:e=>{sn(s=>({...s,allowedPlans:e?[...s.allowedPlans,"advance"]:s.allowedPlans.filter(e=>"advance"!==e)}))}}),a.jsx("span",{className:"text-sm",children:"Advance"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx(en.X,{checked:sr.allowedPlans.includes("business"),onCheckedChange:e=>{sn(s=>({...s,allowedPlans:e?[...s.allowedPlans,"business"]:s.allowedPlans.filter(e=>"business"!==e)}))}}),a.jsx("span",{className:"text-sm",children:"Business"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave unchecked for all plans"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"maxRedemptions",children:"Max Redemptions (optional)"}),a.jsx(i.I,{id:"maxRedemptions",type:"number",min:"1",value:sr.maxRedemptions,onChange:e=>sn(s=>({...s,maxRedemptions:e.target.value})),placeholder:"Leave empty for unlimited",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx(c._,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),a.jsx(i.I,{id:"expiresAt",type:"date",value:sr.expiresAt,onChange:e=>sn(s=>({...s,expiresAt:e.target.value})),className:"mt-1"})]})]}),(0,a.jsxs)(m.cN,{children:[a.jsx(l.z,{variant:"outline",onClick:()=>sa(!1),children:"Cancel"}),(0,a.jsxs)(l.z,{onClick:sA,disabled:sl,children:[sl&&a.jsx(F.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Coupon"]})]})]})})]})})}function ei({coupon:e,onToggle:s,onArchive:t,onDelete:r,isArchived:n=!1}){return(0,a.jsxs)("div",{className:"p-4 rounded-lg border bg-white flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.code}),a.jsx(k.C,{variant:"free_forever"===e.type?"default":"secondary",className:"text-xs",children:"free_forever"===e.type?"Free Forever":`${e.trialDays} Day Trial`}),!e.active&&!n&&a.jsx(k.C,{variant:"outline",className:"text-xs",children:"Disabled"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.allowedPlans.length>0?`For ${e.allowedPlans.map(e=>"starter"===e?"Starter":"advance"===e?"Advance":"Business").join(", ")}`:"All plans"," ","• Used ",e.currentRedemptions,e.maxRedemptions?`/${e.maxRedemptions}`:""," times",e.expiresAt&&` • Expires ${(0,er.WU)(new Date(e.expiresAt),"MMM d, yyyy")}`]})]}),!n&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(l.z,{variant:"ghost",size:"sm",onClick:s,title:e.active?"Disable":"Enable",children:e.active?a.jsx(Y,{className:"h-5 w-5 text-green-600"}):a.jsx(ee,{className:"h-5 w-5 text-muted-foreground"})}),a.jsx(l.z,{variant:"ghost",size:"sm",onClick:t,title:"Archive",children:a.jsx(es,{className:"h-4 w-4 text-muted-foreground"})}),0===e.currentRedemptions&&a.jsx(l.z,{variant:"ghost",size:"sm",onClick:r,title:"Delete",children:a.jsx(et.Z,{className:"h-4 w-4 text-red-500"})})]}),n&&0===e.currentRedemptions&&a.jsx(l.z,{variant:"ghost",size:"sm",onClick:r,title:"Delete",children:a.jsx(et.Z,{className:"h-4 w-4 text-red-500"})})]})}},16098:(e,s,t)=>{"use strict";t.d(s,{X:()=>P});var a=t(62901),r=t(24383),n=t(56163),l=t(89291),i=t(1940),c=t(98106),d=t(45666),o=t(49209),m=t(52490),u=t(74132),x="Checkbox",[p,h]=(0,l.b)(x),[j,f]=p(x),g=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:l,checked:d,defaultChecked:o,required:m,disabled:x,value:p="on",onCheckedChange:h,...f}=e,[g,y]=r.useState(null),v=(0,n.e)(s,e=>y(e)),k=r.useRef(!1),C=!g||!!g.closest("form"),[P=!1,S]=(0,c.T)({prop:d,defaultProp:o,onChange:h}),Z=r.useRef(P);return r.useEffect(()=>{let e=g?.form;if(e){let s=()=>S(Z.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[g,S]),(0,a.jsxs)(j,{scope:t,state:P,disabled:x,children:[(0,a.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":b(P)?"mixed":P,"aria-required":m,"data-state":w(P),"data-disabled":x?"":void 0,disabled:x,value:p,...f,ref:v,onKeyDown:(0,i.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.M)(e.onClick,e=>{S(e=>!!b(e)||!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,a.jsx)(N,{control:g,bubbles:!k.current,name:l,value:p,checked:P,required:m,disabled:x,style:{transform:"translateX(-100%)"}})]})});g.displayName=x;var y="CheckboxIndicator",v=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:r,...n}=e,l=f(y,t);return(0,a.jsx)(m.z,{present:r||b(l.state)||!0===l.state,children:(0,a.jsx)(u.WV.span,{"data-state":w(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...e.style}})})});v.displayName=y;var N=e=>{let{control:s,checked:t,bubbles:n=!0,...l}=e,i=r.useRef(null),c=(0,d.D)(t),m=(0,o.t)(s);return r.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&s){let a=new Event("click",{bubbles:n});e.indeterminate=b(t),s.call(e,!b(t)&&t),e.dispatchEvent(a)}},[c,t,n]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:!b(t)&&t,...l,tabIndex:-1,ref:i,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function w(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var k=t(85453),C=t(68637);let P=r.forwardRef(({className:e,...s},t)=>a.jsx(g,{ref:t,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(v,{className:(0,C.cn)("flex items-center justify-center text-current"),children:a.jsx(k.Z,{className:"h-4 w-4"})})}));P.displayName=g.displayName},76021:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},99311:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},6e4:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},32614:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},91046:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},71028:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},21680:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},83292:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,dynamic:()=>d});var a=t(83537),r=t(57978),n=t(86023),l=t(15438),i=t(90391);let c=(0,t(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/_components/glorand-admin-client.tsx#GlorandAdminClient`),d="force-dynamic";async function o(){let e=await (0,r.getServerSession)(n.L);e?.user||(0,l.redirect)("/login");let s=e.user.email;return(0,i.Mz)(s)||(0,l.redirect)("/app/dashboard"),a.jsx(c,{adminEmail:s})}},15438:(e,s,t)=>{"use strict";var a=t(34513);t.o(a,"redirect")&&t.d(s,{redirect:function(){return a.redirect}})},34513:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return a.RedirectType},notFound:function(){return r.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect}});let a=t(69138),r=t(18403);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},18403:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{isNotFoundError:function(){return r},notFound:function(){return a}});let t="NEXT_NOT_FOUND";function a(){let e=Error(t);throw e.digest=t,e}function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===t}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},34769:(e,s)=>{"use strict";var t;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RedirectStatusCode",{enumerable:!0,get:function(){return t}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(t||(t={})),("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},69138:(e,s,t)=>{"use strict";var a;Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{RedirectType:function(){return a},getRedirectError:function(){return c},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return u},isRedirectError:function(){return m},permanentRedirect:function(){return o},redirect:function(){return d}});let r=t(54580),n=t(72934),l=t(34769),i="NEXT_REDIRECT";function c(e,s,t){void 0===t&&(t=l.RedirectStatusCode.TemporaryRedirect);let a=Error(i);a.digest=i+";"+s+";"+e+";"+t+";";let n=r.requestAsyncStorage.getStore();return n&&(a.mutableCookies=n.mutableCookies),a}function d(e,s){void 0===s&&(s="replace");let t=n.actionAsyncStorage.getStore();throw c(e,s,(null==t?void 0:t.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.TemporaryRedirect)}function o(e,s){void 0===s&&(s="replace");let t=n.actionAsyncStorage.getStore();throw c(e,s,(null==t?void 0:t.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.PermanentRedirect)}function m(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[s,t,a,r]=e.digest.split(";",4),n=Number(r);return s===i&&("replace"===t||"push"===t)&&"string"==typeof a&&!isNaN(n)&&n in l.RedirectStatusCode}function u(e){return m(e)?e.digest.split(";",3)[2]:null}function x(e){if(!m(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!m(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(a||(a={})),("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4372,7329,5990,1303,1263,2116,5882,3159,7221,391,8241,7461],()=>t(86715));module.exports=a})();