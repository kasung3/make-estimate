(()=>{var e={};e.id=3166,e.ids=[3166],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},90364:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(93947),t(83336),t(71363);var a=t(36576),r=t(72007),i=t(21818),l=t.n(i),n=t(88897),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["app",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93947)),"/home/ubuntu/make_estimate/nextjs_space/app/app/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,83336)),"/home/ubuntu/make_estimate/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,71363,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/make_estimate/nextjs_space/app/app/dashboard/page.tsx"],m="/app/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/dashboard/page",pathname:"/app/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27957:(e,s,t)=>{Promise.resolve().then(t.bind(t,36840))},36840:(e,s,t)=>{"use strict";t.d(s,{DashboardClient:()=>U});var a=t(62901),r=t(24383),i=t(84374),l=t(27221),n=t(22270),o=t(27878),c=t(23803),d=t(250),m=t(31606),u=t(89291),p=t(74132),x="Progress",[h,f]=(0,u.b)(x),[j,b]=h(x),g=r.forwardRef((e,s)=>{var t,r;let{__scopeProgress:i,value:l=null,max:n,getValueLabel:o=N,...c}=e;(n||0===n)&&!q(n)&&console.error((t=`${n}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let d=q(n)?n:100;null===l||P(l,d)||console.error((r=`${l}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=P(l,d)?l:null,u=C(m)?o(m,d):void 0;return(0,a.jsx)(j,{scope:i,value:m,max:d,children:(0,a.jsx)(p.WV.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":C(m)?m:void 0,"aria-valuetext":u,role:"progressbar","data-state":w(m,d),"data-value":m??void 0,"data-max":d,...c,ref:s})})});g.displayName=x;var y="ProgressIndicator",v=r.forwardRef((e,s)=>{let{__scopeProgress:t,...r}=e,i=b(y,t);return(0,a.jsx)(p.WV.div,{"data-state":w(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:s})});function N(e,s){return`${Math.round(e/s*100)}%`}function w(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function C(e){return"number"==typeof e}function q(e){return C(e)&&!isNaN(e)&&e>0}function P(e,s){return C(e)&&!isNaN(e)&&e<=s&&e>=0}v.displayName=y;var k=t(68637);let Z=r.forwardRef(({className:e,value:s,...t},r)=>a.jsx(g,{ref:r,className:(0,k.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx(v,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Z.displayName=g.displayName;var _=t(65923),O=t(82657),S=t(72388),B=t(97718),$=t(21680),Q=t(76244),A=t(32317),M=t(79357);let z=(0,t(71945).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var E=t(76021),T=t(91046),D=t(71028),L=t(10333),R=t(39350);function U({boqs:e,customers:s,company:t}){let u=(0,i.useRouter)();(0,i.useSearchParams)();let[p,x]=(0,r.useState)(e??[]),[h,f]=(0,r.useState)(s??[]),[j,b]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(""),[q,P]=(0,r.useState)(""),[k,U]=(0,r.useState)(""),[I,V]=(0,r.useState)(""),[F,J]=(0,r.useState)(""),[Y,G]=(0,r.useState)(!1),[W,X]=(0,r.useState)(null),[H,K]=(0,r.useState)(!0),ee=t?.currencySymbol??"Rs.",es=t?.currencyPosition??"left",et=(0,r.useCallback)(async()=>{try{K(!0);let e=await fetch("/api/billing/status",{cache:"no-store"});if(e.ok){let s=await e.json();X(s)}}catch(e){console.error("Failed to fetch billing status:",e)}finally{K(!1)}},[]),ea=(0,r.useCallback)(e=>{u.prefetch(`/app/boq/${e}`)},[u]),er=(e,s=2)=>e.toLocaleString("en-US",{minimumFractionDigits:s,maximumFractionDigits:s}),ei=e=>{let s=er(e??0,2);return"left"===es?`${ee} ${s}`:`${s} ${ee}`},el=e=>{let s=0;(e?.categories??[]).forEach(e=>{(e?.items??[]).forEach(e=>{let t=e?.quantity??0;if(t>0){let a=(e?.unitCost??0)*(1+(e?.markupPct??0)/100);s+=a*t}})});let t=0;t=e?.discountType==="percent"?(e?.discountValue??0)/100*s:e?.discountValue??0;let a=s-t,r=e?.vatEnabled?(e?.vatPercent??0)/100*a:0;return s-t+r},en=(p??[]).filter(e=>e?.projectName?.toLowerCase()?.includes?.(j?.toLowerCase?.()??"")||e?.customer?.name?.toLowerCase()?.includes?.(j?.toLowerCase?.()??"")),eo=(p??[]).reduce((e,s)=>e+el(s),0),ec=async()=>{if(!W?.hasActiveSubscription){R.ZP.error("Please subscribe to a plan to create BOQs"),u.push("/app/settings?tab=billing");return}if(!W?.canCreateBoq){R.ZP.error("You've reached your BOQ limit for this period. Upgrade to continue."),u.push("/app/settings?tab=billing");return}if(!w?.trim?.()){R.ZP.error("Please enter a project name");return}G(!0);try{let e=await fetch("/api/boqs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:w,customerId:q||null})}),s=await e.json();if(!e.ok){if(s?.code==="QUOTA_EXCEEDED"){R.ZP.error(`BOQ limit reached (${s.boqsUsed}/${s.boqLimit}). Upgrade or wait until ${s.resetDate}.`,{duration:5e3}),u.push("/app/settings?tab=billing");return}R.ZP.error(s?.error||"Failed to create BOQ");return}await et(),y(!1),C(""),P(""),u.push(`/app/boq/${s?.id}`)}catch(e){R.ZP.error("An error occurred")}finally{G(!1)}},ed=async()=>{if(!k?.trim?.()){R.ZP.error("Please enter a customer name");return}G(!0);try{let e=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k,email:I||null,phone:F||null})}),s=await e.json();if(!e.ok){R.ZP.error(s?.error||"Failed to create customer");return}f([...h??[],s]),P(s?.id),N(!1),U(""),V(""),J(""),R.ZP.success("Customer created")}catch(e){R.ZP.error("An error occurred")}finally{G(!1)}},em=async e=>{if(confirm("Are you sure you want to delete this BOQ?"))try{if(!(await fetch(`/api/boqs/${e}`,{method:"DELETE"})).ok){R.ZP.error("Failed to delete BOQ");return}x((p??[]).filter(s=>s?.id!==e)),R.ZP.success("BOQ deleted")}catch(e){R.ZP.error("An error occurred")}},eu=W?.boqLimit?Math.min(100,W.boqsUsedThisPeriod/W.boqLimit*100):0;return a.jsx(n.AppLayout,{children:(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your BOQs and estimates"})]}),(0,a.jsxs)(o.z,{onClick:()=>y(!0),className:"shadow-md",disabled:!W?.canCreateBoq,children:[a.jsx(B.Z,{className:"w-4 h-4 mr-2"}),"New BOQ"]})]}),W&&W.hasActiveSubscription&&null!==W.boqLimit&&a.jsx(c.Zb,{className:`mb-6 border-0 shadow-md ${W.canCreateBoq?"bg-gradient-to-br from-violet-50 to-purple-50":"bg-gradient-to-br from-amber-50 to-orange-50"}`,children:a.jsx(c.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[W.canCreateBoq?a.jsx("div",{className:"w-10 h-10 bg-violet-500 rounded-lg flex items-center justify-center",children:a.jsx(Q.Z,{className:"w-5 h-5 text-white"})}):a.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-lg flex items-center justify-center",children:a.jsx($.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:"font-medium",children:[W.boqsUsedThisPeriod," of ",W.boqLimit," BOQs used"]}),a.jsx(m.C,{variant:W.canCreateBoq?"secondary":"destructive",children:W.planInfo?.name||"Starter"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:W.canCreateBoq?`${W.boqLimit-W.boqsUsedThisPeriod} BOQs remaining this period`:"Upgrade to Business for unlimited BOQs"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-32 hidden sm:block",children:a.jsx(Z,{value:eu,className:"h-2"})}),!W.canCreateBoq&&a.jsx(o.z,{size:"sm",onClick:()=>u.push("/app/settings?tab=billing"),children:"Upgrade"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-8",children:[a.jsx(c.Zb,{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 border-0 shadow-md overflow-hidden",children:a.jsx(c.aY,{className:"p-3 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-cyan-700 truncate",children:"Total BOQs"}),a.jsx("p",{className:"text-xl sm:text-3xl font-bold text-cyan-900 tabular-nums",children:p?.length??0})]}),a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(A.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]})})}),a.jsx(c.Zb,{className:"bg-gradient-to-br from-teal-50 to-teal-100 border-0 shadow-md overflow-hidden",children:a.jsx(c.aY,{className:"p-3 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-teal-700 truncate",children:"Total Value"}),a.jsx("p",{className:"text-base sm:text-2xl font-bold text-teal-900 tabular-nums truncate",title:ei(eo),children:ei(eo)})]}),a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-teal-500 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(M.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]})})}),a.jsx(c.Zb,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 border-0 shadow-md overflow-hidden",children:a.jsx(c.aY,{className:"p-3 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-emerald-700 truncate",children:"Customers"}),a.jsx("p",{className:"text-xl sm:text-3xl font-bold text-emerald-900 tabular-nums",children:h?.length??0})]}),a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]})})}),a.jsx(c.Zb,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-0 shadow-md overflow-hidden",children:a.jsx(c.aY,{className:"p-3 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 truncate",children:"This Month"}),a.jsx("p",{className:"text-xl sm:text-3xl font-bold text-blue-900 tabular-nums",children:(p??[]).filter(e=>new Date(e?.createdAt??0).getMonth()===new Date().getMonth())?.length??0})]}),a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(E.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]})})})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[a.jsx(T.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx(d.I,{placeholder:"Search BOQs by project name or customer...",value:j,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(c.Zb,{className:"shadow-md border-0",children:[a.jsx(c.Ol,{children:a.jsx(c.ll,{className:"text-lg",children:"Recent BOQs"})}),a.jsx(c.aY,{children:(en?.length??0)===0?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(A.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No BOQs found"}),a.jsx(o.z,{variant:"outline",className:"mt-4",onClick:()=>y(!0),children:"Create your first BOQ"})]}):a.jsx("div",{className:"space-y-3",children:(en??[]).map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer group gap-2 sm:gap-4",onClick:()=>u.push(`/app/boq/${e?.id}`),onMouseEnter:()=>ea(e?.id),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-cyan-400 to-teal-400 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(A.Z,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:e?.projectName}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:[e?.customer?.name||"No customer"," â€¢"," ",(0,l.WU)(new Date(e?.updatedAt??Date.now()),"MMM d, yyyy")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between sm:justify-end space-x-2 sm:space-x-4 pl-12 sm:pl-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-semibold text-gray-900 tabular-nums truncate",title:ei(el(e)),children:ei(el(e))}),a.jsx(o.z,{variant:"ghost",size:"icon",className:"sm:opacity-0 sm:group-hover:opacity-100 text-gray-400 hover:text-red-500 h-8 w-8 flex-shrink-0",onClick:s=>{s.stopPropagation(),em(e?.id)},children:a.jsx(D.Z,{className:"w-4 h-4"})})]})]},e?.id))})})]}),a.jsx(_.Vq,{open:g,onOpenChange:y,children:(0,a.jsxs)(_.cZ,{children:[a.jsx(_.fK,{children:a.jsx(_.$N,{children:"Create New BOQ"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(O._,{htmlFor:"projectName",children:"Project Name"}),a.jsx(d.I,{id:"projectName",placeholder:"Enter project name",value:w,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(O._,{children:"Customer (Optional)"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(S.Ph,{value:q,onValueChange:P,children:[a.jsx(S.i4,{className:"flex-1",children:a.jsx(S.ki,{placeholder:"Select customer"})}),a.jsx(S.Bw,{children:(h??[]).map(e=>a.jsx(S.Ql,{value:e?.id??"",children:e?.name},e?.id))})]}),a.jsx(o.z,{variant:"outline",onClick:()=>N(!0),children:a.jsx(B.Z,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)(_.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,a.jsxs)(o.z,{onClick:ec,disabled:Y,children:[Y?a.jsx(L.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,"Create BOQ"]})]})]})}),a.jsx(_.Vq,{open:v,onOpenChange:N,children:(0,a.jsxs)(_.cZ,{children:[a.jsx(_.fK,{children:a.jsx(_.$N,{children:"Add New Customer"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(O._,{htmlFor:"customerName",children:"Name"}),a.jsx(d.I,{id:"customerName",placeholder:"Customer name",value:k,onChange:e=>U(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(O._,{htmlFor:"customerEmail",children:"Email (Optional)"}),a.jsx(d.I,{id:"customerEmail",type:"email",placeholder:"customer@email.com",value:I,onChange:e=>V(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(O._,{htmlFor:"customerPhone",children:"Phone (Optional)"}),a.jsx(d.I,{id:"customerPhone",placeholder:"Phone number",value:F,onChange:e=>J(e.target.value)})]})]}),(0,a.jsxs)(_.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,a.jsxs)(o.z,{onClick:ed,disabled:Y,children:[Y?a.jsx(L.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,"Add Customer"]})]})]})})]})})}},31606:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(62901);t(24383);var r=t(47279),i=t(68637);let l=(0,r.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gradient-to-r from-purple-500 to-lavender-500 text-white",secondary:"border-transparent bg-purple-100 text-purple-700 hover:bg-purple-200",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border-purple-200 text-purple-700 bg-white",success:"border-transparent bg-emerald-100 text-emerald-700",warning:"border-transparent bg-amber-100 text-amber-700"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(l({variant:s}),e),...t})}},72388:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>h,Ph:()=>d,Ql:()=>f,i4:()=>u,ki:()=>m});var a=t(62901),r=t(24383),i=t(76960),l=t(7259),n=t(26026),o=t(85453),c=t(68637);let d=i.fC;i.ZA;let m=i.B4,u=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.xz,{ref:r,className:(0,c.cn)("flex h-11 w-full items-center justify-between gap-2 rounded-xl border-2 border-purple-100 bg-white px-4 py-2 text-sm","transition-all duration-200","placeholder:text-muted-foreground","hover:border-purple-200","focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-100","disabled:cursor-not-allowed disabled:opacity-50","[&>span]:line-clamp-1",e),...t,children:[s,a.jsx(i.JO,{asChild:!0,children:a.jsx(l.Z,{className:"h-4 w-4 text-purple-400 transition-transform duration-200"})})]}));u.displayName=i.xz.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(i.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-purple-400",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=i.u_.displayName;let x=r.forwardRef(({className:e,...s},t)=>a.jsx(i.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-purple-400",e),...s,children:a.jsx(l.Z,{className:"h-4 w-4"})}));x.displayName=i.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:t="popper",...r},l)=>a.jsx(i.h_,{children:(0,a.jsxs)(i.VY,{ref:l,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border border-purple-100 bg-white shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(p,{}),a.jsx(i.l_,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(x,{})]})}));h.displayName=i.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(i.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold text-purple-700",e),...s})).displayName=i.__.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-pointer select-none items-center rounded-lg py-2 pl-8 pr-2 text-sm outline-none","transition-colors duration-150","hover:bg-purple-50 hover:text-purple-700","focus:bg-purple-50 focus:text-purple-700","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(i.wU,{children:a.jsx(o.Z,{className:"h-4 w-4 text-purple-500"})})}),a.jsx(i.eT,{children:s})]}));f.displayName=i.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-purple-100",e),...s})).displayName=i.Z0.displayName},76021:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},76244:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},79357:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},21680:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},93947:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m,dynamic:()=>d});var a=t(83537),r=t(57978),i=t(86023),l=t(15438),n=t(83178);let o=(0,t(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/app/app/dashboard/_components/dashboard-client.tsx#DashboardClient`);var c=t(90391);let d="force-dynamic";async function m(){let e=await (0,r.getServerSession)(i.L);e?.user||(0,l.redirect)("/login");let s=e.user?.companyId;s||(0,l.redirect)("/login"),(await (0,c.qf)(s)).hasActiveSubscription||(0,l.redirect)("/pricing?subscription=required");let[t,d,m]=await Promise.all([n._.boq.findMany({where:{companyId:s},include:{customer:!0,categories:{include:{items:!0}}},orderBy:{updatedAt:"desc"}}),n._.customer.findMany({where:{companyId:s},orderBy:{name:"asc"}}),n._.company.findUnique({where:{id:s}})]);return a.jsx(o,{boqs:JSON.parse(JSON.stringify(t??[])),customers:JSON.parse(JSON.stringify(d??[])),company:JSON.parse(JSON.stringify(m??{}))})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4372,7329,5990,1303,1263,2116,5882,3159,7221,391,8241,7843],()=>t(90364));module.exports=a})();