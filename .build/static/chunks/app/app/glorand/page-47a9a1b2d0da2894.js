(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{5822:function(e,s,a){Promise.resolve().then(a.bind(a,1668))},1668:function(e,s,a){"use strict";a.d(s,{GlorandAdminClient:function(){return en}});var t=a(5444),l=a(9300),r=a(7367),i=a(2422),n=a(4678),c=a(4635),d=a(9827),o=a(489),m=a(9530),x=a(9095),u=a(2371),p=a(3485),h=a(5522);let j=x.fC;x.xz,x.x8;let g=x.h_,f=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(x.aV,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));f.displayName=x.aV.displayName;let v=(0,u.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),N=l.forwardRef(({side:e="right",className:s,children:a,...l},r)=>(0,t.jsxs)(g,{children:[(0,t.jsx)(f,{}),(0,t.jsxs)(x.VY,{ref:r,className:(0,h.cn)(v({side:e}),s),...l,children:[a,(0,t.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));N.displayName=x.VY.displayName;let y=({className:e,...s})=>(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});y.displayName="SheetHeader";let b=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(x.Dx,{ref:a,className:(0,h.cn)("text-lg font-semibold text-foreground",e),...s}));b.displayName=x.Dx.displayName;let w=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(x.dk,{ref:a,className:(0,h.cn)("text-sm text-muted-foreground",e),...s}));w.displayName=x.dk.displayName;var C=a(1335),k=a(6765),P=a(9062),Z=a(9484),S=a(4624),A=a(2019),F=a(5077),z=a(3648),U=a(5076),E=a(1946),T=a(6886),B=a(3144),M=a(8510),D=a(5012),R=a(8082),O=a(1137),_=a(3572),L=a(5798),I=a(9429),$=a(9904),q=a(3705),Q=a(7248),V=a(7386),G=a(2235),K=a(1509),W=a(3394),H=a(347),J=a(691),Y=a(563),X=a(362),ee=a(1804),es=a(2205),ea=a(6136),et=a(1540),el=a(4611),er=a(179),ei=a(6167);function en({adminEmail:e}){let[s,a]=(0,l.useState)("users"),[x,u]=(0,l.useState)([]),[h,g]=(0,l.useState)([]),[f,v]=(0,l.useState)([]),[es,ea]=(0,l.useState)([]),[et,en]=(0,l.useState)(!0),[ed,eo]=(0,l.useState)(!1),[em,ex]=(0,l.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[eu,ep]=(0,l.useState)(null),[eh,ej]=(0,l.useState)(!1),[eg,ef]=(0,l.useState)({name:"",priceMonthlyUsdCents:0,priceAnnualUsdCents:"",boqLimitPerPeriod:"",boqTemplatesLimit:"",coverTemplatesLimit:"",features:[],isMostPopular:!1,sortOrder:0,active:!0}),[ev,eN]=(0,l.useState)(""),[ey,eb]=(0,l.useState)(!1),[ew,eC]=(0,l.useState)(null),[ek,eP]=(0,l.useState)(null),[eZ,eS]=(0,l.useState)(""),[eA,eF]=(0,l.useState)(""),[ez,eU]=(0,l.useState)(""),[eE,eT]=(0,l.useState)(""),[eB,eM]=(0,l.useState)(""),[eD,eR]=(0,l.useState)(""),[eO,e_]=(0,l.useState)("newest"),[eL,eI]=(0,l.useState)(null),[e$,eq]=(0,l.useState)(null),[eQ,eV]=(0,l.useState)(!1),[eG,eK]=(0,l.useState)(!1),[eW,eH]=(0,l.useState)(""),[eJ,eY]=(0,l.useState)(""),[eX,e0]=(0,l.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[e4,e1]=(0,l.useState)(!1),[e2,e3]=(0,l.useState)(null),[e5,e6]=(0,l.useState)(null),[e8,e7]=(0,l.useState)(!1),[e9,se]=(0,l.useState)(!1),[ss,sa]=(0,l.useState)(!1),[st,sl]=(0,l.useState)(""),[sr,si]=(0,l.useState)(!1),[sn,sc]=(0,l.useState)(!1),[sd,so]=(0,l.useState)(""),[sm,sx]=(0,l.useState)(!1),[su,sp]=(0,l.useState)(""),[sh,sj]=(0,l.useState)(!1),[sg,sf]=(0,l.useState)(!1),[sv,sN]=(0,l.useState)(null),[sy,sb]=(0,l.useState)(""),[sw,sC]=(0,l.useState)(!0),[sk,sP]=(0,l.useState)(!1),[sZ,sS]=(0,l.useState)(null),[sA,sF]=(0,l.useState)(""),[sz,sU]=(0,l.useState)(!1),[sE,sT]=(0,l.useState)(null),[sB,sM]=(0,l.useState)("business"),[sD,sR]=(0,l.useState)(""),[sO,s_]=(0,l.useState)(""),[sL,sI]=(0,l.useState)(!1),[s$,sq]=(0,l.useState)(!1),[sQ,sV]=(0,l.useState)({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),[sG,sK]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=setTimeout(()=>{eU(eA)},300);return()=>clearTimeout(e)},[eA]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{eY(eW)},300);return()=>clearTimeout(e)},[eW]),(0,l.useEffect)(()=>{"users"===s&&sW()},[s,ez,eE,eB,eD,eO,em.page]),(0,l.useEffect)(()=>{"coupons"===s?sH():"plans"===s&&s5()},[s]),(0,l.useEffect)(()=>{"companies"===s&&sJ()},[s,eJ,eX.page]);let sW=async()=>{en(!0);try{let e=new URLSearchParams({page:em.page.toString(),limit:em.limit.toString(),sortBy:eO});ez&&e.set("query",ez),eE&&e.set("plan",eE),eB&&e.set("status",eB),eD&&e.set("blocked",eD);let s=await fetch(`/api/admin/users?${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();u(a.users||[]),ex(a.pagination)}catch(e){el.ZP.error("Failed to load users")}finally{en(!1)}},sH=async()=>{en(!0);try{let e=await fetch("/api/admin/coupons");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();g(s.coupons||[])}catch(e){el.ZP.error("Failed to load coupons")}finally{en(!1)}},sJ=async()=>{e1(!0);try{let e=new URLSearchParams({page:eX.page.toString(),limit:eX.limit.toString()});eJ&&e.set("query",eJ);let s=await fetch(`/api/admin/companies?${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();v(a.companies||[]),e0(a.pagination)}catch(e){el.ZP.error("Failed to load companies")}finally{e1(!1)}},sY=async e=>{e7(!0);try{let s=await fetch(`/api/admin/companies/${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();e6(a)}catch(e){el.ZP.error("Failed to load company details")}finally{e7(!1)}},sX=e=>{e3(e),se(!0),sY(e.id)},s0=()=>{se(!1),e3(null),e6(null),sc(!1),so("")},s4=async()=>{if(e2&&sd.trim())try{if(!(await fetch(`/api/admin/companies/${e2.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:sd.trim()})})).ok)throw Error("Failed to update");el.ZP.success("Company name updated"),sc(!1),sJ(),sY(e2.id)}catch(e){el.ZP.error("Failed to update company name")}},s1=e=>{e3(e),sl(""),sa(!0)},s2=async()=>{if(e2&&"DELETE"===st){si(!0);try{if(!(await fetch(`/api/admin/companies/${e2.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete");el.ZP.success("Company deleted successfully"),sa(!1),s0(),sJ()}catch(e){el.ZP.error("Failed to delete company")}finally{si(!1)}}},s3=async()=>{if(eL&&"DELETE"===su){sj(!0);try{let e=await fetch(`/api/admin/users/${eL.id}`,{method:"DELETE"}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to delete");el.ZP.success(s.message||"User deleted successfully"),sx(!1),ac(),sW()}catch(e){el.ZP.error(e.message||"Failed to delete user")}finally{sj(!1)}}},s5=async()=>{eo(!0);try{let e=await fetch("/api/admin/plans");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();ea(s||[])}catch(e){el.ZP.error("Failed to load billing plans")}finally{eo(!1)}},s6=e=>{ep(e),ef({name:e.name,priceMonthlyUsdCents:e.priceMonthlyUsdCents,priceAnnualUsdCents:e.priceAnnualUsdCents??"",boqLimitPerPeriod:e.boqLimitPerPeriod??"",boqTemplatesLimit:e.boqTemplatesLimit??"",coverTemplatesLimit:e.coverTemplatesLimit??"",features:e.features||[],isMostPopular:e.isMostPopular||!1,sortOrder:e.sortOrder,active:e.active}),eN(""),ej(!0)},s8=async()=>{if(eu){eb(!0);try{let e=await fetch(`/api/admin/plans/${eu.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:eg.name,priceMonthlyUsdCents:eg.priceMonthlyUsdCents,priceAnnualUsdCents:""===eg.priceAnnualUsdCents?null:Number(eg.priceAnnualUsdCents),boqLimitPerPeriod:""===eg.boqLimitPerPeriod?null:Number(eg.boqLimitPerPeriod),boqTemplatesLimit:""===eg.boqTemplatesLimit?null:Number(eg.boqTemplatesLimit),coverTemplatesLimit:""===eg.coverTemplatesLimit?null:Number(eg.coverTemplatesLimit),features:eg.features,isMostPopular:eg.isMostPopular,sortOrder:eg.sortOrder,active:eg.active})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update plan")}el.ZP.success("Plan updated successfully");let s=eu.priceMonthlyUsdCents!==eg.priceMonthlyUsdCents,a=(eu.priceAnnualUsdCents??"")!==eg.priceAnnualUsdCents;(s||a)&&el.ZP.success("New Stripe price(s) created for updated amounts",{duration:5e3}),ej(!1),s5()}catch(e){el.ZP.error(e.message||"Failed to update plan")}finally{eb(!1)}}},s7=()=>{ev.trim()&&(ef(e=>({...e,features:[...e.features,ev.trim()]})),eN(""))},s9=e=>{ef(s=>({...s,features:s.features.filter((s,a)=>a!==e)}))},ae=e=>{eC(e)},as=(e,s)=>{if(e.preventDefault(),null===ew||ew===s)return;let a=[...eg.features],t=a[ew];a.splice(ew,1),a.splice(s,0,t),ef(e=>({...e,features:a})),eC(s)},aa=()=>{eC(null)},at=e=>{eP(e),eS(eg.features[e])},al=()=>{if(null===ek)return;let e=eZ.trim();e&&ef(s=>({...s,features:s.features.map((s,a)=>a===ek?e:s)})),eP(null),eS("")},ar=()=>{eP(null),eS("")},ai=async e=>{eV(!0);try{let s=await fetch(`/api/admin/users/${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();eq(a)}catch(e){el.ZP.error("Failed to load user details")}finally{eV(!1)}},an=e=>{eI(e),eK(!0),ai(e.id)},ac=()=>{eK(!1),eI(null),eq(null)},ad=(e,s,a,t)=>{sN({type:e,id:s,name:a,isBlocked:t}),sb(""),sC(!0),sf(!0)},ao=async()=>{if(sv)try{let e="user"===sv.type?`/api/admin/users/${sv.id}/${sv.isBlocked?"unblock":"block"}`:`/api/admin/companies/${sv.id}/${sv.isBlocked?"unblock":"block"}`;if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockReason:sv.isBlocked?void 0:sy,cancelSubscription:sv.isBlocked?void 0:sw})})).ok)throw Error("Failed to update");el.ZP.success(sv.isBlocked?"Unblocked successfully":"Blocked successfully"),sf(!1),"user"===sv.type?sW():sJ(),eL&&ai(eL.id),e2&&"company"===sv.type&&sY(e2.id)}catch(e){el.ZP.error("Failed to update block status")}},am=e=>{sS(e),sF(""),sP(!0)},ax=async e=>{if(sZ)try{let s=await fetch(`/api/admin/users/${sZ.id}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");"generate_link"===e&&a.resetLink&&sF(a.resetLink),el.ZP.success(a.message),sW(),eL&&ai(eL.id)}catch(e){el.ZP.error(e.message||"Failed to process password reset")}},au=e=>{navigator.clipboard.writeText(e),el.ZP.success("Copied to clipboard")},ap=(e,s,a)=>{sT({companyId:e,companyName:s,hasGrant:a}),sM("business"),sR(""),s_(""),sU(!0)},ah=async()=>{if(sE){sI(!0);try{let e=sE.hasGrant?`/api/admin/companies/${sE.companyId}/revoke-free-forever`:`/api/admin/companies/${sE.companyId}/grant-free-forever`,s={plan:sB};!sE.hasGrant&&sD&&(s.expiresAt=new Date(sD).toISOString()),!sE.hasGrant&&sO&&(s.notes=sO);let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(!a.ok)throw Error(t.error||"Failed");el.ZP.success(t.message),sU(!1),sW(),sJ(),eL&&ai(eL.id),e2&&e2.id===sE.companyId&&sY(e2.id)}catch(e){el.ZP.error(e.message||"Failed to update access")}finally{sI(!1)}}},aj=async e=>{if(confirm("Are you sure you want to remove the coupon/discount from this company?"))try{let s=await fetch(`/api/admin/companies/${e}/remove-coupon`,{method:"POST",headers:{"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");el.ZP.success(a.message),sW(),eL&&ai(eL.id)}catch(e){el.ZP.error(e.message||"Failed to remove coupon")}},ag=async()=>{if(!sQ.code.trim()){el.ZP.error("Coupon code is required");return}sK(!0);try{let e=await fetch("/api/admin/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:sQ.code,type:sQ.type,trialDays:"trial_days"===sQ.type?sQ.trialDays:void 0,allowedPlans:sQ.allowedPlans.length>0?sQ.allowedPlans:void 0,maxRedemptions:sQ.maxRedemptions?parseInt(sQ.maxRedemptions):void 0,expiresAt:sQ.expiresAt||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create");el.ZP.success("Coupon created!"),sq(!1),sV({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),sH()}catch(e){el.ZP.error(e.message||"Failed to create coupon")}finally{sK(!1)}},af=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!e.active})})).ok)throw Error("Failed to update");el.ZP.success(e.active?"Coupon disabled":"Coupon enabled"),sH()}catch(e){el.ZP.error("Failed to update coupon")}},av=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({archived:!0,active:!1})})).ok)throw Error("Failed to archive");el.ZP.success("Coupon archived"),sH()}catch(e){el.ZP.error("Failed to archive coupon")}},aN=async e=>{if(e.currentRedemptions>0){el.ZP.error("Cannot delete used coupons. Archive instead.");return}if(confirm(`Delete coupon "${e.code}"? This cannot be undone.`))try{let s=await fetch(`/api/admin/coupons/${e.id}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete")}el.ZP.success("Coupon deleted"),sH()}catch(e){el.ZP.error(e.message||"Failed to delete coupon")}},ay=h.filter(e=>!e.archived),ab=h.filter(e=>e.archived),aw=e=>{let s=e.billing;return s?"admin_grant"===s.accessOverride||"free_forever"===s.accessOverride?(0,t.jsxs)(C.C,{className:"text-xs bg-purple-100 text-purple-800",children:[(0,t.jsx)(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}):"business"===s.planKey?(0,t.jsx)(C.C,{className:"text-xs bg-blue-100 text-blue-800",children:"Business"}):"starter"===s.planKey?(0,t.jsx)(C.C,{className:"text-xs bg-green-100 text-green-800",children:"Starter"}):(0,t.jsx)(C.C,{variant:"outline",className:"text-xs",children:"No Plan"}):(0,t.jsx)(C.C,{variant:"outline",className:"text-xs",children:"No Plan"})},aC=e=>e?(0,t.jsx)(C.C,{className:`text-xs ${{active:"bg-green-100 text-green-800",trialing:"bg-yellow-100 text-yellow-800",past_due:"bg-red-100 text-red-800",canceled:"bg-gray-100 text-gray-800",incomplete:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e}):(0,t.jsx)(C.C,{variant:"outline",className:"text-xs",children:"None"});return(0,t.jsx)(r.AppLayout,{children:(0,t.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)(Z.Z,{className:"h-8 w-8 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Platform Admin"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Logged in as ",e]})]})]}),(0,t.jsxs)(k.mQ,{value:s,onValueChange:a,children:[(0,t.jsxs)(k.dr,{className:"mb-6",children:[(0,t.jsxs)(k.SP,{value:"users",className:"gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"})," Users"]}),(0,t.jsxs)(k.SP,{value:"companies",className:"gap-2",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"})," Companies"]}),(0,t.jsxs)(k.SP,{value:"coupons",className:"gap-2",children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"})," Coupons"]}),(0,t.jsxs)(k.SP,{value:"plans",className:"gap-2",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"})," Plans"]})]}),(0,t.jsx)(k.nU,{value:"users",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"User Management"}),(0,t.jsx)(d.SZ,{children:"Search and manage all platform users"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(U.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.I,{placeholder:"Search by name, email, company name, or phone...",value:eA,onChange:e=>{eF(e.target.value),ex(e=>({...e,page:1}))},className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(o.Ph,{value:eE,onValueChange:e=>{eT(e),ex(e=>({...e,page:1}))},children:[(0,t.jsx)(o.i4,{className:"w-[130px]",children:(0,t.jsx)(o.ki,{placeholder:"Plan"})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"all",children:"All Plans"}),(0,t.jsx)(o.Ql,{value:"business",children:"Business"}),(0,t.jsx)(o.Ql,{value:"starter",children:"Starter"}),(0,t.jsx)(o.Ql,{value:"free_forever",children:"Admin Grant"}),(0,t.jsx)(o.Ql,{value:"none",children:"No Plan"})]})]}),(0,t.jsxs)(o.Ph,{value:eB,onValueChange:e=>{eM(e),ex(e=>({...e,page:1}))},children:[(0,t.jsx)(o.i4,{className:"w-[130px]",children:(0,t.jsx)(o.ki,{placeholder:"Status"})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"all",children:"All Status"}),(0,t.jsx)(o.Ql,{value:"active",children:"Active"}),(0,t.jsx)(o.Ql,{value:"trialing",children:"Trialing"}),(0,t.jsx)(o.Ql,{value:"past_due",children:"Past Due"}),(0,t.jsx)(o.Ql,{value:"canceled",children:"Canceled"}),(0,t.jsx)(o.Ql,{value:"none",children:"None"})]})]}),(0,t.jsxs)(o.Ph,{value:eD,onValueChange:e=>{eR(e),ex(e=>({...e,page:1}))},children:[(0,t.jsx)(o.i4,{className:"w-[130px]",children:(0,t.jsx)(o.ki,{placeholder:"Blocked"})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"all",children:"All"}),(0,t.jsx)(o.Ql,{value:"blocked",children:"Blocked"}),(0,t.jsx)(o.Ql,{value:"unblocked",children:"Unblocked"})]})]}),(0,t.jsxs)(o.Ph,{value:eO,onValueChange:e_,children:[(0,t.jsx)(o.i4,{className:"w-[130px]",children:(0,t.jsx)(o.ki,{placeholder:"Sort"})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"newest",children:"Newest"}),(0,t.jsx)(o.Ql,{value:"oldest",children:"Oldest"}),(0,t.jsx)(o.Ql,{value:"name",children:"Name"}),(0,t.jsx)(o.Ql,{value:"email",children:"Email"})]})]})]})]}),et?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===x.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No users found"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,t.jsx)("div",{className:`p-4 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors ${e.deletedAt?"bg-gray-100 border-gray-300 opacity-70":e.isBlocked||e.company?.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,onClick:()=>an(e),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:`font-medium truncate ${e.deletedAt?"line-through text-muted-foreground":""}`,children:e.email}),e.deletedAt&&(0,t.jsx)(C.C,{variant:"secondary",className:"text-xs bg-gray-200",children:"Deleted"}),!e.deletedAt&&e.isBlocked&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.company?.isBlocked&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Company Blocked"}),aw(e),aC(e.billing?.status||null),e.billing?.currentCouponCode&&(0,t.jsxs)(C.C,{variant:"outline",className:"text-xs bg-yellow-50",children:[(0,t.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),e.billing.currentCouponCode]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[(0,t.jsx)("span",{children:e.fullName||e.name||"No name"}),(0,t.jsx)("span",{children:e.company?.name||"No company"}),e.country&&(0,t.jsxs)("span",{children:[(0,t.jsx)(B.Z,{className:"inline h-3 w-3 mr-1"}),e.country]}),e.phone&&(0,t.jsxs)("span",{children:[(0,t.jsx)(M.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]}),(0,t.jsxs)("span",{children:[(0,t.jsx)(D.Z,{className:"inline h-3 w-3 mr-1"}),"Joined ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),an(e)},children:(0,t.jsx)(R.Z,{className:"h-4 w-4"})})]})},e.id))}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(em.page-1)*em.limit+1," to"," ",Math.min(em.page*em.limit,em.totalCount)," of"," ",em.totalCount," users"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ex(e=>({...e,page:e.page-1})),disabled:em.page<=1,children:(0,t.jsx)(O.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",em.page," of ",em.totalPages]}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ex(e=>({...e,page:e.page+1})),disabled:em.page>=em.totalPages,children:(0,t.jsx)(_.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),(0,t.jsx)(k.nU,{value:"companies",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Companies"}),(0,t.jsxs)("div",{className:"text-sm font-normal text-muted-foreground",children:[eX.totalCount," total"]})]}),(0,t.jsx)(d.SZ,{children:"Manage company accounts, billing, and access"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(U.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.I,{placeholder:"Search by company name or admin email...",value:eW,onChange:e=>{eH(e.target.value),e0(e=>({...e,page:1}))},className:"pl-9"})]})}),e4?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===f.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:eW?"No companies match your search":"No companies found"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3",children:f.map(e=>(0,t.jsx)("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors hover:bg-muted/50 ${e.isBlocked?"bg-red-50 border-red-200 hover:bg-red-100/50":"bg-white"} ${e.deletedAt?"opacity-60":""}`,onClick:()=>sX(e),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),e.deletedAt&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Deleted"}),e.isBlocked&&!e.deletedAt&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.billing?.accessOverride&&(0,t.jsxs)(C.C,{className:"text-xs bg-purple-100 text-purple-800",children:[(0,t.jsx)(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}),e.billing?.planKey&&(0,t.jsx)(C.C,{variant:"secondary",className:"text-xs capitalize",children:e.billing.planKey}),e.billing?.status&&"active"!==e.billing.status&&(0,t.jsx)(C.C,{variant:"outline",className:"text-xs capitalize",children:e.billing.status})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-3 gap-y-1",children:[e.adminEmail&&(0,t.jsxs)("span",{children:[(0,t.jsx)(L.Z,{className:"inline h-3 w-3 mr-1"}),e.adminEmail]}),(0,t.jsxs)("span",{children:[e._count.memberships," member",1!==e._count.memberships?"s":""]}),(0,t.jsxs)("span",{children:[e._count.boqs," BOQ",1!==e._count.boqs?"s":""]}),(0,t.jsxs)("span",{children:[(0,t.jsx)(D.Z,{className:"inline h-3 w-3 mr-1"}),(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]}),e.isBlocked&&e.blockReason&&(0,t.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Reason: ",e.blockReason]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 ml-4 flex-shrink-0",children:(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),sX(e)},children:(0,t.jsx)(R.Z,{className:"h-4 w-4"})})})]})},e.id))}),eX.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(eX.page-1)*eX.limit+1," to"," ",Math.min(eX.page*eX.limit,eX.totalCount)," of"," ",eX.totalCount," companies"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>e0(e=>({...e,page:e.page-1})),disabled:eX.page<=1,children:(0,t.jsx)(O.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",eX.page," of ",eX.totalPages]}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>e0(e=>({...e,page:e.page+1})),disabled:eX.page>=eX.totalPages,children:(0,t.jsx)(_.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),(0,t.jsx)(k.nU,{value:"coupons",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(d.ll,{children:"Promo Codes / Coupons"}),(0,t.jsxs)(i.z,{onClick:()=>sq(!0),size:"sm",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"})," Create Coupon"]})]}),(0,t.jsx)(d.aY,{children:et?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,t.jsx)("div",{className:"space-y-6",children:0===ay.length&&0===ab.length?(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No coupons created yet"}):(0,t.jsxs)(t.Fragment,{children:[ay.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Active Coupons"}),(0,t.jsx)("div",{className:"space-y-3",children:ay.map(e=>(0,t.jsx)(ec,{coupon:e,onToggle:()=>af(e),onArchive:()=>av(e),onDelete:()=>aN(e)},e.id))})]}),ab.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Archived Coupons"}),(0,t.jsx)("div",{className:"space-y-3 opacity-60",children:ab.map(e=>(0,t.jsx)(ec,{coupon:e,onToggle:()=>{},onArchive:()=>{},onDelete:()=>aN(e),isArchived:!0},e.id))})]})]})})})]})}),(0,t.jsx)(k.nU,{value:"plans",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)($.Z,{className:"h-5 w-5"})," Billing Plans"]}),(0,t.jsx)(d.SZ,{children:"Manage pricing, quotas, and features. Price changes auto-create new Stripe prices."})]}),(0,t.jsx)(d.aY,{children:ed?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(E.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===es.length?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No billing plans found. Run the seed script to create plans."}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:es.map(e=>(0,t.jsxs)("div",{className:`p-6 rounded-xl border-2 ${e.active?"bg-white":"bg-gray-50 opacity-75"} ${e.isMostPopular?"border-primary":"border-gray-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold",children:e.name}),e.isMostPopular&&(0,t.jsx)(C.C,{className:"bg-primary text-white",children:"Most Popular"}),!e.active&&(0,t.jsx)(C.C,{variant:"secondary",children:"Inactive"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Key: ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:e.planKey}),"per_seat"===e.seatModel&&(0,t.jsx)(C.C,{variant:"outline",className:"ml-2 text-xs",children:"Per Seat"})]})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>s6(e),className:"gap-1",children:[(0,t.jsx)(q.Z,{className:"h-3 w-3"})," Edit"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold",children:["$",(e.priceMonthlyUsdCents/100).toFixed(0),(0,t.jsx)("span",{className:"text-lg font-normal text-muted-foreground",children:"/mo"}),"per_seat"===e.seatModel&&(0,t.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"/user"})]}),e.priceAnnualUsdCents&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",(e.priceAnnualUsdCents/100).toFixed(0),"/year","per_seat"===e.seatModel&&"/user"]})]}),(0,t.jsxs)("div",{className:"mb-4 text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"BOQ Limit:"}),(0,t.jsx)("span",{className:null===e.boqLimitPerPeriod?"text-green-600 font-medium":"",children:null===e.boqLimitPerPeriod?"Unlimited":`${e.boqLimitPerPeriod}/period`})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"BOQ Templates:"}),(0,t.jsx)("span",{className:null===e.boqTemplatesLimit?"text-green-600 font-medium":"",children:null===e.boqTemplatesLimit?"Unlimited":e.boqTemplatesLimit})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Cover Templates:"}),(0,t.jsx)("span",{className:null===e.coverTemplatesLimit?"text-green-600 font-medium":"",children:null===e.coverTemplatesLimit?"Unlimited":e.coverTemplatesLimit})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Features:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(e.features||[]).slice(0,5).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)(Q.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},s)),(e.features||[]).length>5&&(0,t.jsxs)("li",{className:"text-xs text-muted-foreground",children:["+",(e.features||[]).length-5," more..."]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{children:["Stripe Product: ",e.stripeProductId||"Not configured"]}),(0,t.jsxs)("div",{children:["Monthly Price ID: ",e.stripePriceIdMonthly||"Not configured"]}),(0,t.jsxs)("div",{children:["Annual Price ID: ",e.stripePriceIdAnnual||"Not configured"]}),(0,t.jsxs)("div",{children:["Sort Order: ",e.sortOrder]}),e.priceHistory&&e.priceHistory.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Price History:"}),(0,t.jsx)("ul",{className:"ml-2",children:e.priceHistory.slice(0,3).map(e=>(0,t.jsxs)("li",{children:["$",(e.amountCents/100).toFixed(0)," (",e.interval,") - ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy"),e.isCurrent&&(0,t.jsx)(C.C,{className:"ml-1 text-xs",variant:"outline",children:"Current"})]},e.id))})]})]})]},e.id))})})]})})]}),(0,t.jsx)(m.Vq,{open:eh,onOpenChange:ej,children:(0,t.jsxs)(m.cZ,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{children:["Edit Plan: ",eu?.name]}),(0,t.jsx)(m.Be,{children:"Update pricing, quotas, and features. Price changes will create a new Stripe price."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Name"}),(0,t.jsx)(n.I,{value:eg.name,onChange:e=>ef(s=>({...s,name:e.target.value})),placeholder:"Plan name"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Monthly Price (USD cents)"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(n.I,{type:"number",value:eg.priceMonthlyUsdCents,onChange:e=>ef(s=>({...s,priceMonthlyUsdCents:parseInt(e.target.value)||0})),placeholder:"1900"})}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",(eg.priceMonthlyUsdCents/100).toFixed(2),"/mo"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Annual Price (USD cents)"}),(0,t.jsx)(n.I,{type:"number",value:eg.priceAnnualUsdCents,onChange:e=>ef(s=>({...s,priceAnnualUsdCents:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"Leave empty if no annual"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",eg.priceAnnualUsdCents?(Number(eg.priceAnnualUsdCents)/100).toFixed(2):"0.00","/yr"]})]})]}),eu&&(eu.priceMonthlyUsdCents!==eg.priceMonthlyUsdCents||(eu.priceAnnualUsdCents??"")!==eg.priceAnnualUsdCents)&&(0,t.jsx)("p",{className:"text-xs text-amber-600",children:"⚠️ Changing price will create new Stripe price(s). Existing subscribers keep their current price."}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"BOQ Limit/Period"}),(0,t.jsx)(n.I,{type:"number",value:eg.boqLimitPerPeriod,onChange:e=>ef(s=>({...s,boqLimitPerPeriod:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"BOQ Templates"}),(0,t.jsx)(n.I,{type:"number",value:eg.boqTemplatesLimit,onChange:e=>ef(s=>({...s,boqTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Cover Templates"}),(0,t.jsx)(n.I,{type:"number",value:eg.coverTemplatesLimit,onChange:e=>ef(s=>({...s,coverTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Sort Order"}),(0,t.jsx)(n.I,{type:"number",value:eg.sortOrder,onChange:e=>ef(s=>({...s,sortOrder:parseInt(e.target.value)||0}))})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ei.X,{id:"plan-active",checked:eg.active,onCheckedChange:e=>ef(s=>({...s,active:!0===e}))}),(0,t.jsx)(c._,{htmlFor:"plan-active",children:"Active (visible on pricing)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ei.X,{id:"plan-popular",checked:eg.isMostPopular,onCheckedChange:e=>ef(s=>({...s,isMostPopular:!0===e}))}),(0,t.jsx)(c._,{htmlFor:"plan-popular",children:"Most Popular badge"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{children:["Features ",(0,t.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(drag to reorder, click to edit)"})]}),(0,t.jsxs)("div",{className:"space-y-1 mt-2",children:[eg.features.map((e,s)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>ae(s),onDragOver:e=>as(e,s),onDragEnd:aa,className:`flex items-center gap-2 group ${ew===s?"opacity-50 bg-primary/10":""}`,children:[(0,t.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:(0,t.jsx)(V.Z,{className:"h-4 w-4"})}),ek===s?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,t.jsx)(n.I,{value:eZ,onChange:e=>eS(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),al()),"Escape"===e.key&&ar()},autoFocus:!0,className:"h-8 text-sm"}),(0,t.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",onClick:al,children:(0,t.jsx)(Q.Z,{className:"h-4 w-4 text-green-600"})}),(0,t.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",onClick:ar,children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>at(s),children:e}),(0,t.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>s9(s),children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})]})]},s)),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("div",{className:"w-4"})," ",(0,t.jsx)(n.I,{value:ev,onChange:e=>eN(e.target.value),placeholder:"Add a feature...",onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),s7()),className:"flex-1"}),(0,t.jsx)(i.z,{type:"button",variant:"outline",size:"sm",onClick:s7,children:(0,t.jsx)(I.Z,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>ej(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:s8,disabled:ey,children:[ey?(0,t.jsx)(E.Z,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]})]})}),(0,t.jsx)(j,{open:eG,onOpenChange:eK,children:(0,t.jsxs)(N,{className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,t.jsxs)(y,{children:[(0,t.jsx)(b,{children:"User Details"}),(0,t.jsx)(w,{children:eL?.email})]}),eQ?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin"})}):e$?(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"})," Profile"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",e$.user.fullName||e$.user.name||"-"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Email:"})," ",e$.user.email]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Phone:"})," ",e$.user.phone||"-"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Country:"})," ",e$.user.country||"-"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Joined:"})," ",(0,er.WU)(new Date(e$.user.createdAt),"MMM d, yyyy")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Last Login:"})," ",e$.user.lastLoginAt?(0,er.WU)(new Date(e$.user.lastLoginAt),"MMM d, yyyy HH:mm"):"Never"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),e$.user.isBlocked?(0,t.jsx)(C.C,{variant:"destructive",children:"Blocked"}):(0,t.jsx)(C.C,{variant:"outline",children:"Active"})]})]}),e$.user.blockReason&&(0,t.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",e$.user.blockReason]})]}),e$.company&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"})," Company"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",e$.company.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Members:"})," ",e$.company.memberCount]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"BOQs:"})," ",e$.company.boqCount]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),e$.company.isBlocked?(0,t.jsx)(C.C,{variant:"destructive",children:"Blocked"}):(0,t.jsx)(C.C,{variant:"outline",children:"Active"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(G.Z,{className:"h-4 w-4"})," Billing"]}),e$.billing?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Plan:"}),e$.billing.accessOverride?(0,t.jsxs)(C.C,{className:"bg-purple-100 text-purple-800",children:[(0,t.jsx)(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",e$.billing.overridePlan||"business",")"]}):(0,t.jsx)(C.C,{variant:"secondary",className:"capitalize",children:e$.billing.planKey||"None"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),aC(e$.billing.status)]}),e$.billing.stripeCustomerId&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",(0,t.jsx)("code",{className:"text-xs bg-muted px-1 rounded",children:e$.billing.stripeCustomerId})]}),e$.billing.stripeSubscriptionId&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Stripe Subscription:"})," ",(0,t.jsx)("code",{className:"text-xs bg-muted px-1 rounded",children:e$.billing.stripeSubscriptionId})]}),e$.billing.currentCouponCode&&(0,t.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Active Coupon:"}),(0,t.jsxs)(C.C,{variant:"outline",className:"bg-yellow-50",children:[(0,t.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),e$.billing.currentCouponCode]}),(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>aj(e$.company.id),children:[(0,t.jsx)(p.Z,{className:"h-3 w-3"})," Remove"]})]}),e$.billing.currentPeriodEnd&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,er.WU)(new Date(e$.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No billing information"})]}),e$.invoices.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"})," Payment History"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e$.invoices.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)," ",e.currency.toUpperCase()]}),(0,t.jsx)("span",{className:"mx-2",children:"•"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.C,{variant:"outline",className:"text-xs capitalize",children:e.status}),e.hostedInvoiceUrl&&(0,t.jsx)("a",{href:e.hostedInvoiceUrl,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(W.Z,{className:"h-3 w-3 text-muted-foreground"})})]})]},e.id))})]}),e$.couponRedemptions.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4"})," Coupon History"]}),(0,t.jsx)("div",{className:"space-y-2",children:e$.couponRedemptions.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.couponCode}),(0,t.jsx)("span",{className:"ml-2 text-muted-foreground",children:"free_forever"===e.couponType?"Free Forever":"Trial"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,er.WU)(new Date(e.redeemedAt),"MMM d, yyyy")}),e.revokedAt&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(i.z,{variant:e$.user.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("user",e$.user.id,e$.user.email,e$.user.isBlocked),children:e$.user.isBlocked?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.Z,{className:"h-4 w-4 mr-2"})," Unblock User"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 mr-2"})," Block User"]})}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>am(eL),children:[(0,t.jsx)(J.Z,{className:"h-4 w-4 mr-2"})," Password Reset"]}),e$.company&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>ap(e$.company.id,e$.company.name,!!e$.billing?.accessOverride),children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 mr-2"}),e$.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),(0,t.jsx)(i.z,{variant:e$.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("company",e$.company.id,e$.company.name,e$.company.isBlocked),children:e$.company.isBlocked?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.Z,{className:"h-4 w-4 mr-2"})," Unblock Company"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 mr-2"})," Block Company"]})})]})]}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t border-red-200",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Danger Zone"}),(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>{sp(""),sx(!0)},disabled:!!e$.user.deletedAt,children:[(0,t.jsx)(Y.Z,{className:"h-4 w-4 mr-2"}),e$.user.deletedAt?"User Deleted":"Delete User"]}),e$.user.deletedAt&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Deleted on ",(0,er.WU)(new Date(e$.user.deletedAt),"MMM d, yyyy")]})]})]})]}):null]})}),(0,t.jsx)(j,{open:e9,onOpenChange:se,children:(0,t.jsxs)(N,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,t.jsxs)(y,{children:[(0,t.jsx)(b,{children:"Company Details"}),(0,t.jsx)(w,{children:e2?.name})]}),e8?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin"})}):e5?(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"})," Company Info"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Name:"}),sn?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(n.I,{value:sd,onChange:e=>so(e.target.value),className:"h-8"}),(0,t.jsx)(i.z,{size:"sm",onClick:s4,children:(0,t.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>sc(!1),children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-medium",children:e5.company.name}),(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>{so(e5.company.name),sc(!0)},children:(0,t.jsx)(q.Z,{className:"h-3 w-3"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Created:"})," ",(0,er.WU)(new Date(e5.company.createdAt),"MMM d, yyyy HH:mm")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Currency:"})," ",e5.company.currencySymbol]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),e5.company.deletedAt?(0,t.jsx)(C.C,{variant:"destructive",children:"Deleted"}):e5.company.isBlocked?(0,t.jsx)(C.C,{variant:"destructive",children:"Blocked"}):(0,t.jsx)(C.C,{variant:"outline",children:"Active"})]})]}),e5.company.blockReason&&(0,t.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",e5.company.blockReason]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(G.Z,{className:"h-4 w-4"})," Billing"]}),e5.billing?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Plan:"}),e5.billing.accessOverride?(0,t.jsxs)(C.C,{className:"bg-purple-100 text-purple-800",children:[(0,t.jsx)(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",e5.billing.overridePlan||"business",")"]}):(0,t.jsx)(C.C,{variant:"secondary",className:"capitalize",children:e5.billing.planKey||"free"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),aC(e5.billing.status)]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Interval:"})," ",e5.billing.billingInterval||"-"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Seats:"})," ",e5.billing.seatQuantity||1]}),e5.billing.stripeCustomerId&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",(0,t.jsx)("code",{className:"text-xs bg-muted px-1 rounded",children:e5.billing.stripeCustomerId})]}),e5.billing.currentPeriodEnd&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,er.WU)(new Date(e5.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No billing record"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(K.Z,{className:"h-4 w-4"})," Usage"]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.boqsThisPeriod}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"BOQs this period"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.totalBoqs}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total BOQs"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.totalCustomers}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Customers"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.boqTemplates}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"BOQ Templates"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.coverTemplates}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Cover Templates"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e5.usage.activeMembersCount}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Active Members"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"})," Members (",e5.members.length,")"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e5.members.map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border ${e.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.fullName||e.email}),(0,t.jsx)(C.C,{variant:"ADMIN"===e.role?"default":"secondary",className:"text-xs",children:e.role}),!e.isActive&&(0,t.jsx)(C.C,{variant:"outline",className:"text-xs",children:"Inactive"}),e.isBlocked&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Blocked"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground flex flex-wrap gap-x-3 gap-y-1 mt-1",children:[(0,t.jsx)("span",{children:e.email}),e.country&&(0,t.jsxs)("span",{children:[(0,t.jsx)(B.Z,{className:"inline h-3 w-3 mr-1"}),e.country]}),e.phone&&(0,t.jsxs)("span",{children:[(0,t.jsx)(M.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]})]})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{let s=x.find(s=>s.id===e.id);s?(s0(),an(s)):el.ZP.error("User not in current view. Search for them in Users tab.")},children:(0,t.jsx)(R.Z,{className:"h-4 w-4"})})]},e.id))})]}),e5.grants.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4"})," Access Grants"]}),(0,t.jsx)("div",{className:"space-y-2",children:e5.grants.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.C,{variant:"outline",className:"mr-2",children:e.grantType}),e.planKey&&(0,t.jsx)("span",{className:"capitalize",children:e.planKey})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.endsAt&&(0,t.jsxs)("span",{children:["Expires: ",(0,er.WU)(new Date(e.endsAt),"MMM d, yyyy")]}),e.revokedAt&&(0,t.jsx)(C.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),e5.billing?.invoices&&e5.billing.invoices.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"})," Recent Invoices"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e5.billing.invoices.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)]}),(0,t.jsx)("span",{className:"mx-2",children:"•"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),(0,t.jsx)(C.C,{variant:"outline",className:"text-xs capitalize",children:e.status})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>ap(e5.company.id,e5.company.name,!!e5.billing?.accessOverride),children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 mr-2"}),e5.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),(0,t.jsx)(i.z,{variant:e5.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>ad("company",e5.company.id,e5.company.name,e5.company.isBlocked),children:e5.company.isBlocked?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.Z,{className:"h-4 w-4 mr-2"})," Unblock"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 mr-2"})," Block"]})}),!e5.company.deletedAt&&(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>s1(e2),children:[(0,t.jsx)(Y.Z,{className:"h-4 w-4 mr-2"})," Delete Company"]})]})]})]}):null]})}),(0,t.jsx)(m.Vq,{open:ss,onOpenChange:sa,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2 text-red-600",children:[(0,t.jsx)(Y.Z,{className:"h-5 w-5"}),"Delete Company"]}),(0,t.jsxs)(m.Be,{children:['This action will permanently disable access for all members of "',e2?.name,'".']})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-red-800 mb-2",children:"Warning: This action is destructive"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-red-700 space-y-1",children:[(0,t.jsx)("li",{children:"All members will lose access immediately"}),(0,t.jsx)("li",{children:"Active Stripe subscription will be canceled"}),(0,t.jsx)("li",{children:"Company data will be archived (soft delete)"}),(0,t.jsx)("li",{children:"BOQs and templates will be preserved but inaccessible"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"deleteConfirm",className:"text-sm font-medium",children:["Type ",(0,t.jsx)("span",{className:"font-mono font-bold text-red-600",children:"DELETE"})," to confirm"]}),(0,t.jsx)(n.I,{id:"deleteConfirm",value:st,onChange:e=>sl(e.target.value),placeholder:"DELETE",className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sa(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{variant:"destructive",onClick:s2,disabled:"DELETE"!==st||sr,children:[sr&&(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete Company"]})]})]})}),(0,t.jsx)(m.Vq,{open:sm,onOpenChange:sx,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2 text-red-600",children:[(0,t.jsx)(Y.Z,{className:"h-5 w-5"}),"Delete User"]}),(0,t.jsxs)(m.Be,{children:['This will disable login and access for "',eL?.email,'".']})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-red-800 mb-2",children:"Impact of deleting this user"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-red-700 space-y-1",children:[(0,t.jsx)("li",{children:"User will not be able to log in"}),(0,t.jsx)("li",{children:"All company memberships will be deactivated"}),(0,t.jsx)("li",{children:"Their created BOQs and templates will remain intact"}),(0,t.jsx)("li",{children:"This is a soft delete - data is preserved for recovery"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"deleteUserConfirm",className:"text-sm font-medium",children:["Type ",(0,t.jsx)("span",{className:"font-mono font-bold text-red-600",children:"DELETE"})," to confirm"]}),(0,t.jsx)(n.I,{id:"deleteUserConfirm",value:su,onChange:e=>sp(e.target.value),placeholder:"DELETE",className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sx(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{variant:"destructive",onClick:s3,disabled:"DELETE"!==su||sh,children:[sh&&(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete User"]})]})]})}),(0,t.jsx)(m.Vq,{open:sg,onOpenChange:sf,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsx)(m.fK,{children:(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(X.Z,{className:"h-5 w-5 text-yellow-500"}),sv?.isBlocked?"Unblock":"Block"," ",sv?.type==="company"?"Company":"User"]})}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:sv?.isBlocked?`Are you sure you want to unblock "${sv?.name}"?`:`Are you sure you want to block "${sv?.name}"? They will lose access to all /app/* pages.`}),!sv?.isBlocked&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"blockReason",children:"Block Reason (optional)"}),(0,t.jsx)(n.I,{id:"blockReason",value:sy,onChange:e=>sb(e.target.value),placeholder:"e.g., Abuse, Non-payment",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ei.X,{id:"cancelSub",checked:sw,onCheckedChange:e=>sC(e)}),(0,t.jsx)(c._,{htmlFor:"cancelSub",className:"font-normal cursor-pointer",children:"Cancel Stripe subscription immediately"})]})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sf(!1),children:"Cancel"}),(0,t.jsx)(i.z,{variant:sv?.isBlocked?"default":"destructive",onClick:ao,children:sv?.isBlocked?"Unblock":"Block"})]})]})}),(0,t.jsx)(m.Vq,{open:sk,onOpenChange:sP,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(J.Z,{className:"h-5 w-5"})," Password Reset Options"]}),(0,t.jsx)(m.Be,{children:"For security, passwords cannot be viewed. Use these options to help the user reset their password."})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm font-medium mb-2",children:["User: ",sZ?.email]}),sZ?.forcePasswordReset&&(0,t.jsx)(C.C,{variant:"outline",className:"text-yellow-700 bg-yellow-50",children:"Force Reset Enabled"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>ax("generate_link"),children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"})," Generate Reset Link"]}),sA&&(0,t.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-sm",children:[(0,t.jsx)("p",{className:"text-green-800 mb-2",children:"Reset link generated:"}),(0,t.jsx)("code",{className:"block text-xs bg-white p-2 rounded break-all",children:sA}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>au(sA),children:[(0,t.jsx)(ee.Z,{className:"h-3 w-3 mr-2"})," Copy"]})]}),(0,t.jsx)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>ax(sZ?.forcePasswordReset?"clear_force_reset":"force_reset"),children:sZ?.forcePasswordReset?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"})," Clear Force Reset Flag"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.Z,{className:"h-4 w-4 mr-2"})," Force Reset on Next Login"]})})]})]}),(0,t.jsx)(m.cN,{children:(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sP(!1),children:"Close"})})]})}),(0,t.jsx)(m.Vq,{open:sz,onOpenChange:sU,children:(0,t.jsxs)(m.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(P.Z,{className:"h-5 w-5 text-purple-500"}),sE?.hasGrant?"Revoke":"Grant"," Admin Access"]}),(0,t.jsx)(m.Be,{children:sE?.hasGrant?"Remove admin-granted access for this company.":"Grant admin access to bypass subscription requirements."})]}),(0,t.jsx)("div",{className:"py-4",children:sE?.hasGrant?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-sm",children:[(0,t.jsxs)("p",{className:"text-amber-800",children:["Revoking access for ",(0,t.jsx)("strong",{children:sE?.companyName})," will:"]}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-amber-700 mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"Remove admin-granted plan access"}),(0,t.jsx)("li",{children:"Company will fall back to Free plan or existing subscription"}),(0,t.jsx)("li",{children:"No data will be deleted"})]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg text-sm",children:(0,t.jsxs)("p",{className:"text-purple-800",children:["Granting access to ",(0,t.jsx)("strong",{children:sE?.companyName})," will override any existing subscription."]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"freeForeverPlan",children:"Plan Level"}),(0,t.jsxs)(o.Ph,{value:sB,onValueChange:e=>sM(e),children:[(0,t.jsx)(o.i4,{className:"mt-1",children:(0,t.jsx)(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"business",children:"Business (Unlimited BOQs, Team Features)"}),(0,t.jsx)(o.Ql,{value:"advance",children:"Advance (50 BOQs/month)"}),(0,t.jsx)(o.Ql,{value:"starter",children:"Starter (10 BOQs/month)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"grantExpiresAt",children:["Expiry Date ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),(0,t.jsx)(n.I,{id:"grantExpiresAt",type:"datetime-local",value:sD,onChange:e=>sR(e.target.value),className:"mt-1"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty for permanent access. If set, access expires automatically."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"grantNotes",children:["Notes ",(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),(0,t.jsx)(n.I,{id:"grantNotes",value:sO,onChange:e=>s_(e.target.value),placeholder:"e.g., Early adopter, Partnership deal",className:"mt-1"})]})]})}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sU(!1),disabled:sL,children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:ah,disabled:sL,children:[sL&&(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 animate-spin"}),sE?.hasGrant?"Revoke Access":"Grant Access"]})]})]})}),(0,t.jsx)(m.Vq,{open:s$,onOpenChange:sq,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsx)(m.fK,{children:(0,t.jsx)(m.$N,{children:"Create New Coupon"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"code",children:"Coupon Code"}),(0,t.jsx)(n.I,{id:"code",value:sQ.code,onChange:e=>sV(s=>({...s,code:e.target.value.toUpperCase()})),placeholder:"e.g., TRIAL14, FREEFOREVER",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"type",children:"Coupon Type"}),(0,t.jsxs)(o.Ph,{value:sQ.type,onValueChange:e=>sV(s=>({...s,type:e})),children:[(0,t.jsx)(o.i4,{className:"mt-1",children:(0,t.jsx)(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"trial_days",children:"Trial Days"}),(0,t.jsx)(o.Ql,{value:"free_forever",children:"Free Forever"})]})]})]}),"trial_days"===sQ.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"trialDays",children:"Trial Days"}),(0,t.jsx)(n.I,{id:"trialDays",type:"number",min:"1",max:"365",value:sQ.trialDays,onChange:e=>sV(s=>({...s,trialDays:parseInt(e.target.value)||14})),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Allowed Plans (optional)"}),(0,t.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(ei.X,{checked:sQ.allowedPlans.includes("starter"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"starter"]:s.allowedPlans.filter(e=>"starter"!==e)}))}}),(0,t.jsx)("span",{className:"text-sm",children:"Starter"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(ei.X,{checked:sQ.allowedPlans.includes("advance"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"advance"]:s.allowedPlans.filter(e=>"advance"!==e)}))}}),(0,t.jsx)("span",{className:"text-sm",children:"Advance"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(ei.X,{checked:sQ.allowedPlans.includes("business"),onCheckedChange:e=>{sV(s=>({...s,allowedPlans:e?[...s.allowedPlans,"business"]:s.allowedPlans.filter(e=>"business"!==e)}))}}),(0,t.jsx)("span",{className:"text-sm",children:"Business"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave unchecked for all plans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"maxRedemptions",children:"Max Redemptions (optional)"}),(0,t.jsx)(n.I,{id:"maxRedemptions",type:"number",min:"1",value:sQ.maxRedemptions,onChange:e=>sV(s=>({...s,maxRedemptions:e.target.value})),placeholder:"Leave empty for unlimited",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),(0,t.jsx)(n.I,{id:"expiresAt",type:"date",value:sQ.expiresAt,onChange:e=>sV(s=>({...s,expiresAt:e.target.value})),className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>sq(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:ag,disabled:sG,children:[sG&&(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Coupon"]})]})]})})]})})}function ec({coupon:e,onToggle:s,onArchive:a,onDelete:l,isArchived:r=!1}){return(0,t.jsxs)("div",{className:"p-4 rounded-lg border bg-white flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.code}),(0,t.jsx)(C.C,{variant:"free_forever"===e.type?"default":"secondary",className:"text-xs",children:"free_forever"===e.type?"Free Forever":`${e.trialDays} Day Trial`}),!e.active&&!r&&(0,t.jsx)(C.C,{variant:"outline",className:"text-xs",children:"Disabled"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.allowedPlans.length>0?`For ${e.allowedPlans.map(e=>"starter"===e?"Starter":"advance"===e?"Advance":"Business").join(", ")}`:"All plans"," ","• Used ",e.currentRedemptions,e.maxRedemptions?`/${e.maxRedemptions}`:""," times",e.expiresAt&&` • Expires ${(0,er.WU)(new Date(e.expiresAt),"MMM d, yyyy")}`]})]}),!r&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:s,title:e.active?"Disable":"Enable",children:e.active?(0,t.jsx)(es.Z,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(ea.Z,{className:"h-5 w-5 text-muted-foreground"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:a,title:"Archive",children:(0,t.jsx)(et.Z,{className:"h-4 w-4 text-muted-foreground"})}),0===e.currentRedemptions&&(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:l,title:"Delete",children:(0,t.jsx)(Y.Z,{className:"h-4 w-4 text-red-500"})})]}),r&&0===e.currentRedemptions&&(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:l,title:"Delete",children:(0,t.jsx)(Y.Z,{className:"h-4 w-4 text-red-500"})})]})}},1335:function(e,s,a){"use strict";a.d(s,{C:function(){return n}});var t=a(5444);a(9300);var l=a(2371),r=a(5522);let i=(0,l.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gradient-to-r from-purple-500 to-lavender-500 text-white",secondary:"border-transparent bg-purple-100 text-purple-700 hover:bg-purple-200",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border-purple-200 text-purple-700 bg-white",success:"border-transparent bg-emerald-100 text-emerald-700",warning:"border-transparent bg-amber-100 text-amber-700"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...a}){return(0,t.jsx)("div",{className:(0,r.cn)(i({variant:s}),e),...a})}},6167:function(e,s,a){"use strict";a.d(s,{X:function(){return c}});var t=a(5444),l=a(9300),r=a(1831),i=a(7248),n=a(5522);let c=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.fC,{ref:a,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,t.jsx)(r.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})}));c.displayName=r.fC.displayName},4678:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(5444),l=a(9300),r=a(5522);let i=l.forwardRef(({className:e,type:s,...a},l)=>(0,t.jsx)("input",{type:s,className:(0,r.cn)("flex h-11 w-full rounded-xl border-2 border-purple-100 bg-white px-4 py-2 text-sm text-foreground transition-all duration-200","placeholder:text-muted-foreground","hover:border-purple-200","focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-100","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted","file:border-0 file:bg-transparent file:text-sm file:font-medium",e),ref:l,...a}));i.displayName="Input"},4635:function(e,s,a){"use strict";a.d(s,{_:function(){return d}});var t=a(5444),l=a(9300),r=a(4100),i=a(2371),n=a(5522);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.f,{ref:a,className:(0,n.cn)(c(),e),...s}));d.displayName=r.f.displayName},489:function(e,s,a){"use strict";a.d(s,{Bw:function(){return h},Ph:function(){return o},Ql:function(){return j},i4:function(){return x},ki:function(){return m}});var t=a(5444),l=a(9300),r=a(3280),i=a(3751),n=a(6997),c=a(7248),d=a(5522);let o=r.fC;r.ZA;let m=r.B4,x=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(r.xz,{ref:l,className:(0,d.cn)("flex h-11 w-full items-center justify-between gap-2 rounded-xl border-2 border-purple-100 bg-white px-4 py-2 text-sm","transition-all duration-200","placeholder:text-muted-foreground","hover:border-purple-200","focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-100","disabled:cursor-not-allowed disabled:opacity-50","[&>span]:line-clamp-1",e),...a,children:[s,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(i.Z,{className:"h-4 w-4 text-purple-400 transition-transform duration-200"})})]}));x.displayName=r.xz.displayName;let u=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-purple-400",e),...s,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})}));u.displayName=r.u_.displayName;let p=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1 text-purple-400",e),...s,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})}));p.displayName=r.$G.displayName;let h=l.forwardRef(({className:e,children:s,position:a="popper",...l},i)=>(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border border-purple-100 bg-white shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...l,children:[(0,t.jsx)(u,{}),(0,t.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(p,{})]})}));h.displayName=r.VY.displayName,l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold text-purple-700",e),...s})).displayName=r.__.displayName;let j=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(r.ck,{ref:l,className:(0,d.cn)("relative flex w-full cursor-pointer select-none items-center rounded-lg py-2 pl-8 pr-2 text-sm outline-none","transition-colors duration-150","hover:bg-purple-50 hover:text-purple-700","focus:bg-purple-50 focus:text-purple-700","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4 text-purple-500"})})}),(0,t.jsx)(r.eT,{children:s})]}));j.displayName=r.ck.displayName,l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-purple-100",e),...s})).displayName=r.Z0.displayName},6765:function(e,s,a){"use strict";a.d(s,{SP:function(){return d},dr:function(){return c},mQ:function(){return n},nU:function(){return o}});var t=a(5444),l=a(9300),r=a(9035),i=a(5522);let n=r.fC,c=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=r.aV.displayName;let d=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=r.xz.displayName;let o=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(r.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=r.VY.displayName}},function(e){e.O(0,[762,162,84,206,542,75,904,523,157,408,386,156,744],function(){return e(e.s=5822)}),_N_E=e.O()}]);