exports.id=9845,exports.ids=[9845],exports.modules={47242:(e,t,r)=>{Promise.resolve().then(r.bind(r,46618)),Promise.resolve().then(r.bind(r,48768))},87133:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,84114,23)),Promise.resolve().then(r.t.bind(r,28866,23)),Promise.resolve().then(r.t.bind(r,31324,23)),Promise.resolve().then(r.t.bind(r,83567,23)),Promise.resolve().then(r.t.bind(r,55996,23)),Promise.resolve().then(r.t.bind(r,10050,23))},46618:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i});var s=r(62901),a=r(84700),n=r(39350);function i({children:e}){return(0,s.jsxs)(a.SessionProvider,{children:[e,s.jsx(n.x7,{position:"top-right"})]})}},22270:(e,t,r)=>{"use strict";r.d(t,{AppLayout:()=>C});var s=r(62901),a=r(84700),n=r(84374),i=r(24383),o=r(62392),l=r(68637),c=r(83671),d=r(48622),p=r(61989),u=r(66843),m=r(64283),h=r(67935),f=r(33901),x=r(1320),g=r(6731),b=r(44928),v=r(32317),j=r(60004),w=r(96527),y=r(25650),N=r(27878);let P=[{name:"Dashboard",href:"/app/dashboard",icon:c.Z},{name:"BOQs",href:"/app/boqs",icon:d.Z},{name:"Templates",href:"/app/templates",icon:p.Z},{name:"Customers",href:"/app/customers",icon:u.Z},{name:"Team",href:"/app/team",icon:m.Z},{name:"Settings",href:"/app/settings",icon:h.Z}],k=[{name:"Overview",href:"/app/glorand",icon:f.Z},{name:"Users",href:"/app/glorand?tab=users",icon:u.Z},{name:"Companies",href:"/app/glorand?tab=companies",icon:x.Z},{name:"Coupons",href:"/app/glorand?tab=coupons",icon:g.Z}];function Z(){let e=(0,n.usePathname)(),{data:t}=(0,a.useSession)()||{},[r,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(!1),u=e?.startsWith("/app/glorand"),m=d&&u?k:P;return(0,s.jsxs)("div",{className:(0,l.cn)("h-screen bg-white border-r border-purple-100/50 flex flex-col transition-all duration-300",r?"w-20":"w-64"),children:[s.jsx("div",{className:"p-4 border-b border-purple-100/50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(o.default,{href:d&&u?"/app/glorand":"/app/dashboard",className:"flex items-center space-x-3",children:[s.jsx("div",{className:(0,l.cn)("w-10 h-10 rounded-xl flex items-center justify-center shadow-md transition-all duration-200",d&&u?"bg-gradient-to-br from-amber-500 to-orange-500":"bg-gradient-to-br from-purple-500 to-lavender-500"),children:d&&u?s.jsx(b.Z,{className:"w-5 h-5 text-white"}):s.jsx(v.Z,{className:"w-5 h-5 text-white"})}),!r&&s.jsx("span",{className:(0,l.cn)("text-lg font-bold bg-clip-text text-transparent",d&&u?"bg-gradient-to-r from-amber-600 to-orange-600":"bg-gradient-to-r from-purple-600 to-lavender-600"),children:d&&u?"Admin Panel":"MakeEstimate"})]}),s.jsx(N.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-purple-400 hover:text-purple-600 hover:bg-purple-50",onClick:()=>c(!r),children:r?s.jsx(j.Z,{className:"h-4 w-4"}):s.jsx(w.Z,{className:"h-4 w-4"})})]})}),(0,s.jsxs)("nav",{className:"flex-1 p-4 space-y-1",children:[m.map(t=>{let a=t.href.includes("?tab="),n=a?t.href.split("?tab=")[1]:null,i=!1;i=a?"/app/glorand"===e&&null===n:"/app/glorand"===t.href?"/app/glorand"===e:e===t.href||e?.startsWith?.(t.href+"/");let c=d&&u;return(0,s.jsxs)(o.default,{href:t.href,className:(0,l.cn)("flex items-center space-x-3 px-3 py-2.5 rounded-xl transition-all duration-200",i?c?"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 font-medium shadow-sm":"bg-gradient-to-r from-purple-50 to-lavender-50 text-purple-700 font-medium shadow-sm":c?"text-gray-600 hover:bg-amber-50 hover:text-amber-600":"text-gray-600 hover:bg-purple-50 hover:text-purple-600"),children:[s.jsx(t.icon,{className:(0,l.cn)("h-5 w-5 transition-colors",i?c?"text-amber-600":"text-purple-500":"")}),!r&&s.jsx("span",{children:t.name})]},t.name)}),d&&!u&&(0,s.jsxs)(o.default,{href:"/app/glorand",className:(0,l.cn)("flex items-center space-x-3 px-3 py-2.5 rounded-xl transition-all duration-200","text-amber-600 hover:bg-amber-50"),children:[s.jsx(b.Z,{className:"h-5 w-5"}),!r&&s.jsx("span",{children:"Admin Panel"})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-purple-100/50",children:[!r&&t?.user&&(0,s.jsxs)("div",{className:"mb-3 px-3",children:[s.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:t.user?.companyName||"Company"}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.user?.email})]}),(0,s.jsxs)(N.z,{variant:"ghost",className:(0,l.cn)("w-full text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-xl",r?"justify-center":"justify-start"),onClick:()=>(0,a.signOut)({callbackUrl:"/login"}),children:[s.jsx(y.Z,{className:"h-5 w-5"}),!r&&s.jsx("span",{className:"ml-3",children:"Sign Out"})]})]})]})}var S=r(10333);function C({children:e}){let{data:t,status:r}=(0,a.useSession)()||{},o=(0,n.useRouter)(),l=(0,n.usePathname)(),[c,d]=(0,i.useState)(!1),[p,u]=(0,i.useState)(null),m=["/app/dashboard","/app/customers","/app/settings","/app/boq"].some(e=>l?.startsWith(e));return(l?.startsWith("/app/glorand"),(0,i.useCallback)(async()=>{try{let e=await fetch("/api/admin/check");if(e.ok){let t=await e.json();return u(t.isAdmin),t.isAdmin}}catch(e){console.error("Failed to check admin status:",e)}return u(!1),!1},[]),(0,i.useCallback)(async()=>{if(t?.user){try{let e=await fetch("/api/billing/status");if(e.ok){let t=await e.json();if(t.isBlocked){o.replace(`/blocked${t.blockReason?`?reason=${encodeURIComponent(t.blockReason)}`:""}`);return}if(t.hasTrialGrant&&t.trialEndsAt&&new Date(t.trialEndsAt)<new Date){o.replace("/pricing?trial=ended");return}if(!t.hasActiveSubscription&&!t.hasAdminGrant&&!t.hasTrialGrant){o.replace("/pricing?subscription=required");return}}}catch(e){console.error("Failed to check blocked status:",e)}d(!0)}},[t?.user,o]),"loading"!==r&&null!==p&&("authenticated"!==r||c))?t?p&&m?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx(S.Z,{className:"h-8 w-8 animate-spin text-primary"})}):(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(Z,{}),s.jsx("main",{className:"flex-1 overflow-auto",children:e})]}):null:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx(S.Z,{className:"h-8 w-8 animate-spin text-primary"})})}},48768:(e,t,r)=>{"use strict";r.d(t,{MetaPixelProvider:()=>d});var s=r(62901),a=r(24383),n=r(84374),i=r(4990),o=r(74317);let l=(0,o.mO)(),c=(0,o.kR)();function d({children:e}){(0,n.usePathname)(),(0,n.useSearchParams)(),(0,a.useRef)(!1),(0,a.useRef)(null);let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[l&&c&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.default,{id:"meta-pixel",strategy:"afterInteractive",dangerouslySetInnerHTML:{__html:`
                !function(f,b,e,v,n,t,s)
                {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
                n.callMethod.apply(n,arguments):n.queue.push(arguments)};
                if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
                n.queue=[];t=b.createElement(e);t.async=!0;
                t.src=v;s=b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t,s)}(window, document,'script',
                'https://connect.facebook.net/en_US/fbevents.js');
                fbq('init', '${c}');
                fbq('track', 'PageView');
              `}}),s.jsx("noscript",{children:s.jsx("img",{height:"1",width:"1",style:{display:"none"},src:`https://www.facebook.com/tr?id=${c}&ev=PageView&noscript=1`,alt:""})})]}),e]})}},27878:(e,t,r)=>{"use strict";r.d(t,{d:()=>l,z:()=>c});var s=r(62901),a=r(24383),n=r(42049),i=r(47279),o=r(68637);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gradient-to-r from-purple-500 to-lavender-500 text-white shadow-md hover:shadow-lg hover:from-purple-600 hover:to-lavender-600 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-purple-200 bg-white text-purple-700 hover:bg-purple-50 hover:border-purple-300 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"text-foreground hover:bg-purple-100/50 hover:text-purple-700 active:scale-[0.98]",link:"text-purple-600 underline-offset-4 hover:underline hover:text-purple-700",success:"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-sm hover:from-emerald-600 hover:to-green-600 active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},c)=>{let d=a?n.g7:"button";return s.jsx(d,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:c,...i})});c.displayName="Button"},23803:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>l});var s=r(62901),a=r(24383),n=r(68637);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-2xl border border-purple-100/50 bg-white shadow-card transition-all duration-200","hover:shadow-card-hover",e),...t}));i.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("text-xl font-semibold leading-none tracking-tight text-foreground",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},74317:(e,t,r)=>{"use strict";function s(){return!0}function a(){return"2738592306503525"}function n(...e){}function i(e,t){}function o(e,t){}r.d(t,{OD:()=>i,PR:()=>o,kR:()=>a,mO:()=>s})},68637:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(84330),a=r(77189);function n(...e){return(0,a.m6)((0,s.W)(e))}},87369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,dynamic:()=>d,metadata:()=>p});var s=r(83537),a=r(57416),n=r.n(a),i=r(3995);r(26148);var o=r(88895);let l=(0,o.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/auth-provider.tsx#AuthProvider`),c=(0,o.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/meta-pixel-provider.tsx#MetaPixelProvider`);(0,o.createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/meta-pixel-provider.tsx#default`);let d="force-dynamic",p={title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",icons:{icon:"/favicon.svg",shortcut:"/favicon.svg"},openGraph:{title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",images:["/og-image.png"]},metadataBase:new URL(process.env.NEXTAUTH_URL||"http://localhost:3000")};function u({children:e}){return(0,s.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[s.jsx("head",{children:s.jsx("script",{src:"https://apps.abacus.ai/chatllm/appllm-lib.js"})}),s.jsx("body",{className:n().className,children:s.jsx(l,{children:s.jsx(i.Suspense,{fallback:null,children:s.jsx(c,{children:e})})})})]})}},26148:()=>{}};