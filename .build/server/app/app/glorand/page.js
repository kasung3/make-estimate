(()=>{var e={};e.id=4308,e.ids=[4308],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},86715:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d}),a(83292),a(83336),a(71363);var t=a(36576),r=a(72007),l=a(21818),i=a.n(l),n=a(88897),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["app",{children:["glorand",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,83292)),"/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,83336)),"/home/ubuntu/make_estimate/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/page.tsx"],m="/app/glorand/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/glorand/page",pathname:"/app/glorand",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61548:(e,s,a)=>{Promise.resolve().then(a.bind(a,88565))},88565:(e,s,a)=>{"use strict";a.d(s,{GlorandAdminClient:()=>ei});var t=a(62901),r=a(24383),l=a(22270),i=a(27878),n=a(250),c=a(82657),d=a(23803),o=a(72388),m=a(65923),x=a(18832),p=a(47279),h=a(42594),u=a(68637);let j=x.fC;x.xz,x.x8;let g=x.h_,y=r.forwardRef(({className:e,...s},a)=>t.jsx(x.aV,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:a}));y.displayName=x.aV.displayName;let v=(0,p.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=r.forwardRef(({side:e="right",className:s,children:a,...r},l)=>(0,t.jsxs)(g,{children:[t.jsx(y,{}),(0,t.jsxs)(x.VY,{ref:l,className:(0,u.cn)(v({side:e}),s),...r,children:[a,(0,t.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(h.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=x.VY.displayName;let N=({className:e,...s})=>t.jsx("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});N.displayName="SheetHeader";let b=r.forwardRef(({className:e,...s},a)=>t.jsx(x.Dx,{ref:a,className:(0,u.cn)("text-lg font-semibold text-foreground",e),...s}));b.displayName=x.Dx.displayName;let w=r.forwardRef(({className:e,...s},a)=>t.jsx(x.dk,{ref:a,className:(0,u.cn)("text-sm text-muted-foreground",e),...s}));w.displayName=x.dk.displayName;var k=a(31606),C=a(5102),P=a(99311),Z=a(44928),S=a(66843),A=a(1320),M=a(6731),F=a(79357),U=a(91046),_=a(10333),z=a(71945);let B=(0,z.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var T=a(32614),R=a(76021),L=a(91334),q=a(96527),O=a(60004);let E=(0,z.Z)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);var D=a(97718);let I=(0,z.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var $=a(53275),Q=a(85453),V=a(6e4),G=a(76244);let K=(0,z.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var H=a(83898);let W=(0,z.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var J=a(21680);let X=(0,z.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Y=(0,z.Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),ee=(0,z.Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),es=(0,z.Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var ea=a(71028),et=a(39350),er=a(27221),el=a(16098);function ei({adminEmail:e}){let[s,a]=(0,r.useState)("users"),[x,p]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[z,Y]=(0,r.useState)([]),[ee,es]=(0,r.useState)(!0),[ea,ei]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[eo,em]=(0,r.useState)(null),[ex,ep]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)({name:"",priceMonthlyUsdCents:0,priceAnnualUsdCents:"",boqLimitPerPeriod:"",boqTemplatesLimit:"",coverTemplatesLimit:"",features:[],isMostPopular:!1,sortOrder:0,active:!0}),[ej,eg]=(0,r.useState)(""),[ey,ev]=(0,r.useState)(!1),[ef,eN]=(0,r.useState)(null),[eb,ew]=(0,r.useState)(null),[ek,eC]=(0,r.useState)(""),[eP,eZ]=(0,r.useState)(""),[eS,eA]=(0,r.useState)(""),[eM,eF]=(0,r.useState)(""),[eU,e_]=(0,r.useState)(""),[ez,eB]=(0,r.useState)(""),[eT,eR]=(0,r.useState)("newest"),[eL,eq]=(0,r.useState)(null),[eO,eE]=(0,r.useState)(null),[eD,eI]=(0,r.useState)(!1),[e$,eQ]=(0,r.useState)(!1),[eV,eG]=(0,r.useState)(!1),[eK,eH]=(0,r.useState)(null),[eW,eJ]=(0,r.useState)(""),[eX,eY]=(0,r.useState)(!0),[e0,e1]=(0,r.useState)(!1),[e2,e4]=(0,r.useState)(null),[e3,e5]=(0,r.useState)(""),[e8,e6]=(0,r.useState)(!1),[e7,e9]=(0,r.useState)(null),[se,ss]=(0,r.useState)("business"),[sa,st]=(0,r.useState)(!1),[sr,sl]=(0,r.useState)({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),[si,sn]=(0,r.useState)(!1),sc=async()=>{es(!0);try{let e=new URLSearchParams({page:ec.page.toString(),limit:ec.limit.toString(),sortBy:eT});eS&&e.set("query",eS),eM&&e.set("plan",eM),eU&&e.set("status",eU),ez&&e.set("blocked",ez);let s=await fetch(`/api/admin/users?${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();p(a.users||[]),ed(a.pagination)}catch(e){et.ZP.error("Failed to load users")}finally{es(!1)}},sd=async()=>{es(!0);try{let e=await fetch("/api/admin/coupons");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();g(s.coupons||[])}catch(e){et.ZP.error("Failed to load coupons")}finally{es(!1)}},so=async()=>{es(!0);try{let e=await fetch("/api/admin/accounts?type=companies");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();v(s.companies||[])}catch(e){et.ZP.error("Failed to load companies")}finally{es(!1)}},sm=async()=>{ei(!0);try{let e=await fetch("/api/admin/plans");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();Y(s||[])}catch(e){et.ZP.error("Failed to load billing plans")}finally{ei(!1)}},sx=e=>{em(e),eu({name:e.name,priceMonthlyUsdCents:e.priceMonthlyUsdCents,priceAnnualUsdCents:e.priceAnnualUsdCents??"",boqLimitPerPeriod:e.boqLimitPerPeriod??"",boqTemplatesLimit:e.boqTemplatesLimit??"",coverTemplatesLimit:e.coverTemplatesLimit??"",features:e.features||[],isMostPopular:e.isMostPopular||!1,sortOrder:e.sortOrder,active:e.active}),eg(""),ep(!0)},sp=async()=>{if(eo){ev(!0);try{let e=await fetch(`/api/admin/plans/${eo.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:eh.name,priceMonthlyUsdCents:eh.priceMonthlyUsdCents,priceAnnualUsdCents:""===eh.priceAnnualUsdCents?null:Number(eh.priceAnnualUsdCents),boqLimitPerPeriod:""===eh.boqLimitPerPeriod?null:Number(eh.boqLimitPerPeriod),boqTemplatesLimit:""===eh.boqTemplatesLimit?null:Number(eh.boqTemplatesLimit),coverTemplatesLimit:""===eh.coverTemplatesLimit?null:Number(eh.coverTemplatesLimit),features:eh.features,isMostPopular:eh.isMostPopular,sortOrder:eh.sortOrder,active:eh.active})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to update plan")}et.ZP.success("Plan updated successfully");let s=eo.priceMonthlyUsdCents!==eh.priceMonthlyUsdCents,a=(eo.priceAnnualUsdCents??"")!==eh.priceAnnualUsdCents;(s||a)&&et.ZP.success("New Stripe price(s) created for updated amounts",{duration:5e3}),ep(!1),sm()}catch(e){et.ZP.error(e.message||"Failed to update plan")}finally{ev(!1)}}},sh=()=>{ej.trim()&&(eu(e=>({...e,features:[...e.features,ej.trim()]})),eg(""))},su=e=>{eu(s=>({...s,features:s.features.filter((s,a)=>a!==e)}))},sj=e=>{eN(e)},sg=(e,s)=>{if(e.preventDefault(),null===ef||ef===s)return;let a=[...eh.features],t=a[ef];a.splice(ef,1),a.splice(s,0,t),eu(e=>({...e,features:a})),eN(s)},sy=()=>{eN(null)},sv=e=>{ew(e),eC(eh.features[e])},sf=()=>{if(null===eb)return;let e=ek.trim();e&&eu(s=>({...s,features:s.features.map((s,a)=>a===eb?e:s)})),ew(null),eC("")},sN=()=>{ew(null),eC("")},sb=async e=>{eI(!0);try{let s=await fetch(`/api/admin/users/${e}`);if(!s.ok)throw Error("Failed to fetch");let a=await s.json();eE(a)}catch(e){et.ZP.error("Failed to load user details")}finally{eI(!1)}},sw=e=>{eq(e),eQ(!0),sb(e.id)},sk=(e,s,a,t)=>{eH({type:e,id:s,name:a,isBlocked:t}),eJ(""),eY(!0),eG(!0)},sC=async()=>{if(eK)try{let e="user"===eK.type?`/api/admin/users/${eK.id}/${eK.isBlocked?"unblock":"block"}`:`/api/admin/companies/${eK.id}/${eK.isBlocked?"unblock":"block"}`;if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockReason:eK.isBlocked?void 0:eW,cancelSubscription:eK.isBlocked?void 0:eX})})).ok)throw Error("Failed to update");et.ZP.success(eK.isBlocked?"Unblocked successfully":"Blocked successfully"),eG(!1),"user"===eK.type?sc():so(),eL&&sb(eL.id)}catch(e){et.ZP.error("Failed to update block status")}},sP=e=>{e4(e),e5(""),e1(!0)},sZ=async e=>{if(e2)try{let s=await fetch(`/api/admin/users/${e2.id}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");"generate_link"===e&&a.resetLink&&e5(a.resetLink),et.ZP.success(a.message),sc(),eL&&sb(eL.id)}catch(e){et.ZP.error(e.message||"Failed to process password reset")}},sS=e=>{navigator.clipboard.writeText(e),et.ZP.success("Copied to clipboard")},sA=(e,s,a)=>{e9({companyId:e,companyName:s,hasGrant:a}),ss("business"),e6(!0)},sM=async()=>{if(e7)try{let e=e7.hasGrant?`/api/admin/companies/${e7.companyId}/revoke-free-forever`:`/api/admin/companies/${e7.companyId}/grant-free-forever`,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:se})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");et.ZP.success(a.message),e6(!1),sc(),so(),eL&&sb(eL.id)}catch(e){et.ZP.error(e.message||"Failed to update free access")}},sF=async e=>{if(confirm("Are you sure you want to remove the coupon/discount from this company?"))try{let s=await fetch(`/api/admin/companies/${e}/remove-coupon`,{method:"POST",headers:{"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed");et.ZP.success(a.message),sc(),eL&&sb(eL.id)}catch(e){et.ZP.error(e.message||"Failed to remove coupon")}},sU=async()=>{if(!sr.code.trim()){et.ZP.error("Coupon code is required");return}sn(!0);try{let e=await fetch("/api/admin/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:sr.code,type:sr.type,trialDays:"trial_days"===sr.type?sr.trialDays:void 0,allowedPlans:sr.allowedPlans.length>0?sr.allowedPlans:void 0,maxRedemptions:sr.maxRedemptions?parseInt(sr.maxRedemptions):void 0,expiresAt:sr.expiresAt||void 0})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to create");et.ZP.success("Coupon created!"),st(!1),sl({code:"",type:"trial_days",trialDays:14,allowedPlans:[],maxRedemptions:"",expiresAt:""}),sd()}catch(e){et.ZP.error(e.message||"Failed to create coupon")}finally{sn(!1)}},s_=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!e.active})})).ok)throw Error("Failed to update");et.ZP.success(e.active?"Coupon disabled":"Coupon enabled"),sd()}catch(e){et.ZP.error("Failed to update coupon")}},sz=async e=>{try{if(!(await fetch(`/api/admin/coupons/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({archived:!0,active:!1})})).ok)throw Error("Failed to archive");et.ZP.success("Coupon archived"),sd()}catch(e){et.ZP.error("Failed to archive coupon")}},sB=async e=>{if(e.currentRedemptions>0){et.ZP.error("Cannot delete used coupons. Archive instead.");return}if(confirm(`Delete coupon "${e.code}"? This cannot be undone.`))try{let s=await fetch(`/api/admin/coupons/${e.id}`,{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete")}et.ZP.success("Coupon deleted"),sd()}catch(e){et.ZP.error(e.message||"Failed to delete coupon")}},sT=u.filter(e=>!e.archived),sR=u.filter(e=>e.archived),sL=e=>{let s=e.billing;return s?"admin_grant"===s.accessOverride||"free_forever"===s.accessOverride?(0,t.jsxs)(k.C,{className:"text-xs bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}):"business"===s.planKey?t.jsx(k.C,{className:"text-xs bg-blue-100 text-blue-800",children:"Business"}):"starter"===s.planKey?t.jsx(k.C,{className:"text-xs bg-green-100 text-green-800",children:"Starter"}):t.jsx(k.C,{variant:"outline",className:"text-xs",children:"No Plan"}):t.jsx(k.C,{variant:"outline",className:"text-xs",children:"No Plan"})},sq=e=>e?t.jsx(k.C,{className:`text-xs ${{active:"bg-green-100 text-green-800",trialing:"bg-yellow-100 text-yellow-800",past_due:"bg-red-100 text-red-800",canceled:"bg-gray-100 text-gray-800",incomplete:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e}):t.jsx(k.C,{variant:"outline",className:"text-xs",children:"None"});return t.jsx(l.AppLayout,{children:(0,t.jsxs)("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx(Z.Z,{className:"h-8 w-8 text-primary"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Platform Admin"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Logged in as ",e]})]})]}),(0,t.jsxs)(C.mQ,{value:s,onValueChange:a,children:[(0,t.jsxs)(C.dr,{className:"mb-6",children:[(0,t.jsxs)(C.SP,{value:"users",className:"gap-2",children:[t.jsx(S.Z,{className:"h-4 w-4"})," Users"]}),(0,t.jsxs)(C.SP,{value:"companies",className:"gap-2",children:[t.jsx(A.Z,{className:"h-4 w-4"})," Companies"]}),(0,t.jsxs)(C.SP,{value:"coupons",className:"gap-2",children:[t.jsx(M.Z,{className:"h-4 w-4"})," Coupons"]}),(0,t.jsxs)(C.SP,{value:"plans",className:"gap-2",children:[t.jsx(F.Z,{className:"h-4 w-4"})," Plans"]})]}),t.jsx(C.nU,{value:"users",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[t.jsx(d.ll,{children:"User Management"}),t.jsx(d.SZ,{children:"Search and manage all platform users"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx(U.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(n.I,{placeholder:"Search by name, email, company name, or phone...",value:eP,onChange:e=>{eZ(e.target.value),ed(e=>({...e,page:1}))},className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(o.Ph,{value:eM,onValueChange:e=>{eF(e),ed(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Plan"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All Plans"}),t.jsx(o.Ql,{value:"business",children:"Business"}),t.jsx(o.Ql,{value:"starter",children:"Starter"}),t.jsx(o.Ql,{value:"free_forever",children:"Admin Grant"}),t.jsx(o.Ql,{value:"none",children:"No Plan"})]})]}),(0,t.jsxs)(o.Ph,{value:eU,onValueChange:e=>{e_(e),ed(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Status"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All Status"}),t.jsx(o.Ql,{value:"active",children:"Active"}),t.jsx(o.Ql,{value:"trialing",children:"Trialing"}),t.jsx(o.Ql,{value:"past_due",children:"Past Due"}),t.jsx(o.Ql,{value:"canceled",children:"Canceled"}),t.jsx(o.Ql,{value:"none",children:"None"})]})]}),(0,t.jsxs)(o.Ph,{value:ez,onValueChange:e=>{eB(e),ed(e=>({...e,page:1}))},children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Blocked"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"all",children:"All"}),t.jsx(o.Ql,{value:"blocked",children:"Blocked"}),t.jsx(o.Ql,{value:"unblocked",children:"Unblocked"})]})]}),(0,t.jsxs)(o.Ph,{value:eT,onValueChange:eR,children:[t.jsx(o.i4,{className:"w-[130px]",children:t.jsx(o.ki,{placeholder:"Sort"})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"newest",children:"Newest"}),t.jsx(o.Ql,{value:"oldest",children:"Oldest"}),t.jsx(o.Ql,{value:"name",children:"Name"}),t.jsx(o.Ql,{value:"email",children:"Email"})]})]})]})]}),ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(_.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===x.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No users found"}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"space-y-3",children:x.map(e=>t.jsx("div",{className:`p-4 rounded-lg border cursor-pointer hover:bg-accent/50 transition-colors ${e.isBlocked||e.company?.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,onClick:()=>sw(e),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-medium truncate",children:e.email}),e.isBlocked&&t.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.company?.isBlocked&&t.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Company Blocked"}),sL(e),sq(e.billing?.status||null),e.billing?.currentCouponCode&&(0,t.jsxs)(k.C,{variant:"outline",className:"text-xs bg-yellow-50",children:[t.jsx(B,{className:"w-3 h-3 mr-1"}),e.billing.currentCouponCode]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1 flex flex-wrap gap-x-4 gap-y-1",children:[t.jsx("span",{children:e.fullName||e.name||"No name"}),t.jsx("span",{children:e.company?.name||"No company"}),e.phone&&(0,t.jsxs)("span",{children:[t.jsx(T.Z,{className:"inline h-3 w-3 mr-1"}),e.phone]}),(0,t.jsxs)("span",{children:[t.jsx(R.Z,{className:"inline h-3 w-3 mr-1"}),"Joined ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]})]})]}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),sw(e)},children:t.jsx(L.Z,{className:"h-4 w-4"})})]})},e.id))}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(ec.page-1)*ec.limit+1," to"," ",Math.min(ec.page*ec.limit,ec.totalCount)," of"," ",ec.totalCount," users"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ed(e=>({...e,page:e.page-1})),disabled:ec.page<=1,children:t.jsx(q.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",ec.page," of ",ec.totalPages]}),t.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ed(e=>({...e,page:e.page+1})),disabled:ec.page>=ec.totalPages,children:t.jsx(O.Z,{className:"h-4 w-4"})})]})]})]})]})]})}),t.jsx(C.nU,{value:"companies",children:(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{children:"Companies"})}),t.jsx(d.aY,{children:ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(_.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===y.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No companies found"}):t.jsx("div",{className:"space-y-3",children:y.map(e=>t.jsx("div",{className:`p-4 rounded-lg border ${e.isBlocked?"bg-red-50 border-red-200":"bg-white"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:e.name}),e.isBlocked&&t.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Blocked"}),e.billing?.accessOverride&&(0,t.jsxs)(k.C,{className:"text-xs bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant"]}),e.billing?.planKey&&t.jsx(k.C,{variant:"secondary",className:"text-xs capitalize",children:e.billing.planKey})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e._count.memberships," member",1!==e._count.memberships?"s":""," •"," ",e._count.boqs," BOQ",1!==e._count.boqs?"s":""," •"," ","Created ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")]}),e.isBlocked&&e.blockReason&&(0,t.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Reason: ",e.blockReason]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>sA(e.id,e.name,!!e.billing?.accessOverride),children:[t.jsx(P.Z,{className:"h-4 w-4 mr-2"}),e.billing?.accessOverride?"Revoke":"Grant Free"]}),t.jsx(i.z,{variant:e.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("company",e.id,e.name,e.isBlocked),children:e.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(E,{className:"h-4 w-4 mr-2"})," Unblock"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block"]})})]})]})},e.id))})})]})}),t.jsx(C.nU,{value:"coupons",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[t.jsx(d.ll,{children:"Promo Codes / Coupons"}),(0,t.jsxs)(i.z,{onClick:()=>st(!0),size:"sm",children:[t.jsx(D.Z,{className:"h-4 w-4 mr-2"})," Create Coupon"]})]}),t.jsx(d.aY,{children:ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(_.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.jsx("div",{className:"space-y-6",children:0===sT.length&&0===sR.length?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No coupons created yet"}):(0,t.jsxs)(t.Fragment,{children:[sT.length>0&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Active Coupons"}),t.jsx("div",{className:"space-y-3",children:sT.map(e=>t.jsx(en,{coupon:e,onToggle:()=>s_(e),onArchive:()=>sz(e),onDelete:()=>sB(e)},e.id))})]}),sR.length>0&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Archived Coupons"}),t.jsx("div",{className:"space-y-3 opacity-60",children:sR.map(e=>t.jsx(en,{coupon:e,onToggle:()=>{},onArchive:()=>{},onDelete:()=>sB(e),isArchived:!0},e.id))})]})]})})})]})}),t.jsx(C.nU,{value:"plans",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-2",children:[t.jsx(I,{className:"h-5 w-5"})," Billing Plans"]}),t.jsx(d.SZ,{children:"Manage pricing, quotas, and features. Price changes auto-create new Stripe prices."})]}),t.jsx(d.aY,{children:ea?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(_.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===z.length?t.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No billing plans found. Run the seed script to create plans."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(e=>(0,t.jsxs)("div",{className:`p-6 rounded-xl border-2 ${e.active?"bg-white":"bg-gray-50 opacity-75"} ${e.isMostPopular?"border-primary":"border-gray-200"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold",children:e.name}),e.isMostPopular&&t.jsx(k.C,{className:"bg-primary text-white",children:"Most Popular"}),!e.active&&t.jsx(k.C,{variant:"secondary",children:"Inactive"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Key: ",t.jsx("code",{className:"bg-gray-100 px-1 rounded",children:e.planKey}),"per_seat"===e.seatModel&&t.jsx(k.C,{variant:"outline",className:"ml-2 text-xs",children:"Per Seat"})]})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>sx(e),className:"gap-1",children:[t.jsx($.Z,{className:"h-3 w-3"})," Edit"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold",children:["$",(e.priceMonthlyUsdCents/100).toFixed(0),t.jsx("span",{className:"text-lg font-normal text-muted-foreground",children:"/mo"}),"per_seat"===e.seatModel&&t.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/user"})]}),e.priceAnnualUsdCents&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["$",(e.priceAnnualUsdCents/100).toFixed(0),"/year","per_seat"===e.seatModel&&"/user"]})]}),(0,t.jsxs)("div",{className:"mb-4 text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQ Limit:"}),t.jsx("span",{className:null===e.boqLimitPerPeriod?"text-green-600 font-medium":"",children:null===e.boqLimitPerPeriod?"Unlimited":`${e.boqLimitPerPeriod}/period`})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQ Templates:"}),t.jsx("span",{className:null===e.boqTemplatesLimit?"text-green-600 font-medium":"",children:null===e.boqTemplatesLimit?"Unlimited":e.boqTemplatesLimit})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Cover Templates:"}),t.jsx("span",{className:null===e.coverTemplatesLimit?"text-green-600 font-medium":"",children:null===e.coverTemplatesLimit?"Unlimited":e.coverTemplatesLimit})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Features:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(e.features||[]).slice(0,5).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx(Q.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:e})]},s)),(e.features||[]).length>5&&(0,t.jsxs)("li",{className:"text-xs text-muted-foreground",children:["+",(e.features||[]).length-5," more..."]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{children:["Stripe Product: ",e.stripeProductId||"Not configured"]}),(0,t.jsxs)("div",{children:["Monthly Price ID: ",e.stripePriceIdMonthly||"Not configured"]}),(0,t.jsxs)("div",{children:["Annual Price ID: ",e.stripePriceIdAnnual||"Not configured"]}),(0,t.jsxs)("div",{children:["Sort Order: ",e.sortOrder]}),e.priceHistory&&e.priceHistory.length>0&&(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("span",{className:"font-medium",children:"Price History:"}),t.jsx("ul",{className:"ml-2",children:e.priceHistory.slice(0,3).map(e=>(0,t.jsxs)("li",{children:["$",(e.amountCents/100).toFixed(0)," (",e.interval,") - ",(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy"),e.isCurrent&&t.jsx(k.C,{className:"ml-1 text-xs",variant:"outline",children:"Current"})]},e.id))})]})]})]},e.id))})})]})})]}),t.jsx(m.Vq,{open:ex,onOpenChange:ep,children:(0,t.jsxs)(m.cZ,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{children:["Edit Plan: ",eo?.name]}),t.jsx(m.Be,{children:"Update pricing, quotas, and features. Price changes will create a new Stripe price."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Name"}),t.jsx(n.I,{value:eh.name,onChange:e=>eu(s=>({...s,name:e.target.value})),placeholder:"Plan name"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Monthly Price (USD cents)"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(n.I,{type:"number",value:eh.priceMonthlyUsdCents,onChange:e=>eu(s=>({...s,priceMonthlyUsdCents:parseInt(e.target.value)||0})),placeholder:"1900"})}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",(eh.priceMonthlyUsdCents/100).toFixed(2),"/mo"]})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Annual Price (USD cents)"}),t.jsx(n.I,{type:"number",value:eh.priceAnnualUsdCents,onChange:e=>eu(s=>({...s,priceAnnualUsdCents:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"Leave empty if no annual"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["= $",eh.priceAnnualUsdCents?(Number(eh.priceAnnualUsdCents)/100).toFixed(2):"0.00","/yr"]})]})]}),eo&&(eo.priceMonthlyUsdCents!==eh.priceMonthlyUsdCents||(eo.priceAnnualUsdCents??"")!==eh.priceAnnualUsdCents)&&t.jsx("p",{className:"text-xs text-amber-600",children:"⚠️ Changing price will create new Stripe price(s). Existing subscribers keep their current price."}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"BOQ Limit/Period"}),t.jsx(n.I,{type:"number",value:eh.boqLimitPerPeriod,onChange:e=>eu(s=>({...s,boqLimitPerPeriod:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"BOQ Templates"}),t.jsx(n.I,{type:"number",value:eh.boqTemplatesLimit,onChange:e=>eu(s=>({...s,boqTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Cover Templates"}),t.jsx(n.I,{type:"number",value:eh.coverTemplatesLimit,onChange:e=>eu(s=>({...s,coverTemplatesLimit:""===e.target.value?"":parseInt(e.target.value)})),placeholder:"∞"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Empty = unlimited"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Sort Order"}),t.jsx(n.I,{type:"number",value:eh.sortOrder,onChange:e=>eu(s=>({...s,sortOrder:parseInt(e.target.value)||0}))})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(el.X,{id:"plan-active",checked:eh.active,onCheckedChange:e=>eu(s=>({...s,active:!0===e}))}),t.jsx(c._,{htmlFor:"plan-active",children:"Active (visible on pricing)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(el.X,{id:"plan-popular",checked:eh.isMostPopular,onCheckedChange:e=>eu(s=>({...s,isMostPopular:!0===e}))}),t.jsx(c._,{htmlFor:"plan-popular",children:"Most Popular badge"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{children:["Features ",t.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(drag to reorder, click to edit)"})]}),(0,t.jsxs)("div",{className:"space-y-1 mt-2",children:[eh.features.map((e,s)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>sj(s),onDragOver:e=>sg(e,s),onDragEnd:sy,className:`flex items-center gap-2 group ${ef===s?"opacity-50 bg-primary/10":""}`,children:[t.jsx("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:t.jsx(V.Z,{className:"h-4 w-4"})}),eb===s?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[t.jsx(n.I,{value:ek,onChange:e=>eC(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),sf()),"Escape"===e.key&&sN()},autoFocus:!0,className:"h-8 text-sm"}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",onClick:sf,children:t.jsx(Q.Z,{className:"h-4 w-4 text-green-600"})}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",onClick:sN,children:t.jsx(h.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-sm bg-gray-50 px-3 py-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>sv(s),children:e}),t.jsx(i.z,{type:"button",variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>su(s),children:t.jsx(h.Z,{className:"h-4 w-4"})})]})]},s)),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-4"})," ",t.jsx(n.I,{value:ej,onChange:e=>eg(e.target.value),placeholder:"Add a feature...",onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),sh()),className:"flex-1"}),t.jsx(i.z,{type:"button",variant:"outline",size:"sm",onClick:sh,children:t.jsx(D.Z,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>ep(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:sp,disabled:ey,children:[ey?t.jsx(_.Z,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]})]})}),t.jsx(j,{open:e$,onOpenChange:eQ,children:(0,t.jsxs)(f,{className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,t.jsxs)(N,{children:[t.jsx(b,{children:"User Details"}),t.jsx(w,{children:eL?.email})]}),eD?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(_.Z,{className:"h-6 w-6 animate-spin"})}):eO?(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(S.Z,{className:"h-4 w-4"})," Profile"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eO.user.fullName||eO.user.name||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",eO.user.email]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Phone:"})," ",eO.user.phone||"-"]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Joined:"})," ",(0,er.WU)(new Date(eO.user.createdAt),"MMM d, yyyy")]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Last Login:"})," ",eO.user.lastLoginAt?(0,er.WU)(new Date(eO.user.lastLoginAt),"MMM d, yyyy HH:mm"):"Never"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eO.user.isBlocked?t.jsx(k.C,{variant:"destructive",children:"Blocked"}):t.jsx(k.C,{variant:"outline",children:"Active"})]})]}),eO.user.blockReason&&(0,t.jsxs)("p",{className:"text-sm text-red-600",children:["Block Reason: ",eO.user.blockReason]})]}),eO.company&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(A.Z,{className:"h-4 w-4"})," Company"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",eO.company.name]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Members:"})," ",eO.company.memberCount]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"BOQs:"})," ",eO.company.boqCount]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),eO.company.isBlocked?t.jsx(k.C,{variant:"destructive",children:"Blocked"}):t.jsx(k.C,{variant:"outline",children:"Active"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(G.Z,{className:"h-4 w-4"})," Billing"]}),eO.billing?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),eO.billing.accessOverride?(0,t.jsxs)(k.C,{className:"bg-purple-100 text-purple-800",children:[t.jsx(P.Z,{className:"w-3 h-3 mr-1"}),"Admin Grant (",eO.billing.overridePlan||"business",")"]}):t.jsx(k.C,{variant:"secondary",className:"capitalize",children:eO.billing.planKey||"None"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Status:"}),sq(eO.billing.status)]}),eO.billing.stripeCustomerId&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Stripe Customer:"})," ",t.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eO.billing.stripeCustomerId})]}),eO.billing.stripeSubscriptionId&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Stripe Subscription:"})," ",t.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:eO.billing.stripeSubscriptionId})]}),eO.billing.currentCouponCode&&(0,t.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Active Coupon:"}),(0,t.jsxs)(k.C,{variant:"outline",className:"bg-yellow-50",children:[t.jsx(B,{className:"w-3 h-3 mr-1"}),eO.billing.currentCouponCode]}),(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>sF(eO.company.id),children:[t.jsx(h.Z,{className:"h-3 w-3"})," Remove"]})]}),eO.billing.currentPeriodEnd&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Period Ends:"})," ",(0,er.WU)(new Date(eO.billing.currentPeriodEnd),"MMM d, yyyy")]})]}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing information"})]}),eO.invoices.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(K,{className:"h-4 w-4"})," Payment History"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:eO.invoices.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium",children:["$",(e.amountPaid/100).toFixed(2)," ",e.currency.toUpperCase()]}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{className:"text-muted-foreground",children:(0,er.WU)(new Date(e.createdAt),"MMM d, yyyy")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(k.C,{variant:"outline",className:"text-xs capitalize",children:e.status}),e.hostedInvoiceUrl&&t.jsx("a",{href:e.hostedInvoiceUrl,target:"_blank",rel:"noopener noreferrer",children:t.jsx(H.Z,{className:"h-3 w-3 text-muted-foreground"})})]})]},e.id))})]}),eO.couponRedemptions.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[t.jsx(B,{className:"h-4 w-4"})," Coupon History"]}),t.jsx("div",{className:"space-y-2",children:eO.couponRedemptions.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.couponCode}),t.jsx("span",{className:"ml-2 text-muted-foreground",children:"free_forever"===e.couponType?"Free Forever":"Trial"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:(0,er.WU)(new Date(e.redeemedAt),"MMM d, yyyy")}),e.revokedAt&&t.jsx(k.C,{variant:"destructive",className:"text-xs",children:"Revoked"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[t.jsx("h3",{className:"font-semibold",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.jsx(i.z,{variant:eO.user.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("user",eO.user.id,eO.user.email,eO.user.isBlocked),children:eO.user.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(E,{className:"h-4 w-4 mr-2"})," Unblock User"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block User"]})}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>sP(eL),children:[t.jsx(W,{className:"h-4 w-4 mr-2"})," Password Reset"]}),eO.company&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>sA(eO.company.id,eO.company.name,!!eO.billing?.accessOverride),children:[t.jsx(P.Z,{className:"h-4 w-4 mr-2"}),eO.billing?.accessOverride?"Revoke Free Access":"Grant Free Access"]}),t.jsx(i.z,{variant:eO.company.isBlocked?"outline":"destructive",size:"sm",onClick:()=>sk("company",eO.company.id,eO.company.name,eO.company.isBlocked),children:eO.company.isBlocked?(0,t.jsxs)(t.Fragment,{children:[t.jsx(E,{className:"h-4 w-4 mr-2"})," Unblock Company"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(Z.Z,{className:"h-4 w-4 mr-2"})," Block Company"]})})]})]})]})]}):null]})}),t.jsx(m.Vq,{open:eV,onOpenChange:eG,children:(0,t.jsxs)(m.cZ,{children:[t.jsx(m.fK,{children:(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(J.Z,{className:"h-5 w-5 text-yellow-500"}),eK?.isBlocked?"Unblock":"Block"," ",eK?.type==="company"?"Company":"User"]})}),(0,t.jsxs)("div",{className:"py-4",children:[t.jsx("p",{className:"text-muted-foreground mb-4",children:eK?.isBlocked?`Are you sure you want to unblock "${eK?.name}"?`:`Are you sure you want to block "${eK?.name}"? They will lose access to all /app/* pages.`}),!eK?.isBlocked&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"blockReason",children:"Block Reason (optional)"}),t.jsx(n.I,{id:"blockReason",value:eW,onChange:e=>eJ(e.target.value),placeholder:"e.g., Abuse, Non-payment",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(el.X,{id:"cancelSub",checked:eX,onCheckedChange:e=>eY(e)}),t.jsx(c._,{htmlFor:"cancelSub",className:"font-normal cursor-pointer",children:"Cancel Stripe subscription immediately"})]})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>eG(!1),children:"Cancel"}),t.jsx(i.z,{variant:eK?.isBlocked?"default":"destructive",onClick:sC,children:eK?.isBlocked?"Unblock":"Block"})]})]})}),t.jsx(m.Vq,{open:e0,onOpenChange:e1,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(W,{className:"h-5 w-5"})," Password Reset Options"]}),t.jsx(m.Be,{children:"For security, passwords cannot be viewed. Use these options to help the user reset their password."})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm font-medium mb-2",children:["User: ",e2?.email]}),e2?.forcePasswordReset&&t.jsx(k.C,{variant:"outline",className:"text-yellow-700 bg-yellow-50",children:"Force Reset Enabled"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>sZ("generate_link"),children:[t.jsx(X,{className:"h-4 w-4 mr-2"})," Generate Reset Link"]}),e3&&(0,t.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-sm",children:[t.jsx("p",{className:"text-green-800 mb-2",children:"Reset link generated:"}),t.jsx("code",{className:"block text-xs bg-white p-2 rounded break-all",children:e3}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>sS(e3),children:[t.jsx(X,{className:"h-3 w-3 mr-2"})," Copy"]})]}),t.jsx(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>sZ(e2?.forcePasswordReset?"clear_force_reset":"force_reset"),children:e2?.forcePasswordReset?(0,t.jsxs)(t.Fragment,{children:[t.jsx(h.Z,{className:"h-4 w-4 mr-2"})," Clear Force Reset Flag"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(J.Z,{className:"h-4 w-4 mr-2"})," Force Reset on Next Login"]})})]})]}),t.jsx(m.cN,{children:t.jsx(i.z,{variant:"outline",onClick:()=>e1(!1),children:"Close"})})]})}),t.jsx(m.Vq,{open:e8,onOpenChange:e6,children:(0,t.jsxs)(m.cZ,{children:[t.jsx(m.fK,{children:(0,t.jsxs)(m.$N,{className:"flex items-center gap-2",children:[t.jsx(P.Z,{className:"h-5 w-5 text-purple-500"}),e7?.hasGrant?"Revoke":"Grant"," Free Access"]})}),t.jsx("div",{className:"py-4",children:e7?.hasGrant?(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Are you sure you want to revoke free access for ",t.jsx("strong",{children:e7?.companyName}),"? They will need to subscribe to regain access."]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Grant free access to ",t.jsx("strong",{children:e7?.companyName}),". This will override any existing subscription."]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"freeForeverPlan",children:"Access Level"}),(0,t.jsxs)(o.Ph,{value:se,onValueChange:e=>ss(e),children:[t.jsx(o.i4,{className:"mt-1",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"business",children:"Business (Unlimited BOQs)"}),t.jsx(o.Ql,{value:"starter",children:"Starter (10 BOQs/month)"})]})]})]})]})}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>e6(!1),children:"Cancel"}),t.jsx(i.z,{onClick:sM,children:e7?.hasGrant?"Revoke Access":"Grant Free Access"})]})]})}),t.jsx(m.Vq,{open:sa,onOpenChange:st,children:(0,t.jsxs)(m.cZ,{children:[t.jsx(m.fK,{children:t.jsx(m.$N,{children:"Create New Coupon"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"code",children:"Coupon Code"}),t.jsx(n.I,{id:"code",value:sr.code,onChange:e=>sl(s=>({...s,code:e.target.value.toUpperCase()})),placeholder:"e.g., TRIAL14, FREEFOREVER",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"type",children:"Coupon Type"}),(0,t.jsxs)(o.Ph,{value:sr.type,onValueChange:e=>sl(s=>({...s,type:e})),children:[t.jsx(o.i4,{className:"mt-1",children:t.jsx(o.ki,{})}),(0,t.jsxs)(o.Bw,{children:[t.jsx(o.Ql,{value:"trial_days",children:"Trial Days"}),t.jsx(o.Ql,{value:"free_forever",children:"Free Forever"})]})]})]}),"trial_days"===sr.type&&(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"trialDays",children:"Trial Days"}),t.jsx(n.I,{id:"trialDays",type:"number",min:"1",max:"365",value:sr.trialDays,onChange:e=>sl(s=>({...s,trialDays:parseInt(e.target.value)||14})),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{children:"Allowed Plans (optional)"}),(0,t.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(el.X,{checked:sr.allowedPlans.includes("starter"),onCheckedChange:e=>{sl(s=>({...s,allowedPlans:e?[...s.allowedPlans,"starter"]:s.allowedPlans.filter(e=>"starter"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Starter"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(el.X,{checked:sr.allowedPlans.includes("advance"),onCheckedChange:e=>{sl(s=>({...s,allowedPlans:e?[...s.allowedPlans,"advance"]:s.allowedPlans.filter(e=>"advance"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Advance"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx(el.X,{checked:sr.allowedPlans.includes("business"),onCheckedChange:e=>{sl(s=>({...s,allowedPlans:e?[...s.allowedPlans,"business"]:s.allowedPlans.filter(e=>"business"!==e)}))}}),t.jsx("span",{className:"text-sm",children:"Business"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave unchecked for all plans"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"maxRedemptions",children:"Max Redemptions (optional)"}),t.jsx(n.I,{id:"maxRedemptions",type:"number",min:"1",value:sr.maxRedemptions,onChange:e=>sl(s=>({...s,maxRedemptions:e.target.value})),placeholder:"Leave empty for unlimited",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[t.jsx(c._,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),t.jsx(n.I,{id:"expiresAt",type:"date",value:sr.expiresAt,onChange:e=>sl(s=>({...s,expiresAt:e.target.value})),className:"mt-1"})]})]}),(0,t.jsxs)(m.cN,{children:[t.jsx(i.z,{variant:"outline",onClick:()=>st(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{onClick:sU,disabled:si,children:[si&&t.jsx(_.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Coupon"]})]})]})})]})})}function en({coupon:e,onToggle:s,onArchive:a,onDelete:r,isArchived:l=!1}){return(0,t.jsxs)("div",{className:"p-4 rounded-lg border bg-white flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"font-bold text-primary bg-primary/10 px-2 py-0.5 rounded",children:e.code}),t.jsx(k.C,{variant:"free_forever"===e.type?"default":"secondary",className:"text-xs",children:"free_forever"===e.type?"Free Forever":`${e.trialDays} Day Trial`}),!e.active&&!l&&t.jsx(k.C,{variant:"outline",className:"text-xs",children:"Disabled"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[e.allowedPlans.length>0?`For ${e.allowedPlans.map(e=>"starter"===e?"Starter":"advance"===e?"Advance":"Business").join(", ")}`:"All plans"," ","• Used ",e.currentRedemptions,e.maxRedemptions?`/${e.maxRedemptions}`:""," times",e.expiresAt&&` • Expires ${(0,er.WU)(new Date(e.expiresAt),"MMM d, yyyy")}`]})]}),!l&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(i.z,{variant:"ghost",size:"sm",onClick:s,title:e.active?"Disable":"Enable",children:e.active?t.jsx(Y,{className:"h-5 w-5 text-green-600"}):t.jsx(ee,{className:"h-5 w-5 text-muted-foreground"})}),t.jsx(i.z,{variant:"ghost",size:"sm",onClick:a,title:"Archive",children:t.jsx(es,{className:"h-4 w-4 text-muted-foreground"})}),0===e.currentRedemptions&&t.jsx(i.z,{variant:"ghost",size:"sm",onClick:r,title:"Delete",children:t.jsx(ea.Z,{className:"h-4 w-4 text-red-500"})})]}),l&&0===e.currentRedemptions&&t.jsx(i.z,{variant:"ghost",size:"sm",onClick:r,title:"Delete",children:t.jsx(ea.Z,{className:"h-4 w-4 text-red-500"})})]})}},16098:(e,s,a)=>{"use strict";a.d(s,{X:()=>P});var t=a(62901),r=a(24383),l=a(56163),i=a(89291),n=a(1940),c=a(98106),d=a(45666),o=a(49209),m=a(52490),x=a(74132),p="Checkbox",[h,u]=(0,i.b)(p),[j,g]=h(p),y=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:i,checked:d,defaultChecked:o,required:m,disabled:p,value:h="on",onCheckedChange:u,...g}=e,[y,v]=r.useState(null),f=(0,l.e)(s,e=>v(e)),k=r.useRef(!1),C=!y||!!y.closest("form"),[P=!1,Z]=(0,c.T)({prop:d,defaultProp:o,onChange:u}),S=r.useRef(P);return r.useEffect(()=>{let e=y?.form;if(e){let s=()=>Z(S.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[y,Z]),(0,t.jsxs)(j,{scope:a,state:P,disabled:p,children:[(0,t.jsx)(x.WV.button,{type:"button",role:"checkbox","aria-checked":b(P)?"mixed":P,"aria-required":m,"data-state":w(P),"data-disabled":p?"":void 0,disabled:p,value:h,...g,ref:f,onKeyDown:(0,n.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.M)(e.onClick,e=>{Z(e=>!!b(e)||!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,t.jsx)(N,{control:y,bubbles:!k.current,name:i,value:h,checked:P,required:m,disabled:p,style:{transform:"translateX(-100%)"}})]})});y.displayName=p;var v="CheckboxIndicator",f=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:r,...l}=e,i=g(v,a);return(0,t.jsx)(m.z,{present:r||b(i.state)||!0===i.state,children:(0,t.jsx)(x.WV.span,{"data-state":w(i.state),"data-disabled":i.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...e.style}})})});f.displayName=v;var N=e=>{let{control:s,checked:a,bubbles:l=!0,...i}=e,n=r.useRef(null),c=(0,d.D)(a),m=(0,o.t)(s);return r.useEffect(()=>{let e=n.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==a&&s){let t=new Event("click",{bubbles:l});e.indeterminate=b(a),s.call(e,!b(a)&&a),e.dispatchEvent(t)}},[c,a,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:!b(a)&&a,...i,tabIndex:-1,ref:n,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function w(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var k=a(85453),C=a(68637);let P=r.forwardRef(({className:e,...s},a)=>t.jsx(y,{ref:a,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(f,{className:(0,C.cn)("flex items-center justify-center text-current"),children:t.jsx(k.Z,{className:"h-4 w-4"})})}));P.displayName=y.displayName},76021:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},99311:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},6e4:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},32614:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},21680:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},83292:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o,dynamic:()=>d});var t=a(83537),r=a(57978),l=a(86023),i=a(15438),n=a(90391);let c=(0,a(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/app/app/glorand/_components/glorand-admin-client.tsx#GlorandAdminClient`),d="force-dynamic";async function o(){let e=await (0,r.getServerSession)(l.L);e?.user||(0,i.redirect)("/login");let s=e.user.email;return(0,n.Mz)(s)||(0,i.redirect)("/app/dashboard"),t.jsx(c,{adminEmail:s})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[4372,7329,5990,1303,1263,2116,5882,3159,7221,391,8241,7843,4220],()=>a(86715));module.exports=t})();