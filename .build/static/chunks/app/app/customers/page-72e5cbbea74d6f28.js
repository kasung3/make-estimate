(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83],{8406:function(e,s,t){Promise.resolve().then(t.bind(t,6210))},6210:function(e,s,t){"use strict";t.d(s,{CustomersClient:function(){return N}});var a=t(5444),r=t(9300),l=t(7367),n=t(2422),c=t(4678),i=t(9827),o=t(4635),d=t(9530),m=t(9429),h=t(5076),u=t(4624),x=t(5798),j=t(8510),p=t(563),y=t(1946),f=t(4611);function N({customers:e}){let[s,t]=(0,r.useState)(e??[]),[N,v]=(0,r.useState)(""),[g,C]=(0,r.useState)(!1),[w,Z]=(0,r.useState)(""),[k,b]=(0,r.useState)(""),[A,P]=(0,r.useState)(""),[S,_]=(0,r.useState)(""),[L,z]=(0,r.useState)(!1),E=(s??[]).filter(e=>e?.name?.toLowerCase()?.includes?.(N?.toLowerCase?.()??"")||e?.email?.toLowerCase()?.includes?.(N?.toLowerCase?.()??"")),F=async()=>{if(!w?.trim?.()){f.ZP.error("Please enter a customer name");return}z(!0);try{let e=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w,email:k||null,phone:A||null,address:S||null})}),a=await e.json();if(!e.ok){f.ZP.error(a?.error||"Failed to create customer");return}t([...s??[],a]),C(!1),Z(""),b(""),P(""),_(""),f.ZP.success("Customer created")}catch(e){f.ZP.error("An error occurred")}finally{z(!1)}},M=async e=>{if(confirm("Are you sure you want to delete this customer?"))try{if(!(await fetch(`/api/customers/${e}`,{method:"DELETE"})).ok){f.ZP.error("Failed to delete customer");return}t((s??[]).filter(s=>s?.id!==e)),f.ZP.success("Customer deleted")}catch(e){f.ZP.error("An error occurred")}};return(0,a.jsx)(l.AppLayout,{children:(0,a.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your customer database"})]}),(0,a.jsxs)(n.z,{onClick:()=>C(!0),className:"shadow-md",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)(c.I,{placeholder:"Search customers...",value:N,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(i.Zb,{className:"shadow-md border-0",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"text-lg",children:["All Customers (",E?.length??0,")"]})}),(0,a.jsx)(i.aY,{children:(E?.length??0)===0?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No customers found"}),(0,a.jsx)(n.z,{variant:"outline",className:"mt-4",onClick:()=>C(!0),children:"Add your first customer"})]}):(0,a.jsx)("div",{className:"space-y-3",children:(E??[]).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-400 to-teal-400 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-semibold text-lg",children:e?.name?.charAt?.(0)?.toUpperCase?.()??"C"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e?.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e?.email&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),e.email]}),e?.phone&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),e.phone]})]})]})]}),(0,a.jsx)(n.z,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500",onClick:()=>M(e?.id),children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]},e?.id))})})]}),(0,a.jsx)(d.Vq,{open:g,onOpenChange:C,children:(0,a.jsxs)(d.cZ,{children:[(0,a.jsx)(d.fK,{children:(0,a.jsx)(d.$N,{children:"Add New Customer"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"name",children:"Name *"}),(0,a.jsx)(c.I,{id:"name",placeholder:"Customer name",value:w,onChange:e=>Z(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(c.I,{id:"email",type:"email",placeholder:"customer@email.com",value:k,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(c.I,{id:"phone",placeholder:"Phone number",value:A,onChange:e=>P(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"address",children:"Address"}),(0,a.jsx)(c.I,{id:"address",placeholder:"Address",value:S,onChange:e=>_(e.target.value)})]})]}),(0,a.jsxs)(d.cN,{children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,a.jsxs)(n.z,{onClick:F,disabled:L,children:[L?(0,a.jsx)(y.Z,{className:"w-4 h-4 animate-spin mr-2"}):null,"Add Customer"]})]})]})})]})})}},5798:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2154).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},8510:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2154).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},5076:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2154).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},563:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2154).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[762,162,853,512,984,629,386,156,744],function(){return e(e.s=8406)}),_N_E=e.O()}]);