exports.id=8241,exports.ids=[8241],exports.modules={77702:(e,a,t)=>{Promise.resolve().then(t.bind(t,46618))},87133:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,84114,23)),Promise.resolve().then(t.t.bind(t,28866,23)),Promise.resolve().then(t.t.bind(t,31324,23)),Promise.resolve().then(t.t.bind(t,83567,23)),Promise.resolve().then(t.t.bind(t,55996,23)),Promise.resolve().then(t.t.bind(t,10050,23))},46618:(e,a,t)=>{"use strict";t.d(a,{AuthProvider:()=>i});var s=t(62901),r=t(84700),n=t(39350);function i({children:e}){return(0,s.jsxs)(r.SessionProvider,{children:[e,s.jsx(n.x7,{position:"top-right"})]})}},22270:(e,a,t)=>{"use strict";t.d(a,{AppLayout:()=>C});var s=t(62901),r=t(84700),n=t(84374),i=t(24383),o=t(62392),l=t(68637),c=t(83671),d=t(66843),m=t(64283),p=t(67935),h=t(33901),u=t(1320),f=t(6731),x=t(44928),g=t(32317),b=t(60004),v=t(96527),j=t(25650),y=t(27878);let N=[{name:"Dashboard",href:"/app/dashboard",icon:c.Z},{name:"Customers",href:"/app/customers",icon:d.Z},{name:"Team",href:"/app/team",icon:m.Z},{name:"Settings",href:"/app/settings",icon:p.Z}],w=[{name:"Overview",href:"/app/glorand",icon:h.Z},{name:"Users",href:"/app/glorand?tab=users",icon:d.Z},{name:"Companies",href:"/app/glorand?tab=companies",icon:u.Z},{name:"Coupons",href:"/app/glorand?tab=coupons",icon:f.Z}];function k(){let e=(0,n.usePathname)(),{data:a}=(0,r.useSession)()||{},[t,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!1),p=e?.startsWith("/app/glorand"),h=d&&p?w:N;return(0,s.jsxs)("div",{className:(0,l.cn)("h-screen bg-white border-r border-gray-200 flex flex-col transition-all duration-300 shadow-sm",t?"w-20":"w-64"),children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(o.default,{href:d&&p?"/app/glorand":"/app/dashboard",className:"flex items-center space-x-3",children:[s.jsx("div",{className:(0,l.cn)("w-10 h-10 rounded-xl flex items-center justify-center shadow-md",d&&p?"bg-gradient-to-br from-amber-500 to-orange-500":"bg-gradient-to-br from-cyan-500 to-teal-500"),children:d&&p?s.jsx(x.Z,{className:"w-5 h-5 text-white"}):s.jsx(g.Z,{className:"w-5 h-5 text-white"})}),!t&&s.jsx("span",{className:(0,l.cn)("text-lg font-bold bg-clip-text text-transparent",d&&p?"bg-gradient-to-r from-amber-600 to-orange-600":"bg-gradient-to-r from-cyan-600 to-teal-600"),children:d&&p?"Admin Panel":"MakeEstimate"})]}),s.jsx(y.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c(!t),children:t?s.jsx(b.Z,{className:"h-4 w-4"}):s.jsx(v.Z,{className:"h-4 w-4"})})]})}),(0,s.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[h.map(a=>{let r=a.href.includes("?tab="),n=r?a.href.split("?tab=")[1]:null,i=!1;i=r?"/app/glorand"===e&&null===n:"/app/glorand"===a.href?"/app/glorand"===e:e===a.href||e?.startsWith?.(a.href+"/");let c=d&&p;return(0,s.jsxs)(o.default,{href:a.href,className:(0,l.cn)("flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all",i?c?"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 font-medium":"bg-gradient-to-r from-cyan-50 to-teal-50 text-cyan-700 font-medium":c?"text-gray-600 hover:bg-amber-50":"text-gray-600 hover:bg-gray-100"),children:[s.jsx(a.icon,{className:(0,l.cn)("h-5 w-5",i?c?"text-amber-600":"text-cyan-600":"")}),!t&&s.jsx("span",{children:a.name})]},a.name)}),d&&!p&&(0,s.jsxs)(o.default,{href:"/app/glorand",className:(0,l.cn)("flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all","text-amber-600 hover:bg-amber-50"),children:[s.jsx(x.Z,{className:"h-5 w-5"}),!t&&s.jsx("span",{children:"Admin Panel"})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[!t&&a?.user&&(0,s.jsxs)("div",{className:"mb-3 px-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.user?.companyName||"Company"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:a.user?.email})]}),(0,s.jsxs)(y.z,{variant:"ghost",className:(0,l.cn)("w-full text-gray-600 hover:text-red-600 hover:bg-red-50",t?"justify-center":"justify-start"),onClick:()=>(0,r.signOut)({callbackUrl:"/login"}),children:[s.jsx(j.Z,{className:"h-5 w-5"}),!t&&s.jsx("span",{className:"ml-3",children:"Sign Out"})]})]})]})}var P=t(10333);function C({children:e}){let{data:a,status:t}=(0,r.useSession)()||{},o=(0,n.useRouter)(),l=(0,n.usePathname)(),[c,d]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),h=["/app/dashboard","/app/customers","/app/settings","/app/boq"].some(e=>l?.startsWith(e));return(l?.startsWith("/app/glorand"),(0,i.useCallback)(async()=>{try{let e=await fetch("/api/admin/check");if(e.ok){let a=await e.json();return p(a.isAdmin),a.isAdmin}}catch(e){console.error("Failed to check admin status:",e)}return p(!1),!1},[]),(0,i.useCallback)(async()=>{if(a?.user){try{let e=await fetch("/api/billing/status");if(e.ok){let a=await e.json();if(a.isBlocked){o.replace(`/blocked${a.blockReason?`?reason=${encodeURIComponent(a.blockReason)}`:""}`);return}if(a.hasTrialGrant&&a.trialEndsAt&&new Date(a.trialEndsAt)<new Date){o.replace("/pricing?trial=ended");return}if(!a.hasActiveSubscription&&!a.hasAdminGrant&&!a.hasTrialGrant){o.replace("/pricing?subscription=required");return}}}catch(e){console.error("Failed to check blocked status:",e)}d(!0)}},[a?.user,o]),"loading"!==t&&null!==m&&("authenticated"!==t||c))?a?m&&h?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx(P.Z,{className:"h-8 w-8 animate-spin text-primary"})}):(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[s.jsx(k,{}),s.jsx("main",{className:"flex-1 overflow-auto",children:e})]}):null:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx(P.Z,{className:"h-8 w-8 animate-spin text-primary"})})}},27878:(e,a,t)=>{"use strict";t.d(a,{d:()=>l,z:()=>c});var s=t(62901),r=t(24383),n=t(42049),i=t(47279),o=t(68637);let l=(0,i.j)("inline-flex items-center justify-center rounded-lg text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-500 text-white hover:bg-emerald-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:a,size:t,asChild:r=!1,...i},c)=>{let d=r?n.g7:"button";return s.jsx(d,{className:(0,o.cn)(l({variant:a,size:t,className:e})),ref:c,...i})});c.displayName="Button"},23803:(e,a,t)=>{"use strict";t.d(a,{Ol:()=>o,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>l});var s=t(62901),r=t(24383),n=t(68637);let i=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card";let o=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a}));o.displayName="CardHeader";let l=r.forwardRef(({className:e,...a},t)=>s.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let c=r.forwardRef(({className:e,...a},t)=>s.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));c.displayName="CardDescription";let d=r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},68637:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var s=t(84330),r=t(77189);function n(...e){return(0,r.m6)((0,s.W)(e))}},83336:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,dynamic:()=>o,metadata:()=>l});var s=t(83537),r=t(57416),n=t.n(r);t(26148);let i=(0,t(88895).createProxy)(String.raw`/home/ubuntu/make_estimate/nextjs_space/components/auth-provider.tsx#AuthProvider`),o="force-dynamic",l={title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",icons:{icon:"/favicon.svg",shortcut:"/favicon.svg"},openGraph:{title:"MakeEstimate — Fast BOQs, Professional PDFs",description:"Create professional Bills of Quantities in minutes. No Excel, no spreadsheets — just fast estimation with clean PDF exports.",images:["/og-image.png"]},metadataBase:new URL(process.env.NEXTAUTH_URL||"http://localhost:3000")};function c({children:e}){return(0,s.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[s.jsx("head",{children:s.jsx("script",{src:"https://apps.abacus.ai/chatllm/appllm-lib.js"})}),s.jsx("body",{className:n().className,children:s.jsx(i,{children:e})})]})}},26148:()=>{}};